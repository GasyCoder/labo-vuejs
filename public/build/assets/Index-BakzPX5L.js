import{r as V,x as _,d as f,e,c as i,j as d,t as o,o as a,f as y,b as p,l as B,v,g,F as M,p as F,n as P,a as j,s as C,z as N}from"./app-CWaj6zxT.js";import{_ as A}from"./AppLayout-D228TyHL.js";import{_ as E}from"./Pagination-Bv1nR_J8.js";import{l as I}from"./lodash-DJbfzEvl.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const L={class:"container mx-auto px-4 py-6 sm:px-6 lg:px-8"},U={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},$={class:"text-sm text-gray-500 dark:text-gray-400 mt-0.5"},S={key:0,class:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6"},H={class:"bg-cyan-50 dark:bg-cyan-900/20 rounded-lg p-4 border border-cyan-200 dark:border-cyan-800"},O={class:"flex items-center justify-between"},T={class:"text-2xl font-bold text-cyan-900 dark:text-cyan-100"},R={class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800"},X={class:"flex items-center justify-between"},q={class:"text-2xl font-bold text-green-900 dark:text-green-100"},G={class:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800"},J={class:"flex items-center justify-between"},K={class:"text-2xl font-bold text-yellow-900 dark:text-yellow-100"},Q={class:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800"},W={class:"flex items-center justify-between"},Y={class:"text-2xl font-bold text-red-900 dark:text-red-100"},Z={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6"},ee={class:"p-4 flex flex-col lg:flex-row items-stretch lg:items-center gap-3"},te={class:"relative flex-1"},re={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},se={class:"hidden lg:block overflow-x-auto"},oe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ae={class:"bg-gray-50 dark:bg-gray-900/50"},le={class:"px-4 py-3 text-left"},ie={key:0,class:"w-3.5 h-3.5 text-primary-500",fill:"currentColor",viewBox:"0 0 20 20"},ne={key:0,d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"},de={key:1,d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"},ce={class:"px-4 py-3 text-left"},ue={key:0,class:"w-3.5 h-3.5 text-primary-500",fill:"currentColor",viewBox:"0 0 20 20"},xe={key:0,d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"},ge={key:1,d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"},ye={class:"divide-y divide-gray-200 dark:divide-gray-700"},pe={class:"px-4 py-3.5"},me={class:"text-xs font-medium text-gray-400"},fe={class:"px-4 py-3.5"},ve={class:"flex items-center gap-2.5"},be={class:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center"},ke={class:"text-xs font-semibold text-white"},he={class:"min-w-0"},we={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},_e={class:"px-4 py-3.5"},Me={class:"text-xs font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-gray-600 dark:text-gray-300"},Fe={class:"px-4 py-3.5"},je={class:"space-y-0.5"},Ce={key:0,class:"text-sm text-gray-600 dark:text-gray-300"},ze={key:1,class:"text-xs text-gray-400 truncate max-w-[180px]"},De={key:2,class:"text-xs text-gray-400 italic"},Ve={class:"px-4 py-3.5 text-center"},Be={class:"inline-flex items-center justify-center w-7 h-7 rounded-full text-xs font-semibold bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"},Pe={class:"px-4 py-3.5"},Ne={class:"text-sm text-gray-600 dark:text-gray-300"},Ae={class:"text-[11px] text-gray-400"},Ee={class:"px-4 py-3.5"},Ie={class:"flex items-center justify-end"},Le={key:1},Ue={colspan:"7",class:"py-16 text-center"},$e={class:"flex flex-col items-center"},Se={key:0,class:"text-xs text-gray-400 mt-1"},He={class:"lg:hidden divide-y divide-gray-100 dark:divide-gray-700/50"},Oe={class:"flex items-center gap-3"},Te={class:"flex-shrink-0 w-9 h-9 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center"},Re={class:"text-[11px] font-semibold text-white"},Xe={class:"min-w-0 flex-1"},qe={class:"flex items-center justify-between"},Ge={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Je={class:"inline-flex items-center justify-center w-6 h-6 rounded-full text-[11px] font-semibold bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 ml-2"},Ke={class:"flex items-center gap-2 mt-0.5 text-xs text-gray-400"},Qe={key:1,class:"py-12 text-center"},We={key:0,class:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},Ye={class:"flex flex-col sm:flex-row items-center justify-between gap-3"},Ze={class:"text-xs text-gray-500 dark:text-gray-400"},et={class:"font-medium"},tt={class:"font-medium"},rt={class:"font-medium"},ct={__name:"Index",props:{patients:Object,filters:Object,totalPatients:Number,patientsNouveaux:Number,patientsFideles:Number,patientsVip:Number,permissions:Object},setup(l){const u=l,s=V({search:u.filters.search||"",civiliteFilter:u.filters.civiliteFilter||"",statutFilter:u.filters.statutFilter||"",perPage:u.filters.perPage||10,sortField:u.filters.sortField||"created_at",sortDirection:u.filters.sortDirection||"desc"}),b=n=>{const t=String(n.nom||"").charAt(0).toUpperCase(),r=String(n.prenom||"X").charAt(0).toUpperCase();return`${t}${r}`},k=n=>n?new Date(n).toLocaleDateString("fr-FR"):"",z=n=>{if(!n)return"";const t=new Date(n),m=new Date-t,c=Math.floor(m/(1e3*60*60*24));return c===0?"Aujourd'hui":c===1?"Hier":c<30?`Il y a ${c} jours`:c<365?`Il y a ${Math.floor(c/30)} mois`:`Il y a ${Math.floor(c/365)} ans`},x=()=>{N.get(route("secretaire.patients.index"),s.value,{preserveState:!0,preserveScroll:!0,replace:!0})},h=I.debounce(x,300),D=()=>{s.value.search="",s.value.civiliteFilter="",s.value.statutFilter="",s.value.perPage=10,s.value.sortField="created_at",s.value.sortDirection="desc",x()},w=n=>{s.value.sortField===n?s.value.sortDirection=s.value.sortDirection==="asc"?"desc":"asc":(s.value.sortField=n,s.value.sortDirection="asc"),x()};return(n,t)=>(a(),_(A,null,{default:f(()=>[e("div",L,[e("div",U,[e("div",null,[t[7]||(t[7]=e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Patients",-1)),e("p",$,o(l.totalPatients)+" patients enregistrés",1)])]),l.totalPatients>0?(a(),i("div",S,[e("div",H,[e("div",O,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-cyan-700 dark:text-cyan-300"},"Total",-1)),e("p",T,o(l.totalPatients),1)]),t[9]||(t[9]=e("div",{class:"w-8 h-8 bg-cyan-100 dark:bg-cyan-800 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-cyan-600 dark:text-cyan-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})])],-1))])]),e("div",R,[e("div",X,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-green-700 dark:text-green-300"},"Nouveaux",-1)),e("p",q,o(l.patientsNouveaux),1)]),t[11]||(t[11]=e("div",{class:"w-8 h-8 bg-green-100 dark:bg-green-800 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-green-600 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})])],-1))])]),e("div",G,[e("div",J,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-yellow-700 dark:text-yellow-300"},"Fidèles",-1)),e("p",K,o(l.patientsFideles),1)]),t[13]||(t[13]=e("div",{class:"w-8 h-8 bg-yellow-100 dark:bg-yellow-800 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})])],-1))])]),e("div",Q,[e("div",W,[e("div",null,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-red-700 dark:text-red-300"},"VIP",-1)),e("p",Y,o(l.patientsVip),1)]),t[15]||(t[15]=e("div",{class:"w-8 h-8 bg-red-100 dark:bg-red-800 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-red-600 dark:text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.663 17h4.673a1.305 1.305 0 001.305-1.305v-5.39a3.26 3.26 0 00-3.26-3.26H9.663a3.26 3.26 0 00-3.26 3.26v5.39A1.305 1.305 0 009.663 17z"}),e("path",{d:"M5.5 7c.828 0 1.5-.895 1.5-2s-.672-2-1.5-2S4 3.895 4 5s.672 2 1.5 2zm9 0c.828 0 1.5-.895 1.5-2s-.672-2-1.5-2S13 3.895 13 5s.672 2 1.5 2z"})])],-1))])])])):d("",!0),e("div",Z,[e("div",ee,[e("div",te,[t[16]||(t[16]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.value.search=r),onInput:t[1]||(t[1]=(...r)=>p(h)&&p(h)(...r)),type:"text",placeholder:"Rechercher par nom, telephone, email, dossier...",class:"w-full pl-10 pr-4 py-2.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-colors"},null,544),[[B,s.value.search]])]),y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.value.civiliteFilter=r),onChange:x,class:"py-2.5 px-3 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500"},[...t[17]||(t[17]=[e("option",{value:""},"Civilité",-1),e("option",{value:"Monsieur"},"Monsieur",-1),e("option",{value:"Madame"},"Madame",-1),e("option",{value:"Mademoiselle"},"Mademoiselle",-1),e("option",{value:"Enfant-garçon"},"Enfant-garçon",-1),e("option",{value:"Enfant-fille"},"Enfant-fille",-1)])],544),[[v,s.value.civiliteFilter]]),y(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.value.statutFilter=r),onChange:x,class:"py-2.5 px-3 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500"},[...t[18]||(t[18]=[e("option",{value:""},"Statut",-1),e("option",{value:"NOUVEAU"},"Nouveau",-1),e("option",{value:"FIDELE"},"Fidèle",-1),e("option",{value:"VIP"},"VIP",-1)])],544),[[v,s.value.statutFilter]]),y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>s.value.perPage=r),onChange:x,class:"py-2.5 px-3 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500"},[...t[19]||(t[19]=[e("option",{value:"10"},"10",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)])],544),[[v,s.value.perPage]]),s.value.search||s.value.civiliteFilter||s.value.statutFilter?(a(),i("button",{key:0,onClick:D,class:"inline-flex items-center gap-1.5 px-3 py-2.5 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg transition-colors"},[...t[20]||(t[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),g(" Effacer ",-1)])])):d("",!0)])]),e("div",re,[e("div",se,[e("table",oe,[e("thead",ae,[e("tr",null,[t[23]||(t[23]=e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider w-12"},"#",-1)),e("th",le,[e("button",{onClick:t[5]||(t[5]=r=>w("nom")),class:"flex items-center gap-1 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider hover:text-gray-700 dark:hover:text-gray-300"},[t[21]||(t[21]=g(" Patient ",-1)),s.value.sortField==="nom"?(a(),i("svg",ie,[s.value.sortDirection==="asc"?(a(),i("path",ne)):(a(),i("path",de))])):d("",!0)])]),t[24]||(t[24]=e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Dossier",-1)),t[25]||(t[25]=e("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Contact",-1)),t[26]||(t[26]=e("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Prescriptions",-1)),e("th",ce,[e("button",{onClick:t[6]||(t[6]=r=>w("created_at")),class:"flex items-center gap-1 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider hover:text-gray-700 dark:hover:text-gray-300"},[t[22]||(t[22]=g(" Date ",-1)),s.value.sortField==="created_at"?(a(),i("svg",ue,[s.value.sortDirection==="asc"?(a(),i("path",xe)):(a(),i("path",ge))])):d("",!0)])]),t[27]||(t[27]=e("th",{class:"px-4 py-3 text-right text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",ye,[l.patients.data.length>0?(a(!0),i(M,{key:0},F(l.patients.data,(r,m)=>(a(),i("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors"},[e("td",pe,[e("span",me,o(l.patients.from+m),1)]),e("td",fe,[e("div",ve,[e("div",be,[e("span",ke,o(b(r)),1)]),e("div",he,[e("p",we,o(r.nom)+o(r.prenom?" "+r.prenom:""),1),e("span",{class:P(["inline-flex items-center px-1.5 py-0.5 rounded text-[11px] font-medium",r.civilite==="Monsieur"?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":r.civilite==="Madame"?"bg-pink-50 text-pink-600 dark:bg-pink-900/30 dark:text-pink-400":r.civilite==="Mademoiselle"?"bg-purple-50 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400":"bg-orange-50 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400"])},o(r.civilite),3)])])]),e("td",_e,[e("span",Me,o(r.numero_dossier),1)]),e("td",Fe,[e("div",je,[r.telephone?(a(),i("p",Ce,o(r.telephone),1)):d("",!0),r.email?(a(),i("p",ze,o(r.email),1)):d("",!0),!r.telephone&&!r.email?(a(),i("span",De,"Non renseigné")):d("",!0)])]),e("td",Ve,[e("span",Be,o(r.prescriptions_count),1)]),e("td",Pe,[e("p",Ne,o(k(r.created_at)),1),e("p",Ae,o(z(r.created_at)),1)]),e("td",Ee,[e("div",Ie,[j(p(C),{href:n.route("secretaire.patient.detail",r.id),class:"inline-flex items-center gap-1 px-2.5 py-1.5 text-xs font-medium text-primary-600 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",title:"Voir le profil"},{default:f(()=>[...t[28]||(t[28]=[g(" Voir ",-1),e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1)])]),_:1},8,["href"])])])]))),128)):(a(),i("tr",Le,[e("td",Ue,[e("div",$e,[t[29]||(t[29]=e("div",{class:"w-11 h-11 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-3"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})])],-1)),t[30]||(t[30]=e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Aucun patient trouvé",-1)),s.value.search||s.value.civiliteFilter||s.value.statutFilter?(a(),i("p",Se,"Modifiez vos critères de recherche")):d("",!0)])])]))])])]),e("div",He,[l.patients.data.length>0?(a(!0),i(M,{key:0},F(l.patients.data,r=>(a(),_(p(C),{key:r.id,href:n.route("secretaire.patient.detail",r.id),class:"block p-4 hover:bg-gray-50 dark:hover:bg-gray-700/20 transition-colors"},{default:f(()=>[e("div",Oe,[e("div",Te,[e("span",Re,o(b(r)),1)]),e("div",Xe,[e("div",qe,[e("p",Ge,o(r.nom)+o(r.prenom?" "+r.prenom:""),1),e("span",Je,o(r.prescriptions_count),1)]),e("div",Ke,[e("span",null,o(r.telephone??"Pas de tel"),1),t[31]||(t[31]=e("span",null,"·",-1)),e("span",null,o(k(r.created_at)),1)])]),t[32]||(t[32]=e("svg",{class:"w-4 h-4 text-gray-300 flex-shrink-0",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1))])]),_:2},1032,["href"]))),128)):(a(),i("div",Qe,[...t[33]||(t[33]=[e("p",{class:"text-sm text-gray-500"},"Aucun patient trouvé",-1)])]))]),l.patients.links&&l.patients.links.length>3?(a(),i("div",We,[e("div",Ye,[e("p",Ze,[e("span",et,o(l.patients.from),1),t[34]||(t[34]=g(" à ",-1)),e("span",tt,o(l.patients.to),1),t[35]||(t[35]=g(" sur ",-1)),e("span",rt,o(l.patients.total),1)]),j(E,{links:l.patients.links},null,8,["links"])])])):d("",!0)])])]),_:1}))}};export{ct as default};
