import{r as C,G as je,z as Ce,d as J,e,c as n,l as x,a as Y,b as Z,s as K,g as r,t as i,q as T,E as Re,o as a,F as q,p as A,n as E,f as m,j as h,J as Ne,v as X,y as Ee}from"./app-CXR-Rnhe.js";import{_ as qe}from"./AppLayout-DzbTcMOq.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const Ae={class:"px-3 py-3 space-y-4"},Ue={class:"mb-3"},Te={class:"rounded-xl border border-slate-200/70 bg-white p-4 shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},Me={class:"mb-4 flex items-center justify-between"},Pe={class:"mt-1 text-xs text-slate-500 dark:text-slate-400"},Se={class:"font-semibold"},$e={class:"flex items-center space-x-2"},Ie={class:"text-right"},Ve={class:"text-xs text-slate-500 dark:text-slate-400"},Fe={class:"text-xxs text-slate-400 dark:text-slate-500"},Le={class:"relative"},ze={class:"absolute left-4 right-4 top-4 z-0 h-0.5 bg-slate-200 dark:bg-slate-600"},De={class:"relative z-10 flex items-center justify-between"},Oe=["onClick"],Je={class:"mt-3 text-center"},Xe={class:"inline-flex items-center rounded-lg border border-primary-200 bg-primary-50 px-3 py-1.5 dark:border-primary-800 dark:bg-primary-900/20"},Be={class:"text-xs font-medium text-primary-800 dark:text-primary-200"},Ge={key:0,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},He={class:"space-y-4 p-5"},We={class:"space-y-4"},Qe={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},Ye={class:"rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},Ze={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Ke={class:"mt-4 rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},et={class:"grid grid-cols-2 gap-2.5 sm:grid-cols-3 lg:grid-cols-5"},tt=["onUpdate:modelValue","value"],st={class:"relative rounded-xl border-2 border-slate-200 bg-white px-3 py-2.5 transition hover:border-slate-300 hover:shadow-sm peer-checked:border-primary-600 peer-checked:bg-primary-50 peer-focus-visible:ring-4 peer-focus-visible:ring-slate-900/5 dark:border-slate-600 dark:bg-slate-800 dark:hover:border-slate-500 dark:peer-checked:bg-primary-900/15 dark:peer-focus-visible:ring-white/10"},lt={class:"flex items-center justify-between gap-2"},rt={class:"min-w-0"},at={class:"flex min-w-0 items-center gap-2"},nt={class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},it={class:"mt-4 rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},ot={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},dt={class:"mt-4 rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},ut={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},xt={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end"},ct={key:1,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},pt={class:"space-y-4 p-5"},mt={class:"grid grid-cols-1 gap-4 lg:grid-cols-3"},bt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},gt={class:"relative"},ft=["value"],vt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},kt={class:"relative"},yt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},ht={class:"relative"},wt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},_t={class:"grid grid-cols-1 items-start gap-4 md:grid-cols-3"},jt={class:"md:col-span-2"},Ct={class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},Rt={key:0,class:"text-red-500"},Nt={key:0,class:"rounded-xl border border-blue-200/70 bg-blue-50 px-4 py-2.5 dark:border-blue-800/30 dark:bg-blue-900/15"},Et={class:"flex items-center justify-between gap-3"},qt={class:"text-sm font-bold text-blue-800 dark:text-blue-200"},At={key:1,class:"flex gap-2"},Ut={class:"relative flex-1"},Tt={key:2,class:"mt-1.5 flex items-center gap-1.5 text-xs text-blue-700 dark:text-blue-300"},Mt={key:3,class:"mt-1.5 flex items-center gap-1.5 text-xs text-amber-700 dark:text-amber-300"},Pt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},St={class:"mb-2.5 flex items-center justify-between gap-3"},$t={class:"text-xs text-slate-500 dark:text-slate-400"},It={class:"relative"},Vt={class:"flex flex-col items-center justify-between gap-3 border-t border-slate-200/60 pt-4 sm:flex-row dark:border-slate-700/70"},Ft={key:2,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},Lt={class:"bg-gradient-to-r from-green-50 to-emerald-50 px-5 py-4 dark:from-slate-800 dark:to-slate-800"},zt={class:"flex items-start justify-between gap-4"},Dt={class:"shrink-0 flex items-center gap-2"},Ot={key:0,class:"inline-flex items-center gap-1.5 rounded-lg border border-green-200/70 bg-green-50 px-2.5 py-1 text-xs font-semibold text-green-700 dark:border-green-800/40 dark:bg-green-900/15 dark:text-green-300"},Jt={class:"grid grid-cols-1 gap-4 p-5 lg:grid-cols-3"},Xt={class:"space-y-4 lg:col-span-2"},Bt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},Gt={class:"relative"},Ht={key:0,class:"mt-3 max-h-80 space-y-2 overflow-auto"},Wt={class:"flex items-center gap-2"},Qt={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Yt={key:0,class:"rounded-full bg-indigo-100 px-2 py-0.5 text-xxs font-semibold text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300"},Zt={class:"text-xs text-slate-500 dark:text-slate-400"},Kt={key:0,class:"ml-1 text-blue-600 dark:text-blue-400"},es={key:0,class:"mt-1 text-xxs text-indigo-600 dark:text-indigo-400"},ts=["disabled","onClick"],ss={class:"flex flex-col items-center justify-between gap-3 border-t border-slate-200/60 pt-4 sm:flex-row dark:border-slate-700/70"},ls={class:"space-y-4"},rs={class:"rounded-xl border border-slate-200/70 bg-slate-50 p-4 dark:border-slate-700/70 dark:bg-slate-700/50"},as={key:0,class:"py-4 text-center text-xs text-slate-500 dark:text-slate-400"},ns={key:1,class:"mb-3 space-y-2"},is={class:"flex-1"},os={class:"mb-0.5 flex items-center space-x-1.5"},ds={class:"rounded bg-blue-100 px-1.5 py-0.5 font-mono text-xxs font-bold text-blue-700 dark:bg-blue-900/30 dark:text-blue-200"},us={class:"text-xs font-medium text-slate-800 dark:text-slate-100"},xs={class:"text-xxs text-slate-500 dark:text-slate-400"},cs={key:0,class:"mt-0.5 inline-block rounded-full bg-purple-100 px-1.5 py-0.5 text-xxs text-purple-700 dark:bg-purple-900/30 dark:text-purple-200"},ps={class:"ml-2 text-right"},ms={class:"text-xs font-medium text-slate-700 dark:text-slate-300"},bs=["onClick"],gs={class:"rounded-lg bg-green-50/70 p-3 text-sm dark:bg-green-900/15"},fs={class:"flex items-center justify-between"},vs={class:"font-semibold text-green-700 dark:text-green-300"},ks={key:3,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},ys={class:"bg-gradient-to-r from-yellow-50 to-orange-50 px-5 py-4 dark:from-slate-800 dark:to-slate-800"},hs={class:"flex items-start justify-between gap-4"},ws={class:"shrink-0 flex items-center gap-2"},_s={key:0,class:"inline-flex items-center gap-1.5 rounded-lg border border-yellow-200/70 bg-yellow-50 px-2.5 py-1 text-xs font-semibold text-yellow-700 dark:border-yellow-800/40 dark:bg-yellow-900/15 dark:text-yellow-300"},js={class:"grid grid-cols-1 gap-4 p-5 xl:grid-cols-3"},Cs={class:"space-y-4 xl:col-span-2"},Rs={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},Ns={class:"relative"},Es={key:0,class:"grid grid-cols-1 gap-2 lg:grid-cols-2"},qs={class:"flex items-start gap-2.5 flex-1"},As={class:"flex-1 min-w-0"},Us={class:"text-xs font-medium text-slate-800 dark:text-slate-100"},Ts={class:"mt-1 flex items-center gap-2"},Ms={class:"inline-flex items-center rounded-full bg-yellow-100 px-1.5 py-0.5 text-xxs font-medium text-yellow-700 dark:bg-yellow-900 dark:text-yellow-200"},Ps={key:0,class:"text-xxs font-medium text-green-600 dark:text-green-400"},Ss=["disabled","onClick"],$s={class:"flex flex-col items-center justify-between gap-3 border-t border-slate-200/60 pt-4 sm:flex-row dark:border-slate-700/70"},Is={class:"rounded-xl border border-slate-200/70 bg-slate-50 p-4 dark:border-slate-700/70 dark:bg-slate-700/50"},Vs={key:0,class:"py-4 text-center text-xs text-slate-500 dark:text-slate-400"},Fs={key:1,class:"space-y-2"},Ls={class:"mb-2 flex items-start justify-between gap-2"},zs={class:"text-xs font-medium text-slate-800 dark:text-slate-100"},Ds={class:"mt-1 text-xxs text-slate-500 dark:text-slate-400"},Os=["onClick"],Js={class:"flex items-center justify-between"},Xs=["onUpdate:modelValue"],Bs={class:"mt-3 border-t border-slate-200 pt-2 dark:border-slate-600"},Gs={class:"flex items-center justify-between text-sm"},Hs={class:"font-semibold text-yellow-700 dark:text-yellow-300"},Ws={key:4,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},Qs={class:"bg-gradient-to-r from-red-50 to-pink-50 px-5 py-4 dark:from-slate-800 dark:to-slate-800"},Ys={class:"flex items-start justify-between gap-4"},Zs={class:"shrink-0 text-right"},Ks={class:"text-lg font-bold text-red-600 dark:text-red-400"},el={class:"grid grid-cols-1 gap-4 p-5 xl:grid-cols-3"},tl={class:"space-y-4 xl:col-span-2"},sl={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},ll={class:"space-y-2 text-sm"},rl={class:"flex justify-between border-b border-slate-200/60 py-1.5 dark:border-slate-700/70"},al={class:"font-medium text-slate-800 dark:text-slate-100"},nl={class:"flex justify-between border-b border-slate-200/60 py-1.5 dark:border-slate-700/70"},il={class:"font-medium text-slate-800 dark:text-slate-100"},ol={class:"flex justify-between border-b border-slate-200/60 py-1.5 dark:border-slate-700/70"},dl={class:"font-medium text-slate-800 dark:text-slate-100"},ul={class:"flex justify-between border-b border-slate-200/60 py-1.5 dark:border-slate-700/70"},xl={class:"font-medium text-red-600 dark:text-red-400"},cl={class:"rounded-xl border border-red-200/70 bg-red-50 p-3 dark:border-red-800/40 dark:bg-red-900/15"},pl={class:"flex items-center justify-between"},ml={class:"text-base font-bold text-red-600 dark:text-red-400"},bl={class:"space-y-4"},gl={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},fl={class:"relative"},vl=["value"],kl={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},yl={class:"relative"},hl={class:"flex flex-col items-center justify-between gap-3 border-t border-slate-200/60 px-5 pb-5 pt-4 sm:flex-row dark:border-slate-700/70"},wl=["disabled"],_l={key:0},jl={key:1,class:"flex items-center gap-2"},Cl={key:5,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},Rl={class:"p-4 space-y-4"},Nl={class:"text-sm text-slate-700 dark:text-slate-300"},El={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"},ql={class:"text-sm font-mono font-bold text-slate-800 dark:text-slate-100"},Al={class:"flex justify-end pt-4"},Ul={key:6,class:"mx-auto max-w-md"},Tl={class:"rounded-t-xl border border-orange-200 bg-white p-5 text-center shadow-sm dark:border-orange-800 dark:bg-slate-800"},Ml={key:0,class:"mt-2 inline-flex items-center rounded-full bg-slate-100 px-2 py-1 dark:bg-slate-700"},Pl={class:"text-xs font-medium text-slate-700 dark:text-slate-300"},Sl={class:"rounded-b-xl border border-t-0 border-orange-200 bg-white p-4 shadow-sm dark:border-orange-800 dark:bg-slate-800"},$l={class:"mb-3 border-b border-dashed border-slate-200 pb-2 text-center dark:border-slate-700"},Il={class:"font-medium text-slate-800 dark:text-slate-100"},Vl={class:"text-xs text-slate-500 dark:text-slate-400"},Fl={class:"mb-4 space-y-2 text-sm"},Ll={class:"flex justify-between"},zl={class:"text-slate-900 dark:text-slate-100"},Dl={key:0},Ol={key:0,class:"flex justify-between"},Jl={class:"text-slate-900 dark:text-slate-100"},Xl={class:"flex justify-between"},Bl={class:"text-slate-900 dark:text-slate-100"},Gl={key:1,class:"flex justify-between"},Hl={class:"text-slate-900 dark:text-slate-100"},Wl={key:2,class:"flex justify-between"},Ql={class:"text-slate-900 dark:text-slate-100"},Yl={class:"mt-2 border-t border-dashed border-slate-200 pt-2 dark:border-slate-700"},Zl={class:"flex justify-between font-bold"},Kl={class:"text-orange-600 dark:text-orange-400"},er={class:"mt-4 space-y-3"},tr=["href"],sr={key:1,class:"flex w-full cursor-not-allowed items-center justify-center rounded-xl bg-slate-400 px-4 py-3 text-sm font-medium text-white opacity-70"},lr={class:"grid grid-cols-3 gap-2"},rr=["href"],ar={key:1,class:"flex cursor-not-allowed items-center justify-center rounded-xl bg-slate-100 px-3 py-2 text-sm text-slate-700 opacity-50 dark:bg-slate-700 dark:text-slate-300"},nr={class:"border-t border-slate-200/60 pt-2 dark:border-slate-600"},ir={class:"mt-4 space-y-1 border-t border-slate-200/60 pt-3 text-xs text-slate-500 dark:border-slate-600 dark:text-slate-400"},or={class:"flex items-center justify-between"},dr={class:"flex items-center"},ur={key:0,class:"flex items-center"},xr={class:"ml-1 rounded bg-slate-100 px-1 text-xxs dark:bg-slate-700"},vr={__name:"Edit",props:{prescription:{type:Object,required:!0},prescripteurs:{type:Array,default:()=>[]},paymentMethods:{type:Array,default:()=>[]},urgenceFees:{type:Object,default:()=>({jour:0,nuit:0})},civilites:{type:Array,default:()=>[]}},setup(b){var le;const o=b,R=[{key:"patient",icon:"user",label:"Patient"},{key:"clinique",icon:"list-round",label:"Clinique"},{key:"analyses",icon:"filter",label:"Analyses"},{key:"prelevements",icon:"package",label:"Prelevements"},{key:"paiement",icon:"coin-alt",label:"Paiement"},{key:"tubes",icon:"scan",label:"Etiquettes"},{key:"confirmation",icon:"check-circle",label:"Fini"}],f=C("patient"),B=C(!1),M=C(""),S=C([]),g=C([]);let G=null;const $=C(""),I=C([]),v=C([]);let H=null;const c=C({nom:"",prenom:"",civilite:o.civilites[0]||"Monsieur",date_naissance:"",telephone:"",email:"",adresse:""}),d=C({prescripteur_id:"",patient_type:"EXTERNE",age:0,unite_age:"Ans",poids:"",renseignement_clinique:""}),_=C({payment_method:((le=o.paymentMethods[0])==null?void 0:le.code)||"",remise:0,paiement_statut:!0});je(()=>{var l,t,u,y,j;if(o.prescription){if(o.prescription.patient&&(c.value={nom:o.prescription.patient.nom||"",prenom:o.prescription.patient.prenom||"",civilite:o.prescription.patient.civilite||o.civilites[0],date_naissance:o.prescription.patient.date_naissance||"",telephone:o.prescription.patient.telephone||"",email:o.prescription.patient.email||"",adresse:o.prescription.patient.adresse||""}),d.value={prescripteur_id:o.prescription.prescripteur_id||"",patient_type:o.prescription.patient_type||"EXTERNE",age:Number(o.prescription.age||0),unite_age:o.prescription.unite_age||"Ans",poids:o.prescription.poids||"",renseignement_clinique:o.prescription.renseignement_clinique||""},((l=o.prescription.analyses)==null?void 0:l.length)>0&&(g.value=o.prescription.analyses.map(p=>({id:p.id,code:p.code,designation:p.designation,prix:p.prix,parent_id:p.parent_id,parent:p.parent,level:p.level}))),((t=o.prescription.prelevements)==null?void 0:t.length)>0&&(v.value=o.prescription.prelevements.map(p=>{var L;return{id:p.id,denomination:p.denomination,prix:p.prix,prix_promotion:p.prix_promotion,quantite:((L=p.pivot)==null?void 0:L.quantite)||1}})),((u=o.prescription.paiements)==null?void 0:u.length)>0){const p=o.prescription.paiements[0];_.value={payment_method:((y=p.payment_method)==null?void 0:y.code)||((j=o.paymentMethods[0])==null?void 0:j.code)||"",remise:o.prescription.remise>0?(o.prescription.remise/p.montant*100).toFixed(0):0,paiement_statut:!!p.status}}const U=new URLSearchParams(window.location.search).get("step");U&&R.some(p=>p.key===U)&&(f.value=U)}});const W=T(()=>new Date().toLocaleString("fr-FR")),V=T(()=>R.findIndex(l=>l.key===f.value)),ue=T(()=>R.length<=1?0:V.value/(R.length-1)*100),z=T(()=>g.value.reduce((l,t)=>l+Number(t.prix_effectif||t.prix||0),0)),D=T(()=>v.value.reduce((l,t)=>{const u=Math.max(1,Number(t.quantite||1)),y=Number(t.prix_promotion||0),j=u>1&&y>0?y:Number(t.prix||0);return l+j*u},0)),ee=T(()=>d.value.patient_type==="URGENCE-JOUR"?Number(o.urgenceFees.jour||0):d.value.patient_type==="URGENCE-NUIT"?Number(o.urgenceFees.nuit||0):0),te=T(()=>{const l=Math.max(0,Number(_.value.remise||0));return(z.value+D.value)*(l/100)}),Q=T(()=>{const l=z.value+D.value;return Math.max(0,l-te.value+ee.value)}),k=l=>`${Number(l||0).toLocaleString("fr-FR")} Ar`,xe=l=>R.findIndex(u=>u.key===l.key)<V.value?"bg-green-500 text-white shadow-sm":l.key===f.value?"bg-primary-500 text-white shadow-md scale-110":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600",ce=l=>R.findIndex(u=>u.key===l.key)<V.value?"text-green-600 dark:text-green-400":l.key===f.value?"text-primary-600 dark:text-primary-400":"text-slate-500 dark:text-slate-400",pe=l=>String(l||"").trim()||"-",me=()=>{const l=c.value.date_naissance;if(!l)return;const t=new Date(l),u=new Date,y=1440*60*1e3,j=Math.floor((u.getTime()-t.getTime())/y),P=Math.floor(j/30.4375),U=Math.floor(P/12);if(j<=60){d.value.age=j,d.value.unite_age="Jours";return}if(P<24){d.value.age=P,d.value.unite_age="Mois";return}d.value.age=U,d.value.unite_age="Ans"},w=async l=>{l==="clinique"&&!c.value.nom.trim()||l==="analyses"&&!d.value.prescripteur_id||l==="prelevements"&&g.value.length===0||l==="paiement"&&g.value.length===0||(f.value=l,l==="prelevements"&&I.value.length===0&&await se(""))},be=()=>{var l;f.value="patient",B.value=!1,M.value="",S.value=[],g.value=[],$.value="",I.value=[],v.value=[],c.value={nom:"",prenom:"",civilite:o.civilites[0]||"Monsieur",date_naissance:"",telephone:"",email:"",adresse:""},d.value={prescripteur_id:"",patient_type:"EXTERNE",age:0,unite_age:"Ans",poids:"",renseignement_clinique:""},_.value={payment_method:((l=o.paymentMethods[0])==null?void 0:l.code)||"",remise:0,paiement_statut:!0}},ge=async l=>{const u=await(await fetch(`${route("secretaire.prescription.lookup.analyses")}?q=${encodeURIComponent(l)}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();S.value=u.data||[]},se=async l=>{const u=await(await fetch(`${route("secretaire.prescription.lookup.prelevements")}?q=${encodeURIComponent(l)}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();I.value=u.data||[]},fe=()=>{G&&window.clearTimeout(G),G=window.setTimeout(async()=>{if(M.value.trim().length<2){S.value=[];return}await ge(M.value.trim())},250)},ve=()=>{H&&window.clearTimeout(H),H=window.setTimeout(async()=>{await se($.value.trim())},250)},O=l=>g.value.some(t=>t.id===l),ke=l=>{if(!O(l.id))if(l.is_parent){const t=g.value.filter(u=>u.parent_id===l.id);if(t.length>0){alert(`Certaines analyses de ce panel sont dÃ©jÃ  sÃ©lectionnÃ©es: ${t.map(u=>u.designation).join(", ")}`);return}if(Number(l.prix||0)<=0){alert("Ce panel n'a pas de prix dÃ©fini");return}g.value.push({id:l.id,designation:l.designation,code:l.code,level:l.level,prix:Number(l.prix||0),prix_effectif:Number(l.prix||0),parent_id:null,parent_nom:"Panel complet",is_parent:!0,enfants_inclus:l.enfants_inclus||[]})}else{if(l.parent_id){const u=g.value.find(y=>y.id===l.parent_id&&y.is_parent);if(u){alert(`Cette analyse est dÃ©jÃ  incluse dans le panel Â« ${u.designation} Â»`);return}}let t="Analyse individuelle";l.parent_nom?t=l.parent_nom:l.parent&&Number(l.parent.prix||0)>0?t=`${l.parent.designation} (partie)`:l.parent&&(t=l.parent.designation),g.value.push({id:l.id,designation:l.designation,code:l.code,level:l.level,prix:Number(l.prix||0),prix_effectif:Number(l.prix||0),parent_id:l.parent_id,parent_nom:t,is_parent:!1})}},ye=l=>{g.value=g.value.filter(t=>t.id!==l)},F=l=>v.value.some(t=>t.id===l),he=l=>{F(l.id)||v.value.push({...l,quantite:1})},we=l=>{v.value=v.value.filter(t=>t.id!==l)},_e=()=>{!c.value.nom.trim()||!d.value.prescripteur_id||g.value.length===0||!_.value.payment_method||w("tubes")};return(l,t)=>(a(),Ce(qe,null,{default:J(()=>{var u,y,j,P,U,p,L,re,ae,ne,ie,oe;return[e("div",Ae,[e("div",Ue,[Y(Z(K),{href:l.route("secretaire.prescription.index"),class:"inline-flex items-center rounded-lg bg-slate-50 px-3 py-1.5 text-sm text-slate-600 transition-colors hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},{default:J(()=>[...t[29]||(t[29]=[e("em",{class:"ni ni-arrow-left mr-1.5 text-xs"},null,-1),r("Retour a la liste ",-1)])]),_:1},8,["href"])]),e("div",Te,[e("div",Me,[e("div",null,[t[31]||(t[31]=e("h1",{class:"flex items-center text-base font-semibold text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-dashlite mr-2 text-sm text-primary-500"}),r("Nouvelle Prescription ")],-1)),e("p",Pe,[t[30]||(t[30]=r(" Reference: ",-1)),e("span",Se,i((u=b.prescription)==null?void 0:u.reference),1)])]),e("div",$e,[e("div",Ie,[e("div",Ve,i(W.value),1),e("div",Fe,"Cree par: "+i((y=l.$page.props.auth.user)==null?void 0:y.name),1)]),e("button",{type:"button",class:"rounded-md bg-red-50 px-2.5 py-1.5 text-xs text-red-600 transition-colors hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",onClick:be},[...t[32]||(t[32]=[e("em",{class:"ni ni-refresh mr-1 text-xs"},null,-1),r("Reset ",-1)])])])]),e("div",Le,[e("div",ze,[e("div",{class:"h-full bg-gradient-to-r from-primary-400 to-green-400 transition-all duration-300",style:Re({width:`${ue.value}%`})},null,4)]),e("div",De,[(a(),n(q,null,A(R,s=>e("div",{key:s.key,class:"flex flex-col items-center"},[e("button",{type:"button",class:E(["relative mb-1.5 flex h-8 w-8 items-center justify-center rounded-full transition-all duration-200",xe(s)]),onClick:N=>w(s.key)},[e("em",{class:E(`ni ni-${s.icon} text-xs`)},null,2)],10,Oe),e("span",{class:E(["block text-xxs font-medium",ce(s)])},i(s.label),3)])),64))])]),e("div",Je,[e("div",Xe,[e("em",{class:E(`ni ni-${R[V.value].icon} mr-1.5 text-xs text-primary-600 dark:text-primary-400`)},null,2),e("span",Be," Etape "+i(V.value+1)+"/"+i(R.length)+" : "+i(R[V.value].label),1)])])]),f.value==="patient"?(a(),n("section",Ge,[t[46]||(t[46]=e("div",{class:"border-b border-slate-200/60 px-5 py-4 dark:border-slate-700/70"},[e("div",{class:"flex items-start justify-between gap-4"},[e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-primary-600 shadow-sm"},[e("em",{class:"ni ni-user text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},[r(" Patient "),e("span",{class:"font-normal text-slate-600 dark:text-slate-400"},"- Modification")]),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Modifier les informations du patient.")])])])],-1)),e("div",He,[e("div",We,[e("div",Qe,[t[44]||(t[44]=e("div",{class:"mb-4 flex items-center justify-between"},[e("h3",{class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},"Dossier patient"),e("span",{class:"text-xs text-slate-600 dark:text-slate-400"},"* obligatoires")],-1)),e("div",Ye,[t[35]||(t[35]=e("h4",{class:"mb-3 text-sm font-semibold text-slate-900 dark:text-slate-100"},"Identite",-1)),e("div",Ze,[e("div",null,[t[33]||(t[33]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},[r("Nom "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.value.nom=s),type:"text",placeholder:"Ex: RAJAONA",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[h,c.value.nom]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Prenom(s)",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.value.prenom=s),type:"text",placeholder:"Ex: Miangaly",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[h,c.value.prenom]])])])]),e("div",Ke,[t[38]||(t[38]=e("div",{class:"mb-2.5 flex items-center justify-between gap-3"},[e("h4",{class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},[r("Civilite "),e("span",{class:"text-red-500"},"*")])],-1)),e("div",et,[(a(!0),n(q,null,A(b.civilites,s=>(a(),n("label",{key:s,class:"cursor-pointer"},[m(e("input",{"onUpdate:modelValue":N=>c.value.civilite=N,type:"radio",value:s,class:"peer sr-only"},null,8,tt),[[Ne,c.value.civilite]]),e("div",st,[e("div",lt,[e("div",rt,[e("div",at,[e("div",nt,i(pe(s)),1),t[36]||(t[36]=e("span",{class:"hidden items-center gap-1 rounded-full border border-primary-200 bg-primary-50 px-2 py-0.5 text-[11px] font-semibold text-primary-700 peer-checked:inline-flex dark:border-primary-800/30 dark:bg-primary-900/15 dark:text-primary-200"},[e("em",{class:"ni ni-check text-[11px]"}),r(" Selectionne ")],-1))])]),t[37]||(t[37]=e("span",{class:"flex h-6 w-6 shrink-0 scale-95 items-center justify-center rounded-full border border-slate-200 bg-white opacity-0 transition peer-checked:scale-100 peer-checked:opacity-100 dark:border-slate-600 dark:bg-slate-700"},[e("em",{class:"ni ni-check text-xs text-primary-600"})],-1))])])]))),128))])]),e("div",it,[t[41]||(t[41]=e("h4",{class:"mb-3 text-sm font-semibold text-slate-900 dark:text-slate-100"},"Contact",-1)),e("div",ot,[e("div",null,[t[39]||(t[39]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Telephone",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>c.value.telephone=s),type:"tel",placeholder:"+261 34 12 345 67",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[h,c.value.telephone]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Email",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>c.value.email=s),type:"email",placeholder:"email@exemple.com",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[h,c.value.email]])])])]),e("div",dt,[t[42]||(t[42]=e("h4",{class:"mb-3 text-sm font-semibold text-slate-900 dark:text-slate-100"},"Adresse",-1)),t[43]||(t[43]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Rue / Quartier / Lot",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>c.value.adresse=s),type:"text",placeholder:"Ex: Lot II M 45 Bis Analakely",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[h,c.value.adresse]])])]),e("div",ut,[e("div",xt,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700 sm:w-auto",onClick:t[5]||(t[5]=s=>w("clinique"))},[...t[45]||(t[45]=[e("em",{class:"ni ni-check"},null,-1),r(" Valider et continuer ",-1)])])])])])])])):x("",!0),f.value==="clinique"?(a(),n("section",ct,[t[75]||(t[75]=e("div",{class:"bg-gradient-to-r from-cyan-50 to-blue-50 px-5 py-4 dark:from-slate-800 dark:to-slate-800"},[e("div",{class:"flex items-start justify-between gap-4"},[e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-cyan-600 shadow-sm"},[e("em",{class:"ni ni-notes text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},"Informations cliniques"),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Renseignements medicaux et prescription.")])]),e("div",{class:"shrink-0 flex items-center gap-2"},[e("span",{class:"inline-flex items-center gap-1.5 rounded-lg border border-cyan-200 bg-cyan-50 px-2.5 py-1 text-xs font-semibold text-cyan-800 dark:border-cyan-800/30 dark:bg-cyan-900/15 dark:text-cyan-200"},[e("em",{class:"ni ni-check-circle"}),r(" Clinique ")]),e("span",{class:"hidden items-center gap-2 text-xs text-slate-500 sm:inline-flex dark:text-slate-400"},[e("span",{class:"inline-flex items-center gap-1"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-cyan-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-slate-300 dark:bg-slate-600"})]),r(" Etape 2/7 ")])])])],-1)),e("div",pt,[e("div",mt,[e("div",bt,[t[50]||(t[50]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-user-md mr-1.5 text-cyan-600 dark:text-cyan-300"}),r(" Prescripteur "),e("span",{class:"text-red-500"},"*")],-1)),e("div",gt,[t[48]||(t[48]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-user-md text-base text-slate-400 dark:text-slate-500"})],-1)),m(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>d.value.prescripteur_id=s),class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 transition hover:border-slate-300 focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:hover:border-slate-500"},[t[47]||(t[47]=e("option",{value:""},"Selectionner un prescripteur...",-1)),(a(!0),n(q,null,A(b.prescripteurs,s=>(a(),n("option",{key:s.id,value:s.id},i(s.nom_complet),9,ft))),128))],512),[[X,d.value.prescripteur_id]]),t[49]||(t[49]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("em",{class:"ni ni-chevron-down text-xs text-slate-400 dark:text-slate-500"})],-1))])]),e("div",vt,[t[54]||(t[54]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-building mr-1.5 text-blue-600 dark:text-blue-300"}),r(" Type de patient ")],-1)),e("div",kt,[t[52]||(t[52]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-building text-base text-slate-400 dark:text-slate-500"})],-1)),m(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>d.value.patient_type=s),class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 transition hover:border-slate-300 focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:hover:border-slate-500"},[...t[51]||(t[51]=[e("option",{value:"EXTERNE"},"ðŸ  Externe",-1),e("option",{value:"HOSPITALISE"},"ðŸ¥ Hospitalise",-1),e("option",{value:"URGENCE-JOUR"},"ðŸš¨ Urgence Jour",-1),e("option",{value:"URGENCE-NUIT"},"ðŸŒ™ Urgence Nuit",-1)])],512),[[X,d.value.patient_type]]),t[53]||(t[53]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("em",{class:"ni ni-chevron-down text-xs text-slate-400 dark:text-slate-500"})],-1))]),t[55]||(t[55]=e("p",{class:"mt-2 flex items-center gap-1.5 text-xs text-slate-600 dark:text-slate-400"},[e("em",{class:"ni ni-info-circle"}),r(" Utile pour le tri et la prise en charge. ")],-1))]),e("div",yt,[t[58]||(t[58]=e("div",{class:"mb-2.5 flex items-center justify-between gap-3"},[e("label",{class:"block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-activity mr-1.5 text-orange-600 dark:text-orange-300"}),r(" Poids ")]),e("span",{class:"text-xs text-slate-500 dark:text-slate-400"},"kg")],-1)),e("div",ht,[t[56]||(t[56]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-activity text-base text-slate-400 dark:text-slate-500"})],-1)),m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>d.value.poids=s),type:"number",min:"0",step:"0.1",placeholder:"Ex: 65.5",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-12 text-sm text-slate-900 placeholder-slate-400 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[h,d.value.poids,void 0,{number:!0}]]),t[57]||(t[57]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("span",{class:"text-xs font-semibold text-slate-500 dark:text-slate-400"},"kg")],-1))]),t[59]||(t[59]=e("p",{class:"mt-2 flex items-center gap-1.5 text-xs text-slate-600 dark:text-slate-400"},[e("em",{class:"ni ni-info-circle"}),r(" Optionnel - utile pour le calcul des doses. ")],-1))])]),e("div",wt,[t[67]||(t[67]=e("div",{class:"mb-3 flex items-center justify-between gap-3"},[e("h3",{class:"flex items-center gap-2 text-sm font-semibold text-slate-900 dark:text-slate-100"},[e("span",{class:"flex h-8 w-8 items-center justify-center rounded-xl border border-emerald-200/70 bg-emerald-50 dark:border-emerald-800/30 dark:bg-emerald-900/15"},[e("em",{class:"ni ni-calendar text-sm text-emerald-700 dark:text-emerald-300"})]),r(" Naissance et age ")]),e("span",{class:"text-xs text-slate-500 dark:text-slate-400"},"Recommande")],-1)),e("div",_t,[e("div",jt,[t[60]||(t[60]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Date de naissance",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>c.value.date_naissance=s),type:"date",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",onChange:me},null,544),[[h,c.value.date_naissance]])]),e("div",null,[e("label",Ct,[t[61]||(t[61]=r("Age ",-1)),c.value.date_naissance?x("",!0):(a(),n("span",Rt,"*"))]),c.value.date_naissance?(a(),n("div",Nt,[e("div",Et,[e("span",qt,i(d.value.age)+" "+i(d.value.unite_age),1),t[62]||(t[62]=e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"},null,-1))])])):(a(),n("div",At,[e("div",Ut,[t[63]||(t[63]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-hash text-base text-slate-400 dark:text-slate-500"})],-1)),m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>d.value.age=s),type:"number",min:"0",max:"150",placeholder:"Ex: 32",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-3 text-sm text-slate-900 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"},null,512),[[h,d.value.age,void 0,{number:!0}]])]),m(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>d.value.unite_age=s),class:"w-24 rounded-xl border border-slate-200 bg-white px-3 py-2.5 text-sm text-slate-900 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"},[...t[64]||(t[64]=[e("option",{value:"Ans"},"Ans",-1),e("option",{value:"Mois"},"Mois",-1),e("option",{value:"Jours"},"Jours",-1)])],512),[[X,d.value.unite_age]])])),c.value.date_naissance?(a(),n("p",Tt,[...t[65]||(t[65]=[e("em",{class:"ni ni-info-circle"},null,-1),r(" Calcul auto. ",-1)])])):(a(),n("p",Mt,[...t[66]||(t[66]=[e("em",{class:"ni ni-info-circle"},null,-1),r(" Ajoutez une date pour calcul auto. ",-1)])]))])])]),e("div",Pt,[e("div",St,[t[68]||(t[68]=e("label",{class:"block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-clipboard mr-1.5 text-purple-600 dark:text-purple-300"}),r(" Renseignements cliniques ")],-1)),e("span",$t,i(String(d.value.renseignement_clinique||"").length)+" caracteres",1)]),e("div",It,[m(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=s=>d.value.renseignement_clinique=s),rows:"4",placeholder:"Decrivez les symptomes, antecedents medicaux, indications speciales, allergies connues...",class:"w-full resize-none rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 placeholder-slate-400 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[h,d.value.renseignement_clinique]]),t[69]||(t[69]=e("div",{class:"pointer-events-none absolute right-3 top-3 text-slate-400 dark:text-slate-500"},[e("em",{class:"ni ni-edit text-sm"})],-1))]),t[70]||(t[70]=e("div",{class:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-slate-600 dark:text-slate-400"},[e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-shield-check text-emerald-600 dark:text-emerald-300"}),r(" Informations confidentielles ")]),e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-lock text-blue-600 dark:text-blue-300"}),r(" Donnees securisees ")])],-1))]),t[74]||(t[74]=e("div",{class:"rounded-xl border border-indigo-200/60 bg-indigo-50/70 p-4 dark:border-indigo-800/40 dark:bg-indigo-900/10"},[e("div",{class:"flex items-start gap-3"},[e("div",{class:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-indigo-600 shadow-sm"},[e("em",{class:"ni ni-bulb text-sm text-white"})]),e("div",null,[e("h4",{class:"text-sm font-semibold text-indigo-900 dark:text-indigo-200"},"Conseils pour une prescription optimale"),e("div",{class:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-2 text-xs text-indigo-800 dark:text-indigo-300"},[e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"}),r("Naissance -> age calcule")]),e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"}),r("Verifier les allergies connues")]),e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"}),r("Noter les traitements en cours")])])])])],-1)),e("div",Vt,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-100 px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-200 sm:w-auto dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",onClick:t[13]||(t[13]=s=>w("patient"))},[...t[71]||(t[71]=[e("em",{class:"ni ni-arrow-left"},null,-1),r(" Retour patient ",-1)])]),t[73]||(t[73]=e("span",{class:"hidden items-center gap-2 text-xs text-slate-500 sm:inline-flex dark:text-slate-400"},[e("span",{class:"inline-flex items-center gap-1"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-cyan-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-slate-300 dark:bg-slate-600"})]),r(" Etape 2/7 ")],-1)),e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700 sm:w-auto",onClick:t[14]||(t[14]=s=>w("analyses"))},[...t[72]||(t[72]=[r(" Continuer vers analyses ",-1),e("em",{class:"ni ni-arrow-right"},null,-1)])])])])])):x("",!0),f.value==="analyses"?(a(),n("section",Ft,[e("div",Lt,[e("div",zt,[t[78]||(t[78]=e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-green-600 shadow-sm"},[e("em",{class:"ni ni-filter text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},"Analyses"),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Recherchez et selectionnez les analyses prescrites.")])],-1)),e("div",Dt,[g.value.length>0?(a(),n("span",Ot,[t[76]||(t[76]=e("em",{class:"ni ni-check-circle"},null,-1)),r(" "+i(g.value.length)+" selectionnees ",1)])):x("",!0),t[77]||(t[77]=e("span",{class:"hidden items-center gap-2 text-xs text-slate-500 sm:inline-flex dark:text-slate-400"}," Etape 3/7 ",-1))])])]),e("div",Jt,[e("div",Xt,[e("div",Bt,[t[81]||(t[81]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-search mr-1.5 text-green-600 dark:text-green-300"}),r(" Rechercher une analyse ")],-1)),e("div",Gt,[t[80]||(t[80]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-search text-base text-slate-400 dark:text-slate-500"})],-1)),m(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>M.value=s),type:"text",placeholder:"Code ou designation...",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 placeholder-slate-400 transition focus:border-green-500 focus:outline-none focus:ring-4 focus:ring-green-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500",onInput:fe},null,544),[[h,M.value]]),M.value?(a(),n("button",{key:0,type:"button",class:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 transition hover:text-red-500 dark:hover:text-red-400",onClick:t[16]||(t[16]=s=>{M.value="",S.value=[]})},[...t[79]||(t[79]=[e("em",{class:"ni ni-cross-circle text-lg"},null,-1)])])):x("",!0)]),S.value.length>0?(a(),n("div",Ht,[(a(!0),n(q,null,A(S.value,s=>{var N,de;return a(),n("div",{key:s.id,class:"flex items-center justify-between rounded-xl border border-slate-200 p-3 transition-colors hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700/40"},[e("div",null,[e("div",Wt,[e("p",Qt,i(s.designation),1),s.is_parent?(a(),n("span",Yt," Panel ("+i(((N=s.enfants_inclus)==null?void 0:N.length)||0)+") ",1)):x("",!0)]),e("p",Zt,[r(i(s.code)+" | "+i(k(s.prix))+" ",1),s.parent_nom&&!s.is_parent?(a(),n("span",Kt,"Â· "+i(s.parent_nom),1)):x("",!0)]),s.is_parent&&((de=s.enfants_inclus)==null?void 0:de.length)>0?(a(),n("p",es," Inclut : "+i(s.enfants_inclus.join(", ")),1)):x("",!0)]),e("button",{type:"button",class:E(["shrink-0 rounded-lg px-2.5 py-1.5 text-xs font-medium transition-colors",O(s.id)?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white"]),disabled:O(s.id),onClick:cr=>ke(s)},[e("em",{class:E(["ni text-xs",O(s.id)?"ni-check":"ni-plus"])},null,2)],10,ts)])}),128))])):x("",!0)]),e("div",ss,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-100 px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-200 sm:w-auto dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",onClick:t[17]||(t[17]=s=>w("clinique"))},[...t[82]||(t[82]=[e("em",{class:"ni ni-arrow-left"},null,-1),r(" Retour clinique ",-1)])]),e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700 sm:w-auto",onClick:t[18]||(t[18]=s=>w("prelevements"))},[...t[83]||(t[83]=[r(" Continuer vers prelevements ",-1),e("em",{class:"ni ni-arrow-right"},null,-1)])])])]),e("div",ls,[e("div",rs,[t[85]||(t[85]=e("h3",{class:"mb-3 text-sm font-semibold text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-bag mr-1.5 text-xs"}),r("Analyses selectionnees ")],-1)),g.value.length===0?(a(),n("div",as," Aucune analyse selectionnee ")):(a(),n("div",ns,[(a(!0),n(q,null,A(g.value,s=>(a(),n("div",{key:s.id,class:"flex items-start justify-between"},[e("div",is,[e("div",os,[e("span",ds,i(s.code),1),e("div",us,i(s.designation),1)]),e("div",xs,i(s.parent_nom||(s.parent,"Analyse individuelle")),1),s.is_parent?(a(),n("span",cs," Panel complet ")):x("",!0)]),e("div",ps,[e("div",ms,i((s.prix_effectif||s.prix)>0?k(s.prix_effectif||s.prix):"Inclus"),1),e("button",{type:"button",class:"text-xxs text-red-500 transition-colors hover:text-red-600",onClick:N=>ye(s.id)},[...t[84]||(t[84]=[e("em",{class:"ni ni-cross text-xs"},null,-1)])],8,bs)])]))),128))]))]),e("div",gs,[e("div",fs,[t[86]||(t[86]=e("span",{class:"font-medium text-green-800 dark:text-green-200"},"Sous-total analyses",-1)),e("span",vs,i(k(z.value)),1)])])])])])):x("",!0),f.value==="prelevements"?(a(),n("section",ks,[e("div",ys,[e("div",hs,[t[89]||(t[89]=e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-yellow-500 shadow-sm"},[e("em",{class:"ni ni-package text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},"Prelevements"),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Selection optionnelle des prelevements requis.")])],-1)),e("div",ws,[v.value.length>0?(a(),n("span",_s,[t[87]||(t[87]=e("em",{class:"ni ni-check-circle"},null,-1)),r(" "+i(v.value.length)+" selectionnes ",1)])):x("",!0),t[88]||(t[88]=e("span",{class:"hidden items-center gap-2 text-xs text-slate-500 sm:inline-flex dark:text-slate-400"}," Etape 4/7 ",-1))])])]),e("div",js,[e("div",Cs,[e("div",Rs,[t[92]||(t[92]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-search mr-1.5 text-yellow-600 dark:text-yellow-300"}),r(" Rechercher un prelevement ")],-1)),e("div",Ns,[t[91]||(t[91]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-search text-base text-slate-400 dark:text-slate-500"})],-1)),m(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>$.value=s),type:"text",placeholder:"Tapez le nom du prelevement...",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 placeholder-slate-400 transition focus:border-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500",onInput:ve},null,544),[[h,$.value]]),$.value?(a(),n("button",{key:0,type:"button",class:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 transition hover:text-red-500 dark:hover:text-red-400",onClick:t[20]||(t[20]=s=>{$.value="",I.value=[]})},[...t[90]||(t[90]=[e("em",{class:"ni ni-cross-circle text-lg"},null,-1)])])):x("",!0)])]),I.value.length>0?(a(),n("div",Es,[(a(!0),n(q,null,A(I.value,s=>(a(),n("div",{key:s.id,class:E(["flex items-start justify-between rounded-xl border border-slate-200 p-2.5 transition-colors hover:border-yellow-300 hover:bg-yellow-50/50 dark:border-slate-700 dark:hover:border-yellow-500 dark:hover:bg-slate-700/40",F(s.id)?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300 dark:border-yellow-600":""])},[e("div",qs,[t[94]||(t[94]=e("div",{class:"flex h-6 w-6 shrink-0 items-center justify-center rounded-lg bg-gradient-to-br from-yellow-500 to-orange-600 text-white"},[e("em",{class:"ni ni-flask text-xs"})],-1)),e("div",As,[e("p",Us,i(s.denomination),1),e("div",Ts,[e("span",Ms,[t[93]||(t[93]=e("em",{class:"ni ni-money mr-0.5 text-xs"},null,-1)),r(" "+i(k(s.prix)),1)]),F(s.id)?(a(),n("span",Ps,"âœ“ AjoutÃ©")):x("",!0)])])]),e("button",{type:"button",class:E(["ml-2 shrink-0 rounded-lg px-2.5 py-1.5 text-xs font-medium transition-colors",F(s.id)?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 cursor-not-allowed":"bg-yellow-500 hover:bg-yellow-600 text-white"]),disabled:F(s.id),onClick:N=>he(s)},[e("em",{class:E(["ni text-xs",F(s.id)?"ni-check":"ni-plus"])},null,2)],10,Ss)],2))),128))])):x("",!0),e("div",$s,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-100 px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-200 sm:w-auto dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",onClick:t[21]||(t[21]=s=>w("analyses"))},[...t[95]||(t[95]=[e("em",{class:"ni ni-arrow-left"},null,-1),r(" Retour analyses ",-1)])]),e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700 sm:w-auto",onClick:t[22]||(t[22]=s=>w("paiement"))},[...t[96]||(t[96]=[r(" Continuer vers paiement ",-1),e("em",{class:"ni ni-arrow-right"},null,-1)])])])]),e("div",Is,[t[100]||(t[100]=e("h3",{class:"mb-3 text-sm font-semibold text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-package mr-1.5 text-xs text-yellow-500"}),r("Prelevements selectionnes ")],-1)),v.value.length===0?(a(),n("div",Vs," Aucun prelevement selectionne ")):(a(),n("div",Fs,[(a(!0),n(q,null,A(v.value,s=>(a(),n("div",{key:s.id,class:"rounded-xl border border-yellow-200 bg-white p-3 dark:border-yellow-700 dark:bg-slate-800"},[e("div",Ls,[e("div",null,[e("p",zs,i(s.denomination),1),e("p",Ds,i(k(s.prix)),1)]),e("button",{type:"button",class:"text-xs text-red-600 hover:text-red-700",onClick:N=>we(s.id)},[...t[97]||(t[97]=[e("em",{class:"ni ni-cross"},null,-1)])],8,Os)]),e("div",Js,[t[98]||(t[98]=e("label",{class:"text-xxs text-slate-600 dark:text-slate-400"},"Quantite",-1)),m(e("input",{"onUpdate:modelValue":N=>s.quantite=N,type:"number",min:"1",max:"10",class:"w-16 rounded-lg border border-slate-300 bg-white px-2 py-1 text-center text-xs text-slate-900 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"},null,8,Xs),[[h,s.quantite,void 0,{number:!0}]])])]))),128))])),e("div",Bs,[e("div",Gs,[t[99]||(t[99]=e("span",{class:"font-medium text-slate-800 dark:text-slate-100"},"Total prelevements",-1)),e("span",Hs,i(k(D.value)),1)])])])])])):x("",!0),f.value==="paiement"?(a(),n("section",Ws,[e("div",Qs,[e("div",Ys,[t[102]||(t[102]=e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-red-500 shadow-sm"},[e("em",{class:"ni ni-coin text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},"Paiement & Facturation"),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Finalisation de la prescription.")])],-1)),e("div",Zs,[e("div",Ks,i(k(Q.value)),1),t[101]||(t[101]=e("div",{class:"text-xs text-slate-500 dark:text-slate-400"},"Total a payer",-1))])])]),e("div",el,[e("div",tl,[e("div",sl,[t[108]||(t[108]=e("h3",{class:"mb-3 text-sm font-semibold text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-calculator mr-1.5 text-xs text-green-500"}),r("Resume financier ")],-1)),e("div",ll,[e("div",rl,[t[103]||(t[103]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Sous-total analyses",-1)),e("span",al,i(k(z.value)),1)]),e("div",nl,[t[104]||(t[104]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Sous-total prelevements",-1)),e("span",il,i(k(D.value)),1)]),e("div",ol,[t[105]||(t[105]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Frais urgence",-1)),e("span",dl,i(k(ee.value)),1)]),e("div",ul,[t[106]||(t[106]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Remise",-1)),e("span",xl,"- "+i(k(te.value)),1)]),e("div",cl,[e("div",pl,[t[107]||(t[107]=e("span",{class:"text-sm font-semibold text-red-800 dark:text-red-200"},"Total final",-1)),e("span",ml,i(k(Q.value)),1)])])])])]),e("div",bl,[e("div",gl,[t[112]||(t[112]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-wallet mr-1.5 text-red-600 dark:text-red-300"}),r(" Mode de paiement ")],-1)),e("div",fl,[t[110]||(t[110]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-wallet text-base text-slate-400 dark:text-slate-500"})],-1)),m(e("select",{"onUpdate:modelValue":t[23]||(t[23]=s=>_.value.payment_method=s),class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 transition hover:border-slate-300 focus:border-red-500 focus:outline-none focus:ring-4 focus:ring-red-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:hover:border-slate-500"},[t[109]||(t[109]=e("option",{value:""},"Selectionner...",-1)),(a(!0),n(q,null,A(b.paymentMethods,s=>(a(),n("option",{key:s.code,value:s.code},i(s.label),9,vl))),128))],512),[[X,_.value.payment_method]]),t[111]||(t[111]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("em",{class:"ni ni-chevron-down text-xs text-slate-400 dark:text-slate-500"})],-1))])]),e("div",kl,[t[115]||(t[115]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-percent mr-1.5 text-orange-600 dark:text-orange-300"}),r(" Remise (%) ")],-1)),e("div",yl,[t[113]||(t[113]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-percent text-base text-slate-400 dark:text-slate-500"})],-1)),m(e("input",{"onUpdate:modelValue":t[24]||(t[24]=s=>_.value.remise=s),type:"number",min:"0",max:"100",placeholder:"0",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-12 text-sm text-slate-900 placeholder-slate-400 transition focus:border-red-500 focus:outline-none focus:ring-4 focus:ring-red-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[h,_.value.remise,void 0,{number:!0}]]),t[114]||(t[114]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("span",{class:"text-xs font-semibold text-slate-500 dark:text-slate-400"},"%")],-1))])]),e("label",{class:E(["flex w-full cursor-pointer items-center gap-3 rounded-xl border-2 border-slate-200 bg-white p-4 transition hover:border-slate-300 hover:shadow-sm dark:border-slate-600 dark:bg-slate-800 dark:hover:border-slate-500",_.value.paiement_statut?"border-emerald-500 bg-emerald-50 dark:border-emerald-600 dark:bg-emerald-900/15":""])},[m(e("input",{"onUpdate:modelValue":t[25]||(t[25]=s=>_.value.paiement_statut=s),type:"checkbox",class:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500 dark:border-slate-600"},null,512),[[Ee,_.value.paiement_statut]]),t[116]||(t[116]=e("div",null,[e("span",{class:"text-sm font-semibold text-slate-800 dark:text-slate-200"},"Marquer comme paye"),e("p",{class:"mt-0.5 text-xs text-slate-500 dark:text-slate-400"},"La date de paiement sera enregistree automatiquement.")],-1))],2)])]),e("div",hl,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-100 px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-200 sm:w-auto dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",onClick:t[26]||(t[26]=s=>w("prelevements"))},[...t[117]||(t[117]=[e("em",{class:"ni ni-arrow-left"},null,-1),r(" Retour prelevements ",-1)])]),e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-emerald-700 disabled:opacity-50 sm:w-auto",disabled:B.value,onClick:_e},[B.value?(a(),n("span",_l,"Enregistrement...")):(a(),n("span",jl,[...t[118]||(t[118]=[e("em",{class:"ni ni-check-circle"},null,-1),r(" Terminer et enregistrer",-1)])]))],8,wl)])])):x("",!0),f.value==="tubes"?(a(),n("section",Cl,[t[121]||(t[121]=e("div",{class:"bg-gradient-to-r from-teal-50 to-emerald-50 px-4 py-3 dark:from-slate-700 dark:to-slate-800"},[e("div",{class:"flex items-center"},[e("div",{class:"flex h-8 w-8 items-center justify-center rounded-lg bg-teal-500"},[e("em",{class:"ni ni-scan text-sm text-white"})]),e("div",{class:"ml-3"},[e("h2",{class:"text-base font-semibold text-slate-800 dark:text-slate-100"},"Etiquettes et Tubes"),e("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Preparation des prelevements")])])],-1)),e("div",Rl,[e("p",Nl," Imprimez les codes-barres des "+i(((P=(j=b.prescription)==null?void 0:j.tubes)==null?void 0:P.length)||0)+" tubes generes pour cette prescription. ",1),e("div",El,[(a(!0),n(q,null,A((U=b.prescription)==null?void 0:U.tubes,s=>(a(),n("div",{key:s.id,class:"flex flex-col items-center justify-center space-y-2 rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800/50"},[t[119]||(t[119]=e("em",{class:"ni ni-barcode text-4xl text-slate-400"},null,-1)),e("div",ql,i(s.code_barre),1)]))),128))]),e("div",Al,[e("button",{type:"button",class:"rounded-lg bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-primary-700",onClick:t[27]||(t[27]=s=>w("confirmation"))},[...t[120]||(t[120]=[r(" Suivant ",-1),e("em",{class:"ni ni-arrow-right ml-1"},null,-1)])])])])])):x("",!0),f.value==="confirmation"?(a(),n("section",Ul,[e("div",Tl,[t[123]||(t[123]=e("div",{class:"mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-orange-50 dark:bg-orange-900/20"},[e("em",{class:"ni ni-edit text-xl text-orange-500 dark:text-orange-400"})],-1)),t[124]||(t[124]=e("h2",{class:"mb-2 text-lg font-semibold text-orange-900 dark:text-orange-100"}," Prescription modifiee avec succes ! ",-1)),t[125]||(t[125]=e("p",{class:"text-sm text-slate-600 dark:text-slate-300"}," Les modifications ont ete sauvegardees. ",-1)),(p=b.prescription)!=null&&p.reference?(a(),n("div",Ml,[t[122]||(t[122]=e("em",{class:"ni ni-tag mr-1 text-xs text-slate-500"},null,-1)),e("span",Pl,i(b.prescription.reference),1)])):x("",!0)]),e("div",Sl,[e("div",$l,[e("h3",Il," Reference: "+i(((L=b.prescription)==null?void 0:L.reference)||"â€”"),1),e("p",Vl,i(W.value),1)]),e("div",Fl,[e("div",Ll,[t[126]||(t[126]=e("span",{class:"font-medium text-slate-700 dark:text-slate-300"},"Patient:",-1)),e("span",zl,[r(i(c.value.nom)+" "+i(c.value.prenom)+" ",1),d.value.age?(a(),n("span",Dl," ("+i(d.value.age)+" "+i(d.value.unite_age)+")",1)):x("",!0)])]),d.value.prescripteur_id?(a(),n("div",Ol,[t[127]||(t[127]=e("span",{class:"font-medium text-slate-700 dark:text-slate-300"},"Prescripteur:",-1)),e("span",Jl,i(l.prescripteurName),1)])):x("",!0),e("div",Xl,[t[128]||(t[128]=e("span",{class:"font-medium text-slate-700 dark:text-slate-300"},"Analyses:",-1)),e("span",Bl,i(g.value.length),1)]),v.value.length>0?(a(),n("div",Gl,[t[129]||(t[129]=e("span",{class:"font-medium text-slate-700 dark:text-slate-300"},"Prelevements:",-1)),e("span",Hl,i(v.value.length),1)])):x("",!0),((ae=(re=b.prescription)==null?void 0:re.tubes)==null?void 0:ae.length)>0?(a(),n("div",Wl,[t[130]||(t[130]=e("span",{class:"font-medium text-slate-700 dark:text-slate-300"},"Tubes:",-1)),e("span",Ql,i(b.prescription.tubes.length),1)])):x("",!0),e("div",Yl,[e("div",Zl,[t[131]||(t[131]=e("span",{class:"text-slate-800 dark:text-slate-200"},"MONTANT TOTAL:",-1)),e("span",Kl,i(k(Q.value)),1)])])]),e("div",er,[(ne=b.prescription)!=null&&ne.id?(a(),n("a",{key:0,href:l.route("secretaire.prescription.facture",b.prescription.id),target:"_blank",class:"flex w-full items-center justify-center rounded-lg bg-blue-500 px-4 py-3 text-sm font-medium text-white transition-all hover:bg-blue-600 hover:shadow-md"},[...t[132]||(t[132]=[e("em",{class:"ni ni-file-docs mr-2 text-base"},null,-1),r(" Voir Facture ",-1)])],8,tr)):(a(),n("div",sr,[...t[133]||(t[133]=[e("em",{class:"ni ni-file-docs mr-2 text-base"},null,-1),r(" Facture non disponible ",-1)])])),e("div",lr,[Y(Z(K),{href:l.route("secretaire.prescription.create"),class:"flex items-center justify-center rounded-lg bg-primary-500 px-3 py-2 text-sm text-white transition-colors hover:bg-primary-600"},{default:J(()=>[...t[134]||(t[134]=[e("em",{class:"ni ni-plus mr-1 text-xs"},null,-1),r(" Nouvelle ",-1)])]),_:1},8,["href"]),(ie=b.prescription)!=null&&ie.id?(a(),n("a",{key:0,href:l.route("secretaire.prescription.facture",b.prescription.id)+"?print=1",target:"_blank",class:"flex items-center justify-center rounded-xl bg-slate-100 px-3 py-2 text-sm text-slate-700 transition-colors hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},[...t[135]||(t[135]=[e("em",{class:"ni ni-printer mr-1 text-xs"},null,-1),r(" Imprimer ",-1)])],8,rr)):(a(),n("div",ar,[...t[136]||(t[136]=[e("em",{class:"ni ni-printer mr-1 text-xs"},null,-1),r(" Imprimer ",-1)])])),Y(Z(K),{href:l.route("secretaire.prescription.index"),class:"flex items-center justify-center rounded-xl bg-slate-100 px-3 py-2 text-sm text-slate-700 transition-colors hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},{default:J(()=>[...t[137]||(t[137]=[e("em",{class:"ni ni-list mr-1 text-xs"},null,-1),r(" Liste ",-1)])]),_:1},8,["href"])]),e("div",nr,[e("button",{type:"button",class:"flex w-full items-center justify-center gap-2 text-xs text-slate-500 transition-colors hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300",onClick:t[28]||(t[28]=s=>w("tubes"))},[...t[138]||(t[138]=[e("em",{class:"ni ni-arrow-left text-xs"},null,-1),r(" Retour aux etiquettes ",-1)])])])]),e("div",ir,[e("div",or,[e("span",dr,[t[139]||(t[139]=e("em",{class:"ni ni-clock mr-1 text-xs"},null,-1)),r(" "+i(W.value),1)]),t[140]||(t[140]=e("span",{class:"rounded-full bg-orange-100 px-2 py-0.5 text-xxs font-medium text-orange-700 dark:bg-orange-900/30 dark:text-orange-300"}," Modifie ",-1))]),(oe=b.prescription)!=null&&oe.reference?(a(),n("div",ur,[t[141]||(t[141]=e("em",{class:"ni ni-tag mr-1 text-xs"},null,-1)),t[142]||(t[142]=r(" Reference: ",-1)),e("code",xr,i(b.prescription.reference),1)])):x("",!0)])])])):x("",!0)])]}),_:1}))}};export{vr as default};
