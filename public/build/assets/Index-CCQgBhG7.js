import{K as U,z as M,d as E,e,c as a,l as i,t as n,n as c,q as g,g as k,E as q,f as P,b as z,j as oe,o as l,s as O,F as C,p as ae,a as he,T as ne,i as ie,J as de,x as S}from"./app-Bg1XaAxF.js";import{d as ve}from"./debounce-BjP9TRjn.js";import{_ as ge}from"./AppLayout-Ddcz_BTQ.js";import{_ as ye}from"./Pagination-DHKkYGMy.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const we={class:"container mx-auto px-4 py-8 sm:px-6 lg:px-8"},Ce={class:"mb-6 grid grid-cols-2 gap-3 sm:grid-cols-3 lg:grid-cols-5"},_e={class:"relative overflow-hidden rounded-xl border border-slate-200 bg-white p-3 transition-all hover:shadow-md dark:border-slate-700 dark:bg-slate-800"},je={class:"flex flex-col items-center gap-1 text-center"},Me={class:"mt-1 text-xl font-bold leading-none text-slate-900 dark:text-white"},Ae={class:"relative overflow-hidden rounded-xl border border-slate-200 bg-white p-3 transition-all hover:shadow-md dark:border-slate-700 dark:bg-slate-800"},Ne={class:"flex flex-col items-center gap-1 text-center"},Le={class:"mt-1 text-xl font-bold leading-none text-slate-900 dark:text-white"},Be={class:"flex flex-col items-center gap-1 text-center"},ze={class:"mt-1 text-xl font-bold leading-none text-slate-900 dark:text-white"},Ve={class:"flex flex-col items-center gap-1 text-center"},$e={class:"mt-1 text-xl font-bold leading-none text-slate-900 dark:text-white"},Ee={class:"relative col-span-2 overflow-hidden rounded-xl border border-slate-200 bg-white p-3 transition-all hover:shadow-md sm:col-span-1 dark:border-slate-700 dark:bg-slate-800"},Pe={class:"flex flex-col items-center gap-1 text-center"},Se={class:"text-xl font-bold leading-none text-slate-900 dark:text-white"},Te={class:"mb-6 grid grid-cols-1 gap-3 md:grid-cols-3"},He={class:"rounded-xl border border-slate-200 bg-white p-4 dark:border-slate-700 dark:bg-slate-800"},De={class:"flex items-center justify-between mb-2"},Fe={class:"text-xs font-bold text-slate-900 dark:text-white"},Re={class:"h-1.5 overflow-hidden rounded-full bg-slate-100 dark:bg-slate-700"},Ie={class:"rounded-xl border border-slate-200 bg-white p-4 dark:border-slate-700 dark:bg-slate-800"},Ue={class:"flex items-center justify-between mb-2"},qe={class:"text-xs font-bold text-slate-900 dark:text-white"},Oe={class:"h-1.5 overflow-hidden rounded-full bg-slate-100 dark:bg-slate-700"},Je={class:"rounded-xl border border-slate-200 bg-white p-4 dark:border-slate-700 dark:bg-slate-800"},Ke={class:"flex items-center justify-between mb-2"},Ge={class:"text-xs font-bold text-slate-900 dark:text-white"},Qe={class:"h-1.5 overflow-hidden rounded-full bg-slate-100 dark:bg-slate-700"},We={class:"mb-6 rounded-xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-800"},Xe={class:"flex flex-col items-center gap-3 p-4 md:flex-row"},Ye={class:"relative w-full flex-1"},Ze={class:"flex w-full items-center gap-1.5 rounded-lg bg-slate-100 p-1 md:w-auto dark:bg-slate-700/50"},et={class:"border-t border-slate-100 dark:border-slate-700/50"},tt={class:"flex px-4","aria-label":"Tabs"},st={class:"flex items-center gap-2"},rt={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 rounded-full bg-primary-600 dark:bg-primary-400"},lt={class:"flex items-center gap-2"},ot={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 rounded-full bg-primary-600 dark:bg-primary-400"},at={class:"flex items-center gap-2"},nt={key:0,class:"inline-flex h-5 min-w-[20px] items-center justify-center rounded-full bg-red-100 px-1.5 text-xs font-semibold text-red-700 dark:bg-red-900/30 dark:text-red-300"},it={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 rounded-full bg-primary-600 dark:bg-primary-400"},dt={key:0,class:"mb-4 flex flex-wrap items-center gap-2"},ct={key:0,class:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-2.5 py-1 text-xs text-slate-700 dark:bg-slate-700 dark:text-slate-300"},ut={class:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-800"},mt={class:"hidden overflow-x-auto lg:block"},xt={class:"w-full"},bt={class:"divide-y divide-slate-50 dark:divide-slate-700/50"},pt={class:"px-4 py-3.5"},kt={class:"text-sm font-semibold text-slate-900 dark:text-white"},ft={class:"px-4 py-3.5"},ht={class:"flex items-center gap-2.5"},vt={class:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-primary-400 to-primary-600"},gt={class:"text-xs font-semibold text-white"},yt={class:"min-w-0"},wt={class:"max-w-[150px] truncate text-sm font-medium text-slate-900 dark:text-white"},Ct={class:"text-xs text-slate-400 dark:text-slate-500"},_t={class:"px-4 py-3.5"},jt={class:"text-sm text-slate-600 dark:text-slate-300"},Mt={class:"px-4 py-3.5 text-center"},At={class:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-blue-50 text-xs font-semibold text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"},Nt={class:"px-4 py-3.5"},Lt={class:"px-4 py-3.5"},Bt={key:0,class:"flex items-center gap-2.5"},zt=["onClick"],Vt={key:0,class:"text-[11px] text-slate-400"},$t={key:1,class:"text-xs italic text-slate-400 dark:text-slate-500"},Et={class:"px-4 py-3.5"},Pt={class:"text-sm text-slate-600 dark:text-slate-300"},St={class:"text-[11px] text-slate-400"},Tt={class:"px-4 py-3.5"},Ht={class:"flex items-center justify-end gap-1 opacity-0 transition-opacity group-hover:opacity-100"},Dt=["onClick"],Ft=["href"],Rt=["title","onClick"],It=["fill"],Ut=["onClick"],qt=["onClick"],Ot=["onClick"],Jt={key:0},Kt={colspan:"8",class:"py-16 text-center"},Gt={class:"flex flex-col items-center"},Qt={key:0,class:"mt-1 text-xs text-slate-400 dark:text-slate-500"},Wt={class:"divide-y divide-slate-100 dark:divide-slate-700/50 lg:hidden"},Xt={class:"flex items-center justify-between"},Yt={class:"text-sm font-bold text-slate-900 dark:text-white"},Zt={class:"flex items-center gap-3"},es={class:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-primary-400 to-primary-600"},ts={class:"text-[11px] font-semibold text-white"},ss={class:"min-w-0 flex-1"},rs={class:"truncate text-sm font-medium text-slate-900 dark:text-white"},ls={class:"text-xs text-slate-400"},os={class:"flex items-center justify-between pt-1"},as={class:"flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400"},ns={class:"flex items-center gap-1"},is=["onClick"],ds=["href"],cs=["title","onClick"],us=["fill"],ms=["onClick"],xs=["onClick"],bs=["onClick"],ps={key:0,class:"py-12 text-center"},ks={key:0,class:"border-t border-slate-100 bg-slate-50/50 px-4 py-3 dark:border-slate-700/50 dark:bg-slate-800/50"},fs={class:"flex flex-col items-center justify-between gap-3 sm:flex-row"},hs={class:"text-xs text-slate-500 dark:text-slate-400"},vs={class:"font-medium"},gs={class:"font-medium"},ys={class:"font-medium"},ws={key:0,class:"fixed inset-0 z-[60] overflow-y-auto"},Cs={class:"flex min-h-full items-center justify-center p-4"},_s={class:"p-6 text-center"},js={class:"mb-1 text-lg font-semibold text-slate-900 dark:text-white"},Ms={class:"text-sm text-slate-500 dark:text-slate-400"},As={class:"flex gap-3 px-6 pb-6"},Ns=["disabled"],Ls={key:0,class:"fixed inset-0 z-[60] overflow-y-auto"},Bs={class:"flex min-h-full items-end sm:items-center justify-center p-0 sm:p-4"},zs={class:"p-5 sm:p-6"},Vs={class:"flex items-start gap-3 mb-5"},$s={class:"min-w-0"},Es={class:"text-sm text-slate-500 dark:text-slate-400 mt-0.5"},Ps={key:0,class:"text-center py-6"},Ss={class:"mb-4"},Ts={key:0,class:"absolute top-2 right-2"},Hs={key:0,class:"absolute top-2 right-2"},Ds={class:"mb-4"},Fs={class:"flex items-center justify-between mb-2"},Rs=["rows","maxlength"],Is={key:0,class:"mb-4 flex items-center gap-2 rounded-lg bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 px-3 py-2"},Us={class:"text-xs text-amber-700 dark:text-amber-300"},qs=["disabled"],Os={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},Zs={__name:"Index",props:{prescriptions:{type:Object,required:!0},filters:{type:Object,default:()=>({})},counts:{type:Object,default:()=>({})},permissions:{type:Object,default:()=>({})}},setup(u){const m=u,d=U({search:m.filters.search||"",tab:m.filters.tab||"actives",perPage:m.filters.perPage||10,payment:m.filters.payment||""}),p=g(()=>({canCreate:m.permissions.canCreate??!1,canEdit:m.permissions.canEdit??!1,canDelete:m.permissions.canDelete??!1,canAccessTrash:m.permissions.canAccessTrash??!1,canAccessArchive:m.permissions.canAccessArchive??!1,canViewPrescription:m.permissions.canViewPrescription??!1})),ce=g(()=>p.value.canCreate),ue=g(()=>p.value.canAccessTrash),b=U({show:!1,type:"",prescriptionId:null,processing:!1}),w=(r,t)=>{r!=="notify"&&(b.type=r,b.prescriptionId=t,b.show=!0,b.processing=!1)},T=()=>{b.show=!1,b.type="",b.prescriptionId=null,b.processing=!1},f=g(()=>({delete:{title:"Mettre en corbeille ?",desc:"Cette action peut etre annulee depuis la corbeille.",color:"red",btn:"Supprimer",routeName:"secretaire.prescription.destroy",method:"delete"},restore:{title:"Restaurer cette prescription ?",desc:"Elle sera remise dans la liste active.",color:"amber",btn:"Restaurer",routeName:"secretaire.prescription.restore",method:"post"},permanentDelete:{title:"Supprimer definitivement ?",desc:"Cette action est irreversible.",color:"red",btn:"Supprimer",routeName:"secretaire.prescription.forceDelete",method:"delete"},archive:{title:"Archiver cette prescription ?",desc:"Elle sera deplacee vers les archives.",color:"slate",btn:"Archiver",routeName:"secretaire.prescription.archive",method:"post"},unarchive:{title:"Desarchiver cette prescription ?",desc:"Elle sera remise dans les prescriptions validees.",color:"amber",btn:"Desarchiver",routeName:"secretaire.prescription.unarchive",method:"post"},pay:{title:"Confirmer le paiement",desc:"Marquer comme paye ? La date sera enregistree automatiquement.",color:"emerald",btn:"Confirmer",routeName:"secretaire.prescription.togglePayment",method:"post"},unpay:{title:"Annuler le paiement",desc:"Marquer comme non paye ? La date de paiement sera supprimee.",color:"red",btn:"Confirmer",routeName:"secretaire.prescription.togglePayment",method:"post"}})[b.type]||{}),me=()=>{if(!b.prescriptionId||b.processing)return;b.processing=!0;const r=f.value,t=route(r.routeName,b.prescriptionId),x={preserveScroll:!0,onSuccess:()=>T(),onError:()=>{b.processing=!1},onFinish:()=>{b.processing=!1}};r.method==="delete"?S.delete(t,x):S[r.method](t,{},x)},J=r=>r!=null&&r.patient?(r.patient.nom_complet||`${r.patient.nom||""} ${r.patient.prenom||""}`).trim().split(/\s+/)[0]||"Patient":"",K=r=>`Bonjour ${J(r)}, vos résultats d'analyses (${r.reference}) sont disponibles au laboratoire. Merci de passer les récupérer. - Lareference`,G=r=>{const t=J(r),x=route("laboratoire.prescription.pdf",r.id);return`Bonjour ${t},

Nous avons le plaisir de vous informer que les résultats de vos analyses (${r.reference}) sont désormais disponibles.

Vous pouvez les consulter et télécharger via le lien suivant :
${x}

Ou passer les récupérer directement au laboratoire.

Cordialement,
Laboratoire Lareference`},o=U({show:!1,prescription:null,channel:"",message:"",processing:!1}),H=g(()=>{var r,t;return!!((t=(r=o.prescription)==null?void 0:r.patient)!=null&&t.telephone)}),D=g(()=>{var r,t;return!!((t=(r=o.prescription)==null?void 0:r.patient)!=null&&t.email)}),V=g(()=>H.value||D.value),Q=r=>{var v,_;o.prescription=r;const t=!!((v=r.patient)!=null&&v.telephone),x=!!((_=r.patient)!=null&&_.email);o.channel=t?"sms":x?"email":"",o.message=t?K(r):x?G(r):"",o.processing=!1,o.show=!0},$=()=>{o.show=!1,o.prescription=null,o.processing=!1},W=()=>{o.prescription&&(o.message=o.channel==="sms"?K(o.prescription):G(o.prescription))},xe=()=>{if(!o.prescription||o.processing||!o.message.trim()||!o.channel)return;o.processing=!0;const r=o.channel==="sms"?"secretaire.prescription.send-sms":"secretaire.prescription.send-email",t={message:o.message};o.channel==="email"&&(t.lien_pdf=route("laboratoire.prescription.pdf",o.prescription.id)),S.post(route(r,o.prescription.id),t,{preserveScroll:!0,onSuccess:()=>$(),onError:()=>{o.processing=!1},onFinish:()=>{o.processing=!1}})},be=r=>{r.paiement&&w(r.paiement.status?"unpay":"pay",r.id)},F=g(()=>Number(m.counts.countActives||m.counts.actives||0)+Number(m.counts.countValide||m.counts.valide||0)+Number(m.counts.countDeleted||m.counts.deleted||0)),X=g(()=>{const r=Number(m.counts.countPaye||0),t=Number(m.counts.countNonPaye||0),x=r+t;return x===0?0:Math.round(r/x*100)}),Y=g(()=>{const r=Number(m.counts.countEnCours||0),t=Number(m.counts.countTermine||0),x=Number(m.counts.countValide||m.counts.valide||0),v=F.value;return v===0?0:Math.round((r+t+x)/v*100)}),Z=g(()=>{const r=Number(m.counts.countTermine||0),t=Number(m.counts.countValide||m.counts.valide||0),x=F.value;return x===0?0:Math.round((r+t)/x*100)}),A=()=>{S.get(route("secretaire.prescription.index"),d,{preserveState:!0,preserveScroll:!0,replace:!0})},ee=ve(()=>A(),300),R=r=>{d.tab=r,A()},j=r=>{d.payment=r,A()},te=()=>{d.search="",A()},pe=()=>{d.search="",d.payment="",A()},I=r=>d.tab===r?"text-primary-600 dark:text-primary-400":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300",se=r=>({EN_ATTENTE:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300",EN_COURS:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",TERMINE:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",VALIDE:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300",ARCHIVE:"bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300"})[r]||"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",re=r=>{var x,v,_;const t=String(((x=r.patient)==null?void 0:x.nom_complet)||"NA").trim().split(/\s+/).filter(Boolean);return`${((v=t[0])==null?void 0:v.charAt(0))||"N"}${((_=t[1])==null?void 0:_.charAt(0))||"A"}`.toUpperCase()},ke=(r,t)=>{const x=String(r);return x.length<=t?x:`${x.slice(0,t)}...`},h=r=>Number(r||0).toLocaleString("fr-FR"),fe=r=>({red:"bg-red-600 hover:bg-red-700",amber:"bg-amber-600 hover:bg-amber-700",slate:"bg-slate-600 hover:bg-slate-700",emerald:"bg-emerald-600 hover:bg-emerald-700"})[r]||"bg-primary-600 hover:bg-primary-700";return(r,t)=>(l(),M(ge,null,{default:E(()=>{var x,v,_,le;return[e("div",we,[t[62]||(t[62]=e("div",{class:"mb-6 flex items-center gap-3"},[e("div",{class:"flex h-8 w-8 items-center justify-center rounded bg-primary-900/40 text-primary-400"},[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})])]),e("h1",{class:"text-xl font-bold text-slate-900 dark:text-white"},"Liste des prescriptions")],-1)),e("div",Ce,[e("div",_e,[e("div",je,[t[16]||(t[16]=e("div",{class:"flex h-8 w-8 flex-shrink-0 items-center justify-center text-primary-500"},[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 12h4.5m2.5 0h8.5M8 12l2-4 2.5 8 2-4"})])],-1)),e("p",Me,n(h(u.counts.countActives||u.counts.actives)),1),t[17]||(t[17]=e("p",{class:"text-[11px] font-medium text-slate-500 dark:text-slate-400"},"En Traitement",-1))])]),e("div",Ae,[e("div",Ne,[t[18]||(t[18]=e("div",{class:"flex h-8 w-8 flex-shrink-0 items-center justify-center text-emerald-500"},[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("p",Le,n(h(u.counts.countValide||u.counts.valide)),1),t[19]||(t[19]=e("p",{class:"text-[11px] font-medium text-slate-500 dark:text-slate-400"},"Validees",-1))])]),e("div",{class:c(["relative overflow-hidden rounded-xl bg-white p-3 transition-all hover:shadow-md dark:bg-slate-800",d.payment==="paye"?"border-emerald-400 ring-1 ring-emerald-400/50 dark:border-emerald-500":"border border-slate-200 dark:border-slate-700"])},[e("div",Be,[t[20]||(t[20]=e("div",{class:"flex h-8 w-8 flex-shrink-0 items-center justify-center text-emerald-500"},[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("p",ze,n(h(u.counts.countPaye)),1),t[21]||(t[21]=e("p",{class:"text-[11px] font-medium text-slate-500 dark:text-slate-400"},"Payees",-1))]),e("button",{onClick:t[0]||(t[0]=s=>j("paye")),type:"button",class:"absolute inset-0 cursor-pointer focus:outline-none focus:ring-2 focus:ring-emerald-500/50",title:"Filtrer les payees"})],2),e("div",{class:c(["relative overflow-hidden rounded-xl bg-white p-3 transition-all hover:shadow-md dark:bg-slate-800",d.payment==="non_paye"?"border-red-400 ring-1 ring-red-400/50 dark:border-red-500":"border border-slate-200 dark:border-slate-700"])},[e("div",Ve,[t[22]||(t[22]=e("div",{class:"flex h-8 w-8 flex-shrink-0 items-center justify-center text-red-500"},[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2.25m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("p",$e,n(h(u.counts.countNonPaye)),1),t[23]||(t[23]=e("p",{class:"text-[11px] font-medium text-slate-500 dark:text-slate-400"},"Non Payees",-1))]),e("button",{onClick:t[1]||(t[1]=s=>j("non_paye")),type:"button",class:"absolute inset-0 cursor-pointer focus:outline-none focus:ring-2 focus:ring-red-500/50",title:"Filtrer les non payees"})],2),e("div",Ee,[e("div",Pe,[t[24]||(t[24]=e("div",{class:"flex h-8 w-8 flex-shrink-0 items-center justify-center"},null,-1)),e("p",Se,n(h(F.value)),1),t[25]||(t[25]=e("p",{class:"text-[11px] font-medium text-slate-500 dark:text-slate-400"},"Total",-1))])])]),e("div",Te,[e("div",He,[e("div",De,[t[26]||(t[26]=e("span",{class:"flex items-center gap-1.5 text-xs font-semibold text-emerald-500"},[e("span",{class:"h-2 w-2 rounded-full bg-emerald-500"}),k(" Taux de paiement ")],-1)),e("span",Fe,n(X.value)+"%",1)]),e("div",Re,[e("div",{class:"h-full rounded-full bg-emerald-500 transition-all duration-500",style:q({width:`${X.value}%`})},null,4)])]),e("div",Ie,[e("div",Ue,[t[27]||(t[27]=e("span",{class:"flex items-center gap-1.5 text-xs font-semibold text-blue-500"},[e("span",{class:"h-2 w-2 rounded-full bg-blue-500"}),k(" Progression ")],-1)),e("span",qe,n(Y.value)+"%",1)]),e("div",Oe,[e("div",{class:"h-full rounded-full bg-blue-500 transition-all duration-500",style:q({width:`${Y.value}%`})},null,4)])]),e("div",Je,[e("div",Ke,[t[28]||(t[28]=e("span",{class:"flex items-center gap-1.5 text-xs font-semibold text-primary-500"},[e("span",{class:"h-2 w-2 rounded-full bg-primary-500"}),k(" Efficacite ")],-1)),e("span",Ge,n(Z.value)+"%",1)]),e("div",Qe,[e("div",{class:"h-full rounded-full bg-primary-500 transition-all duration-500",style:q({width:`${Z.value}%`})},null,4)]),t[29]||(t[29]=e("div",{class:"mt-1.5 text-[10px] text-slate-400"},"Analyses completees",-1))])]),e("div",We,[e("div",Xe,[e("div",Ye,[t[31]||(t[31]=e("svg",{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1)),P(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>d.search=s),type:"text",placeholder:"Rechercher...",class:"w-full rounded-lg border border-slate-200 bg-slate-50 py-2.5 pl-10 pr-9 text-sm text-slate-900 placeholder-slate-400 transition-colors focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 dark:border-slate-600 dark:bg-slate-700/50 dark:text-slate-100",onInput:t[3]||(t[3]=(...s)=>z(ee)&&z(ee)(...s))},null,544),[[oe,d.search]]),d.search?(l(),a("button",{key:0,type:"button",class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 transition-colors hover:text-slate-600 dark:hover:text-slate-300",onClick:te},[...t[30]||(t[30]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])):i("",!0)]),e("div",Ze,[e("button",{type:"button",class:c(["flex items-center gap-1.5 rounded-md px-3 py-1.5 text-xs font-medium transition-all",d.payment?"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300":"bg-white text-slate-900 shadow-sm dark:bg-slate-600 dark:text-white"]),onClick:t[4]||(t[4]=s=>j(""))},[...t[32]||(t[32]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"})],-1),k(" Toutes ",-1)])],2),e("button",{type:"button",class:c(["flex items-center gap-1.5 rounded-md px-3 py-1.5 text-xs font-medium transition-all",d.payment==="paye"?"bg-white text-slate-900 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"]),onClick:t[5]||(t[5]=s=>j("paye"))},[t[33]||(t[33]=e("svg",{class:"h-4 w-4 text-emerald-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),k(" Payees ("+n(h(u.counts.countPaye))+") ",1)],2),e("button",{type:"button",class:c(["flex items-center gap-1.5 rounded-md px-3 py-1.5 text-xs font-medium transition-all",d.payment==="non_paye"?"bg-white text-slate-900 shadow-sm dark:bg-slate-600 dark:text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"]),onClick:t[6]||(t[6]=s=>j("non_paye"))},[t[34]||(t[34]=e("svg",{class:"h-4 w-4 text-red-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2.25m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),k(" Non payees ("+n(h(u.counts.countNonPaye))+") ",1)],2)]),ce.value?(l(),M(z(O),{key:0,href:r.route("secretaire.prescription.create"),class:"inline-flex w-full items-center justify-center gap-2 rounded-lg bg-primary-500 px-4 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-600 md:w-auto"},{default:E(()=>[...t[35]||(t[35]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),k(" Nouvelle prescription ",-1)])]),_:1},8,["href"])):i("",!0)]),e("div",et,[e("nav",tt,[e("button",{type:"button",class:c(["relative px-4 py-3 text-sm font-medium transition-colors",I("actives")]),onClick:t[7]||(t[7]=s=>R("actives"))},[e("span",st,[t[36]||(t[36]=k(" Actives ",-1)),e("span",{class:c(["inline-flex h-5 min-w-[20px] items-center justify-center rounded-full px-1.5 text-xs font-semibold",d.tab==="actives"?"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400"])},n(h(u.counts.countActives||u.counts.actives)),3)]),d.tab==="actives"?(l(),a("span",rt)):i("",!0)],2),e("button",{type:"button",class:c(["relative px-4 py-3 text-sm font-medium transition-colors",I("valide")]),onClick:t[8]||(t[8]=s=>R("valide"))},[e("span",lt,[t[37]||(t[37]=k(" Validees ",-1)),e("span",{class:c(["inline-flex h-5 min-w-[20px] items-center justify-center rounded-full px-1.5 text-xs font-semibold",d.tab==="valide"?"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400"])},n(h(u.counts.countValide||u.counts.valide)),3)]),d.tab==="valide"?(l(),a("span",ot)):i("",!0)],2),ue.value?(l(),a("button",{key:0,type:"button",class:c(["relative px-4 py-3 text-sm font-medium transition-colors",I("deleted")]),onClick:t[9]||(t[9]=s=>R("deleted"))},[e("span",at,[t[38]||(t[38]=k(" Corbeille ",-1)),h(u.counts.countDeleted||u.counts.deleted)>0?(l(),a("span",nt,n(h(u.counts.countDeleted||u.counts.deleted)),1)):i("",!0)]),d.tab==="deleted"?(l(),a("span",it)):i("",!0)],2)):i("",!0)])])]),d.search||d.payment?(l(),a("div",dt,[t[41]||(t[41]=e("span",{class:"text-xs text-slate-500 dark:text-slate-400"},"Filtres actifs :",-1)),d.search?(l(),a("span",ct,[k(' "'+n(d.search)+'" ',1),e("button",{type:"button",class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",onClick:te},[...t[39]||(t[39]=[e("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):i("",!0),d.payment?(l(),a("span",{key:1,class:c(["inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs",d.payment==="paye"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"])},[k(n(d.payment==="paye"?"Payees":"Non payees")+" ",1),e("button",{type:"button",class:"opacity-60 hover:opacity-100",onClick:t[10]||(t[10]=s=>j(""))},[...t[40]||(t[40]=[e("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])],2)):i("",!0),e("button",{type:"button",class:"text-xs text-slate-400 underline hover:text-slate-600 dark:hover:text-slate-300",onClick:pe},"Tout effacer")])):i("",!0),e("div",ut,[e("div",mt,[e("table",xt,[t[51]||(t[51]=e("thead",null,[e("tr",{class:"border-b border-slate-100 dark:border-slate-700"},[e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400"},"Reference"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400"},"Patient"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400"},"Prescripteur"),e("th",{class:"px-4 py-3 text-center text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400"},"Analyses"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400"},"Paiement"),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400"},"Date"),e("th",{class:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400"},"Actions")])],-1)),e("tbody",bt,[(l(!0),a(C,null,ae(u.prescriptions.data,s=>{var N,L,B;return l(),a("tr",{key:s.id,class:"group transition-colors hover:bg-slate-50/50 dark:hover:bg-slate-700/20"},[e("td",pt,[e("span",kt,n(s.reference),1)]),e("td",ft,[e("div",ht,[e("div",vt,[e("span",gt,n(re(s)),1)]),e("div",yt,[e("p",wt,n(((N=s.patient)==null?void 0:N.nom_complet)||"N/A"),1),e("p",Ct,n(((L=s.patient)==null?void 0:L.telephone)||"-"),1)])])]),e("td",_t,[e("span",jt,n(ke(((B=s.prescripteur)==null?void 0:B.nom)||"N/A",20)),1)]),e("td",Mt,[e("span",At,n(s.analyses_count||0),1)]),e("td",Nt,[e("span",{class:c(["inline-flex rounded-full px-2.5 py-1 text-xs font-semibold",se(s.status)])},n(s.status_label),3)]),e("td",Lt,[s.paiement?(l(),a("div",Bt,[p.value.canEdit?(l(),a("button",{key:0,type:"button",class:c(["relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-slate-800",s.paiement.status?"bg-emerald-500":"bg-slate-300 dark:bg-slate-600"]),onClick:y=>be(s)},[e("span",{class:c(["pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200",s.paiement.status?"translate-x-4":"translate-x-0"])},null,2)],10,zt)):i("",!0),e("div",null,[e("span",{class:c(["text-xs font-medium",s.paiement.status?"text-emerald-600 dark:text-emerald-400":"text-red-500 dark:text-red-400"])},n(s.paiement.status?"Paye":"Non paye"),3),s.paiement.status&&s.paiement.date_paiement?(l(),a("p",Vt,n(s.paiement.date_paiement),1)):i("",!0)])])):(l(),a("span",$t,"Aucun"))]),e("td",Et,[e("div",null,[e("p",Pt,n(s.created_at||"N/A"),1),e("p",St,n(s.created_at_relative||""),1)])]),e("td",Tt,[e("div",Ht,[d.tab==="actives"?(l(),a(C,{key:0},[p.value.canEdit?(l(),M(z(O),{key:0,href:r.route("secretaire.prescription.edit",s.id),class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-emerald-50 text-emerald-600 hover:bg-emerald-100 dark:bg-emerald-900/20 dark:text-emerald-400 dark:hover:bg-emerald-900/40 transition-colors",title:"Modifier"},{default:E(()=>[...t[42]||(t[42]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1)])]),_:1},8,["href"])):i("",!0),p.value.canDelete?(l(),a("button",{key:1,type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-red-50 text-red-500 hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/40 transition-colors",title:"Supprimer",onClick:y=>w("delete",s.id)},[...t[43]||(t[43]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1)])],8,Dt)):i("",!0)],64)):i("",!0),d.tab==="valide"?(l(),a(C,{key:1},[p.value.canViewPrescription?(l(),a("a",{key:0,href:r.route("laboratoire.prescription.pdf",s.id),target:"_blank",class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-red-50 text-red-600 hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/40 transition-colors",title:"Résultats PDF"},[...t[44]||(t[44]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1)])],8,Ft)):i("",!0),p.value.canEdit?(l(),a("button",{key:1,type:"button",class:c(["inline-flex h-8 w-8 items-center justify-center rounded-lg transition-colors",s.notified_at?"bg-blue-50 text-blue-600 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400":"bg-slate-50 text-slate-400 hover:bg-slate-100 dark:bg-slate-800 dark:text-slate-500"]),title:s.notified_at?"Notifié le "+s.notified_at:"Notifier le patient",onClick:y=>Q(s)},[(l(),a("svg",{class:"h-4 w-4",fill:s.notified_at?"currentColor":"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[...t[45]||(t[45]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"},null,-1)])],8,It))],10,Rt)):i("",!0),p.value.canAccessArchive?(l(),a("button",{key:2,type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-slate-50 text-slate-500 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-400 dark:hover:bg-slate-600 transition-colors",title:"Archiver",onClick:y=>w("archive",s.id)},[...t[46]||(t[46]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})],-1)])],8,Ut)):i("",!0)],64)):d.tab==="deleted"?(l(),a(C,{key:2},[p.value.canAccessTrash?(l(),a("button",{key:0,type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-amber-50 text-amber-600 hover:bg-amber-100 dark:bg-amber-900/20 dark:text-amber-400 dark:hover:bg-amber-900/40 transition-colors",title:"Restaurer",onClick:y=>w("restore",s.id)},[...t[47]||(t[47]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})],-1)])],8,qt)):i("",!0),p.value.canAccessTrash?(l(),a("button",{key:1,type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-red-50 text-red-600 hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/40 transition-colors",title:"Supprimer definitivement",onClick:y=>w("permanentDelete",s.id)},[...t[48]||(t[48]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1)])],8,Ot)):i("",!0)],64)):i("",!0)])])])}),128)),u.prescriptions.data.length===0?(l(),a("tr",Jt,[e("td",Kt,[e("div",Gt,[t[49]||(t[49]=e("div",{class:"mb-3 flex h-11 w-11 items-center justify-center rounded-full bg-slate-100 dark:bg-slate-700"},[e("svg",{class:"h-5 w-5 text-slate-400 dark:text-slate-500",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375H8.25"})])],-1)),t[50]||(t[50]=e("p",{class:"text-sm font-medium text-slate-600 dark:text-slate-400"},"Aucune prescription trouvee",-1)),d.search?(l(),a("p",Qt,"Essayez de modifier vos criteres de recherche")):i("",!0)])])])):i("",!0)])])]),e("div",Wt,[(l(!0),a(C,null,ae(u.prescriptions.data,s=>{var N,L,B;return l(),a("div",{key:`m-${s.id}`,class:"space-y-3 p-4"},[e("div",Xt,[e("span",Yt,n(s.reference),1),e("span",{class:c(["inline-flex rounded-full px-2.5 py-1 text-xs font-semibold",se(s.status)])},n(s.status_label),3)]),e("div",Zt,[e("div",es,[e("span",ts,n(re(s)),1)]),e("div",ss,[e("p",rs,n(((N=s.patient)==null?void 0:N.nom_complet)||"N/A"),1),e("p",ls,n(((L=s.prescripteur)==null?void 0:L.nom)||"N/A")+" · "+n(((B=s.patient)==null?void 0:B.telephone)||"-"),1)])]),e("div",os,[e("div",as,[e("span",null,n(s.analyses_count||0)+" analyses",1),s.paiement?(l(),a("span",{key:0,class:c(s.paiement.status?"text-emerald-500":"text-red-500")},n(s.paiement.status?"Paye":"Non paye"),3)):i("",!0),e("span",null,n(s.created_at),1)]),e("div",ns,[d.tab==="actives"?(l(),a(C,{key:0},[p.value.canEdit?(l(),M(z(O),{key:0,href:r.route("secretaire.prescription.edit",s.id),class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-emerald-50 text-emerald-600 hover:bg-emerald-100 dark:bg-emerald-900/20 dark:text-emerald-400 dark:hover:bg-emerald-900/40 transition-colors",title:"Modifier"},{default:E(()=>[...t[52]||(t[52]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1)])]),_:1},8,["href"])):i("",!0),p.value.canDelete?(l(),a("button",{key:1,type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-red-50 text-red-500 hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/40 transition-colors",title:"Supprimer",onClick:y=>w("delete",s.id)},[...t[53]||(t[53]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1)])],8,is)):i("",!0)],64)):i("",!0),d.tab==="valide"?(l(),a(C,{key:1},[p.value.canViewPrescription?(l(),a("a",{key:0,href:r.route("laboratoire.prescription.pdf",s.id),target:"_blank",class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-red-50 text-red-600 hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/40 transition-colors",title:"Résultats PDF"},[...t[54]||(t[54]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1)])],8,ds)):i("",!0),p.value.canEdit?(l(),a("button",{key:1,type:"button",class:c(["inline-flex h-8 w-8 items-center justify-center rounded-lg transition-colors",s.notified_at?"bg-blue-50 text-blue-600 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400":"bg-slate-50 text-slate-400 hover:bg-slate-100 dark:bg-slate-800 dark:text-slate-500"]),title:s.notified_at?"Notifié le "+s.notified_at:"Notifier le patient",onClick:y=>Q(s)},[(l(),a("svg",{class:"h-4 w-4",fill:s.notified_at?"currentColor":"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[...t[55]||(t[55]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"},null,-1)])],8,us))],10,cs)):i("",!0),p.value.canAccessArchive?(l(),a("button",{key:2,type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-slate-50 text-slate-500 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-400 dark:hover:bg-slate-600 transition-colors",title:"Archiver",onClick:y=>w("archive",s.id)},[...t[56]||(t[56]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})],-1)])],8,ms)):i("",!0)],64)):d.tab==="deleted"?(l(),a(C,{key:2},[p.value.canAccessTrash?(l(),a("button",{key:0,type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-amber-50 text-amber-600 hover:bg-amber-100 dark:bg-amber-900/20 dark:text-amber-400 dark:hover:bg-amber-900/40 transition-colors",title:"Restaurer",onClick:y=>w("restore",s.id)},[...t[57]||(t[57]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})],-1)])],8,xs)):i("",!0),p.value.canAccessTrash?(l(),a("button",{key:1,type:"button",class:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-red-50 text-red-600 hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/40 transition-colors",title:"Supprimer definitivement",onClick:y=>w("permanentDelete",s.id)},[...t[58]||(t[58]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1)])],8,bs)):i("",!0)],64)):i("",!0)])])])}),128)),u.prescriptions.data.length===0?(l(),a("div",ps,[...t[59]||(t[59]=[e("p",{class:"text-sm text-slate-500"},"Aucune prescription trouvee",-1)])])):i("",!0)]),u.prescriptions.links&&u.prescriptions.links.length>3?(l(),a("div",ks,[e("div",fs,[e("p",hs,[e("span",vs,n(u.prescriptions.from||0),1),t[60]||(t[60]=k(" a ",-1)),e("span",gs,n(u.prescriptions.to||0),1),t[61]||(t[61]=k(" sur ",-1)),e("span",ys,n(u.prescriptions.total||0),1)]),he(ye,{links:u.prescriptions.links},null,8,["links"])])])):i("",!0)])]),(l(),M(ne,{to:"body"},[b.show?(l(),a("div",ws,[e("div",{class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:T}),e("div",Cs,[e("div",{class:"relative w-full max-w-sm rounded-2xl bg-white shadow-xl dark:bg-slate-800",onClick:t[11]||(t[11]=ie(()=>{},["stop"]))},[e("div",_s,[e("div",{class:c(["mx-auto mb-4 flex h-11 w-11 items-center justify-center rounded-full",{"bg-red-100 dark:bg-red-900/30":f.value.color==="red","bg-amber-100 dark:bg-amber-900/30":f.value.color==="amber","bg-slate-100 dark:bg-slate-700":f.value.color==="slate","bg-emerald-100 dark:bg-emerald-900/30":f.value.color==="emerald"}])},[(l(),a("svg",{class:c(["h-5 w-5",{"text-red-600 dark:text-red-400":f.value.color==="red","text-amber-600 dark:text-amber-400":f.value.color==="amber","text-slate-600 dark:text-slate-400":f.value.color==="slate","text-emerald-600 dark:text-emerald-400":f.value.color==="emerald"}]),fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[...t[63]||(t[63]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"},null,-1)])],2))],2),e("h3",js,n(f.value.title),1),e("p",Ms,n(f.value.desc),1)]),e("div",As,[e("button",{type:"button",class:"flex-1 rounded-lg bg-slate-100 px-4 py-2.5 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",onClick:T},"Annuler"),e("button",{type:"button",class:c(["flex-1 rounded-lg px-4 py-2.5 text-sm font-medium text-white transition-colors",fe(f.value.color)]),disabled:b.processing,onClick:me},n(b.processing?"...":f.value.btn),11,Ns)])])])])):i("",!0)])),(l(),M(ne,{to:"body"},[o.show?(l(),a("div",Ls,[e("div",{class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:$}),e("div",Bs,[e("div",{class:"relative w-full sm:max-w-lg rounded-t-2xl sm:rounded-2xl bg-white shadow-xl dark:bg-slate-800",onClick:t[15]||(t[15]=ie(()=>{},["stop"]))},[t[78]||(t[78]=e("div",{class:"sm:hidden flex justify-center pt-3"},[e("div",{class:"w-10 h-1 bg-slate-300 dark:bg-slate-600 rounded-full"})],-1)),e("div",zs,[e("div",Vs,[t[66]||(t[66]=e("div",{class:"flex-shrink-0 w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})])],-1)),e("div",$s,[t[64]||(t[64]=e("h3",{class:"text-lg font-bold text-slate-900 dark:text-white"},"Notifier le patient",-1)),e("p",Es,n((x=o.prescription)==null?void 0:x.reference)+" — "+n(((_=(v=o.prescription)==null?void 0:v.patient)==null?void 0:_.nom_complet)||"Patient"),1)]),e("button",{type:"button",class:"ml-auto flex-shrink-0 p-1 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:text-slate-300 dark:hover:bg-slate-700 transition-colors",onClick:$},[...t[65]||(t[65]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),V.value?(l(),a(C,{key:1},[e("div",Ss,[t[74]||(t[74]=e("label",{class:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2"},"Canal d'envoi",-1)),e("div",{class:c(["flex gap-2",H.value&&D.value?"grid grid-cols-2":""])},[H.value?(l(),a("label",{key:0,class:c(["relative flex items-center gap-3 rounded-xl border-2 p-3 cursor-pointer transition-all",o.channel==="sms"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-400":"border-slate-200 dark:border-slate-600 hover:border-slate-300 dark:hover:border-slate-500"])},[P(e("input",{type:"radio","onUpdate:modelValue":t[12]||(t[12]=s=>o.channel=s),value:"sms",class:"sr-only",onChange:W},null,544),[[de,o.channel]]),e("div",{class:c(["flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center",o.channel==="sms"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"])},[...t[68]||(t[68]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)])],2),t[70]||(t[70]=e("p",{class:"text-sm font-semibold text-slate-900 dark:text-white"},"SMS",-1)),o.channel==="sms"?(l(),a("div",Ts,[...t[69]||(t[69]=[e("svg",{class:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):i("",!0)],2)):i("",!0),D.value?(l(),a("label",{key:1,class:c(["relative flex items-center gap-3 rounded-xl border-2 p-3 cursor-pointer transition-all",o.channel==="email"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-400":"border-slate-200 dark:border-slate-600 hover:border-slate-300 dark:hover:border-slate-500"])},[P(e("input",{type:"radio","onUpdate:modelValue":t[13]||(t[13]=s=>o.channel=s),value:"email",class:"sr-only",onChange:W},null,544),[[de,o.channel]]),e("div",{class:c(["flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center",o.channel==="email"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"])},[...t[71]||(t[71]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})],-1)])],2),t[73]||(t[73]=e("p",{class:"text-sm font-semibold text-slate-900 dark:text-white"},"Email",-1)),o.channel==="email"?(l(),a("div",Hs,[...t[72]||(t[72]=[e("svg",{class:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):i("",!0)],2)):i("",!0)],2)]),e("div",Ds,[e("div",Fs,[t[75]||(t[75]=e("label",{class:"text-sm font-semibold text-slate-700 dark:text-slate-300"},"Message",-1)),o.channel==="sms"?(l(),a("span",{key:0,class:c(["text-[11px] font-medium",o.message.length>160?"text-red-500":"text-slate-400"])},n(o.message.length)+"/160",3)):i("",!0)]),P(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=s=>o.message=s),rows:o.channel==="sms"?3:6,maxlength:o.channel==="sms"?160:void 0,class:"w-full px-3 py-2.5 border border-slate-200 dark:border-slate-600 rounded-xl text-sm text-slate-900 dark:text-white bg-slate-50 dark:bg-slate-700/50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none transition-colors",placeholder:"Saisissez votre message..."},null,8,Rs),[[oe,o.message]])]),(le=o.prescription)!=null&&le.notified_at?(l(),a("div",Is,[t[76]||(t[76]=e("svg",{class:"w-4 h-4 text-amber-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("span",Us,"Patient déjà notifié le "+n(o.prescription.notified_at),1)])):i("",!0)],64)):(l(),a("div",Ps,[...t[67]||(t[67]=[e("div",{class:"mx-auto w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-3"},[e("svg",{class:"w-6 h-6 text-slate-400",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})])],-1),e("p",{class:"text-sm font-medium text-slate-700 dark:text-slate-300"},"Aucun moyen de contact",-1),e("p",{class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},"Ce patient n'a ni téléphone ni email enregistré.",-1)])])),e("div",{class:c(["flex items-center justify-end gap-3",{"mt-4":!V.value}])},[e("button",{type:"button",class:"h-10 px-5 text-sm font-medium text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",onClick:$},n(V.value?"Annuler":"Fermer"),1),V.value?(l(),a("button",{key:0,type:"button",class:"h-10 px-5 text-sm font-semibold text-white bg-blue-600 hover:bg-blue-700 active:bg-blue-800 rounded-lg shadow-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:!o.message.trim()||o.processing||!o.channel||o.channel==="sms"&&o.message.length>160,onClick:xe},[o.processing?(l(),a("svg",Os,[...t[77]||(t[77]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"},null,-1)])])):i("",!0),e("span",null,n(o.processing?"Envoi...":o.channel==="sms"?"Envoyer SMS":"Envoyer Email"),1)],8,qs)):i("",!0)],2)])])])])):i("",!0)]))]}),_:1}))}};export{Zs as default};
