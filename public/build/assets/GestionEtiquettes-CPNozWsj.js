import{u as W,w as J,r as T,z as S,d as B,e,c as i,l as x,o as l,t as u,q as K,f as k,b as m,j as U,v as V,y as q,g as y,F as h,p as F,n as j,s as H}from"./app-Bg1XaAxF.js";import{_ as Q}from"./AppLayout-Ddcz_BTQ.js";import{d as X}from"./debounce-BjP9TRjn.js";import{c as ee,t as I,k as A,l as L,j as te}from"./format-D4v_baXN.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";function se(n,r){const a=()=>ee(r==null?void 0:r.in,NaN),c=oe(n);let f;if(c.date){const g=le(c.date,2);f=ie(g.restDateString,g.year)}if(!f||isNaN(+f))return a();const p=+f;let b=0,v;if(c.time&&(b=de(c.time),isNaN(b)))return a();if(c.timezone){if(v=ue(c.timezone),isNaN(v))return a()}else{const g=new Date(p+b),w=I(0,r==null?void 0:r.in);return w.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),w.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),w}return I(p+b+v,r==null?void 0:r.in)}const N={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},re=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ae=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ne=/^([+-])(\d{2})(?::?(\d{2}))?$/;function oe(n){const r={},a=n.split(N.dateTimeDelimiter);let o;if(a.length>2)return r;if(/:/.test(a[0])?o=a[0]:(r.date=a[0],o=a[1],N.timeZoneDelimiter.test(r.date)&&(r.date=n.split(N.timeZoneDelimiter)[0],o=n.substr(r.date.length,n.length))),o){const c=N.timezone.exec(o);c?(r.time=o.replace(c[1],""),r.timezone=c[1]):r.time=o}return r}function le(n,r){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),o=n.match(a);if(!o)return{year:NaN,restDateString:""};const c=o[1]?parseInt(o[1]):null,f=o[2]?parseInt(o[2]):null;return{year:f===null?c:f*100,restDateString:n.slice((o[1]||o[2]).length)}}function ie(n,r){if(r===null)return new Date(NaN);const a=n.match(re);if(!a)return new Date(NaN);const o=!!a[4],c=M(a[1]),f=M(a[2])-1,p=M(a[3]),b=M(a[4]),v=M(a[5])-1;if(o)return fe(r,b,v)?ce(r,b,v):new Date(NaN);{const g=new Date(0);return!be(r,f,p)||!me(r,c)?new Date(NaN):(g.setUTCFullYear(r,f,Math.max(c,p)),g)}}function M(n){return n?parseInt(n):1}function de(n){const r=n.match(ae);if(!r)return NaN;const a=z(r[1]),o=z(r[2]),c=z(r[3]);return xe(a,o,c)?a*A+o*L+c*1e3:NaN}function z(n){return n&&parseFloat(n.replace(",","."))||0}function ue(n){if(n==="Z")return 0;const r=n.match(ne);if(!r)return 0;const a=r[1]==="+"?-1:1,o=parseInt(r[2]),c=r[3]&&parseInt(r[3])||0;return pe(o,c)?a*(o*A+c*L):NaN}function ce(n,r,a){const o=new Date(0);o.setUTCFullYear(n,0,4);const c=o.getUTCDay()||7,f=(r-1)*7+a+1-c;return o.setUTCDate(o.getUTCDate()+f),o}const ge=[31,null,31,30,31,30,31,31,30,31,30,31];function R(n){return n%400===0||n%4===0&&n%100!==0}function be(n,r,a){return r>=0&&r<=11&&a>=1&&a<=(ge[r]||(R(n)?29:28))}function me(n,r){return r>=1&&r<=(R(n)?366:365)}function fe(n,r,a){return r>=1&&r<=53&&a>=0&&a<=6}function xe(n,r,a){return n===24?r===0&&a===0:a>=0&&a<60&&r>=0&&r<60&&n>=0&&n<25}function pe(n,r){return r>=0&&r<=59}const ye={class:"p-6"},ve={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6"},ke={class:"flex items-center justify-between"},he={key:0,class:"text-right"},we={class:"bg-blue-50 dark:bg-blue-900/20 px-4 py-2 rounded-lg"},_e={class:"text-blue-700 dark:text-blue-300 font-medium"},De={key:0,class:"mt-2 text-xs text-gray-600 dark:text-gray-400"},Ce={class:"mr-2"},Me={class:"mr-2"},Te={key:0,class:"mr-2"},je={class:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-6"},Ne={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4"},Se={class:"flex items-center"},Ue={class:"ml-3"},Ve={class:"text-lg font-semibold text-gray-900 dark:text-white"},qe={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4"},ze={class:"flex items-center"},Be={class:"ml-3"},Fe={class:"text-lg font-semibold text-gray-900 dark:text-white"},He={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4"},Ie={class:"flex items-center"},Ae={class:"ml-3"},Le={class:"text-lg font-semibold text-gray-900 dark:text-white"},Re={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4"},Pe={class:"flex items-center"},Ee={class:"ml-3"},Oe={class:"text-lg font-semibold text-gray-900 dark:text-white"},Ye={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4"},Ze={class:"flex items-center"},$e={class:"ml-3"},Ge={class:"text-lg font-semibold text-gray-900 dark:text-white"},We={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4"},Je={class:"flex items-center"},Ke={class:"ml-3"},Qe={class:"text-lg font-semibold text-gray-900 dark:text-white"},Xe={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6"},et={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4"},tt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},st={class:"border-t pt-4"},rt={class:"flex justify-between items-center"},at={class:"flex items-center gap-4"},nt={class:"flex items-center"},ot={class:"flex items-center text-gray-700 dark:text-gray-300 cursor-pointer"},lt={key:0,class:"bg-blue-50 dark:bg-blue-900/20 px-3 py-1 rounded-lg"},it={class:"text-sm text-blue-700 dark:text-blue-300"},dt=["disabled"],ut={key:0},ct={key:1,class:"flex items-center"},gt={class:"bg-white dark:bg-gray-800 rounded-lg shadow"},bt={class:"p-4 border-b dark:border-gray-700"},mt={class:"flex items-center justify-between"},ft={class:"flex items-center text-gray-700 dark:text-gray-300 cursor-pointer"},xt={class:"flex items-center space-x-4"},pt={class:"text-sm text-gray-500 dark:text-gray-400"},yt={class:"divide-y dark:divide-gray-700"},vt={class:"flex items-center space-x-4"},kt=["value"],ht={key:0},wt={key:1},_t={key:2},Dt={class:"flex-1"},Ct={class:"flex items-center space-x-3 mb-1"},Mt={class:"font-bold text-gray-900 dark:text-white"},Tt={key:0,class:"text-xs px-2 py-1 rounded-full font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"},jt={key:1,class:"text-xs px-2 py-1 rounded-full font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"},Nt={key:0,class:"text-xs px-2 py-1 rounded-full font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"},St={key:0,class:"text-sm text-gray-700 dark:text-gray-300 mb-1"},Ut={key:0},Vt={class:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400"},qt={class:"flex items-center"},zt={key:0,class:"flex items-center"},Bt={key:1,class:"flex items-center"},Ft={key:2,class:"flex items-center"},Ht={key:1,class:"mt-2 text-xs text-gray-600 dark:text-gray-400 italic"},It={class:"flex items-center space-x-2"},At={key:1,class:"p-2 text-green-600",title:"Tous les tubes sont rÃ©ceptionnÃ©s"},Lt={key:1,class:"p-2 text-purple-600",title:"Prescription avec analyses seulement"},Rt={key:2,class:"p-2 text-gray-600",title:"Prescription vide"},Pt={key:1,class:"p-12 text-center"},Et={key:0,class:"p-4 border-t dark:border-gray-700"},Ot={class:"flex flex-wrap -mb-1"},Yt=["innerHTML"],Xt={__name:"GestionEtiquettes",props:{prescriptions:Object,statistiques:Object,filters:Object},setup(n){const r=n,a=W({recherche:r.filters.recherche||"",filtreStatut:r.filters.filtreStatut||"tous",filtreDate:r.filters.filtreDate||"aujourd_hui",dateDebut:r.filters.dateDebut||"",dateFin:r.filters.dateFin||"",typeAffichage:r.filters.typeAffichage||"tous"}),o=T([]),c=T(!1),f=T(!0),p=T(!1),b=K(()=>{if(o.value.length===0)return null;let d=0,t=0,s=0,D=0;r.prescriptions.data.forEach(C=>{o.value.includes(C.id)&&(d+=C.total_tubes_count,t+=C.analyses_count,C.total_tubes_count===0&&(s++,C.has_analyses||D++))});const G=d*5+s*5;return{total_tubes:d,total_analyses:t,sans_tubes:s,prescriptions_vides:D,total_etiquettes:G}}),v=X(()=>{g()},300),g=()=>{a.get(route("secretaire.etiquettes"),{preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:()=>{}})},w=()=>{a.recherche="",a.filtreStatut="tous",a.filtreDate="aujourd_hui",a.dateDebut="",a.dateFin="",a.typeAffichage="tous",o.value=[],c.value=!1,g()},P=()=>{if(c.value){const d=r.prescriptions.data.map(s=>s.id),t=[...new Set([...o.value,...d])];o.value=t}else{const d=r.prescriptions.data.map(t=>t.id);o.value=o.value.filter(t=>!d.includes(t))}},E=()=>{o.value=[],c.value=!1};J(()=>o.value,d=>{const t=r.prescriptions.data.map(s=>s.id);t.length>0&&t.every(s=>d.includes(s))?c.value=!0:c.value=!1},{deep:!0});const O=()=>{if(o.value.length===0)return;p.value=!0;const d=new URL(route("secretaire.etiquettes.export"));o.value.forEach(t=>{d.searchParams.append("prescriptions[]",t)}),d.searchParams.append("inclurePatient",f.value?"1":"0"),window.location.href=d.toString(),setTimeout(()=>{p.value=!1},2e3)},_=d=>new Intl.NumberFormat("fr-FR").format(d||0),Y=d=>{if(!d)return"";try{const t=typeof d=="string"?se(d):d;return te(t,"dd/MM/yyyy HH:mm")}catch{return d}},Z=d=>{if(!d||d.length===0)return"";const t=d.filter(s=>s.prelevement&&s.prelevement.denomination).map(s=>s.prelevement.denomination);return[...new Set(t)].join(", ")},$=(d,t=100)=>d?d.length<=t?d:d.substring(0,t)+"...":"";return(d,t)=>(l(),S(Q,null,{default:B(()=>[e("div",ye,[e("div",ve,[e("div",ke,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"}," Gestion des Ã‰tiquettes "),e("p",{class:"text-gray-600 dark:text-gray-400"}," SÃ©lectionnez les prescriptions pour impression ")],-1)),o.value.length>0?(l(),i("div",he,[e("div",we,[e("span",_e,u(o.value.length)+" prescription(s) sÃ©lectionnÃ©e(s) ",1)]),b.value?(l(),i("div",De,[e("span",Ce,u(b.value.total_tubes)+" tubes",1),e("span",Me,u(b.value.total_analyses)+" analyses",1),b.value.prescriptions_vides>0?(l(),i("span",Te,u(b.value.prescriptions_vides)+" vides",1)):x("",!0)])):x("",!0)])):x("",!0)])]),e("div",je,[e("div",Ne,[e("div",Se,[t[12]||(t[12]=e("div",{class:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Ue,[t[11]||(t[11]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Total prescriptions",-1)),e("p",Ve,u(_(n.statistiques.total_prescriptions)),1)])])]),e("div",qe,[e("div",ze,[t[14]||(t[14]=e("div",{class:"w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})])],-1)),e("div",Be,[t[13]||(t[13]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Avec tubes",-1)),e("p",Fe,u(_(n.statistiques.avec_tubes)),1)])])]),e("div",He,[e("div",Ie,[t[16]||(t[16]=e("div",{class:"w-8 h-8 bg-purple-100 dark:bg-purple-900/30 rounded flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",Ae,[t[15]||(t[15]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Avec analyses",-1)),e("p",Le,u(_(n.statistiques.avec_analyses)),1)])])]),e("div",Re,[e("div",Pe,[t[18]||(t[18]=e("div",{class:"w-8 h-8 bg-orange-100 dark:bg-orange-900/30 rounded flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Ee,[t[17]||(t[17]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Sans contenu",-1)),e("p",Oe,u(_(n.statistiques.sans_tubes)),1)])])]),e("div",Ye,[e("div",Ze,[t[20]||(t[20]=e("div",{class:"w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",$e,[t[19]||(t[19]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Tubes OK",-1)),e("p",Ge,u(_(n.statistiques.tubes_receptionnes)),1)])])]),e("div",We,[e("div",Je,[t[22]||(t[22]=e("div",{class:"w-8 h-8 bg-red-100 dark:bg-red-900/30 rounded flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Ke,[t[21]||(t[21]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Tubes en attente",-1)),e("p",Qe,u(_(n.statistiques.tubes_non_receptionnes)),1)])])])]),e("div",Xe,[e("div",et,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Recherche ",-1)),k(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>m(a).recherche=s),onInput:t[1]||(t[1]=(...s)=>m(v)&&m(v)(...s)),placeholder:"RÃ©fÃ©rence, patient, prescripteur...",class:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[U,m(a).recherche]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Type d'affichage ",-1)),k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>m(a).typeAffichage=s),onChange:g,class:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[24]||(t[24]=[e("option",{value:"tous"},"Toutes les prescriptions",-1),e("option",{value:"avec_tubes"},"Avec prÃ©lÃ¨vements",-1),e("option",{value:"sans_tubes"},"Sans prÃ©lÃ¨vements",-1),e("option",{value:"avec_analyses"},"Avec analyses",-1),e("option",{value:"sans_analyses"},"Sans analyses",-1)])],544),[[V,m(a).typeAffichage]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Statut tubes ",-1)),k(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>m(a).filtreStatut=s),onChange:g,class:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[26]||(t[26]=[e("option",{value:"tous"},"Tous les statuts",-1),e("option",{value:"non_receptionnes"},"Non rÃ©ceptionnÃ©s",-1),e("option",{value:"receptionnes"},"RÃ©ceptionnÃ©s",-1)])],544),[[V,m(a).filtreStatut]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," PÃ©riode ",-1)),k(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>m(a).filtreDate=s),onChange:g,class:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[28]||(t[28]=[e("option",{value:"aujourd_hui"},"Aujourd'hui",-1),e("option",{value:"hier"},"Hier",-1),e("option",{value:"cette_semaine"},"Cette semaine",-1),e("option",{value:"ce_mois"},"Ce mois",-1),e("option",{value:"custom"},"PÃ©riode personnalisÃ©e",-1)])],544),[[V,m(a).filtreDate]])]),e("div",{class:"flex items-end"},[e("button",{onClick:w,class:"w-full px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors"}," RÃ©initialiser ")])]),m(a).filtreDate==="custom"?(l(),i("div",tt,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Date dÃ©but",-1)),k(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=s=>m(a).dateDebut=s),onChange:g,class:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[U,m(a).dateDebut]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Date fin",-1)),k(e("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=s=>m(a).dateFin=s),onChange:g,class:"w-full p-2 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[U,m(a).dateFin]])])])):x("",!0),e("div",st,[e("div",rt,[e("div",at,[e("div",nt,[e("label",ot,[k(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=s=>f.value=s),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"},null,512),[[q,f.value]]),t[32]||(t[32]=e("span",{class:"ml-2"},"Inclure infos patient",-1))])]),b.value?(l(),i("div",lt,[e("div",it,[e("strong",null,u(b.value.total_etiquettes||0)+" Ã©tiquettes",1),y(" ("+u(b.value.total_tubes)+" tubes + "+u(b.value.sans_tubes)+" sans tubes) ",1)])])):x("",!0)]),e("div",null,[e("button",{onClick:O,disabled:o.value.length===0||p.value,class:"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors inline-flex items-center"},[p.value?(l(),i("span",ct,[...t[34]||(t[34]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" GÃ©nÃ©ration... ",-1)])])):(l(),i("span",ut,[t[33]||(t[33]=y(" GÃ©nÃ©rer PDF ",-1)),b.value?(l(),i(h,{key:0},[y(" ("+u(b.value.total_etiquettes||0)+" Ã©tiquettes) ",1)],64)):(l(),i(h,{key:1},[y(" ("+u(o.value.length)+" prescriptions) ",1)],64))]))],8,dt)])])])]),e("div",gt,[e("div",bt,[e("div",mt,[e("label",ft,[k(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>c.value=s),onChange:P,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"},null,544),[[q,c.value]]),t[35]||(t[35]=e("span",{class:"ml-2 font-medium"},"Tout sÃ©lectionner la page courante",-1))]),e("div",xt,[e("span",pt,u(n.prescriptions.data.length)+" sur "+u(n.prescriptions.total)+" prescription(s) ",1),o.value.length>0?(l(),i("button",{key:0,onClick:E,class:"text-sm text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors"}," Vider la sÃ©lection globale ")):x("",!0)])])]),e("div",yt,[n.prescriptions.data.length>0?(l(!0),i(h,{key:0},F(n.prescriptions.data,s=>(l(),i("div",{key:s.id,class:j(["p-4 transition-colors duration-150",o.value.includes(s.id)?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700/50"])},[e("div",vt,[k(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=D=>o.value=D),value:s.id,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"},null,8,kt),[[q,o.value]]),e("div",{class:j(["w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold",s.tubes.length===0&&!s.has_analyses?"bg-gradient-to-br from-gray-500 to-gray-600":s.tubes.length===0&&s.has_analyses?"bg-gradient-to-br from-purple-500 to-purple-600":"bg-gradient-to-br from-blue-500 to-blue-600"])},[s.tubes.length===0&&!s.has_analyses?(l(),i("span",ht,"ðŸ“„")):s.tubes.length===0&&s.has_analyses?(l(),i("span",wt,"ðŸ“")):(l(),i("span",_t,"ðŸ§ª"))],2),e("div",Dt,[e("div",Ct,[e("span",Mt,u(s.reference),1),s.tubes.length===0&&!s.has_analyses?(l(),i("span",Tt," PRESCRIPTION VIDE ")):s.tubes.length===0&&s.has_analyses?(l(),i("span",jt,u(s.analyses_count)+" ANALYSE(S) ",1)):(l(),i(h,{key:2},[e("span",{class:j(["text-xs px-2 py-1 rounded-full font-medium",s.tubes_receptionnes_count===s.total_tubes_count?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"])},u(s.tubes_receptionnes_count)+"/"+u(s.total_tubes_count)+" TUBES ",3),s.has_analyses?(l(),i("span",Nt," +"+u(s.analyses_count)+" ANALYSE(S) ",1)):x("",!0)],64))]),s.patient?(l(),i("div",St,[y(u(s.patient.civilite)+" "+u(s.patient.nom)+" "+u(s.patient.prenom)+" ",1),s.age?(l(),i("span",Ut,"- "+u(s.age)+" "+u(s.unite_age),1)):x("",!0)])):x("",!0),e("div",Vt,[e("span",qt,[t[36]||(t[36]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),y(" "+u(Y(s.created_at)),1)]),s.prescripteur?(l(),i("span",zt,[t[37]||(t[37]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),y(" Dr. "+u(s.prescripteur.nom),1)])):x("",!0),s.tubes.length>0?(l(),i("span",Bt,[t[38]||(t[38]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})],-1)),y(" "+u(Z(s.tubes)),1)])):x("",!0),s.has_analyses?(l(),i("span",Ft,[t[39]||(t[39]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),y(" "+u(s.analyses_count)+" analyse(s) ",1)])):x("",!0)]),s.renseignement_clinique?(l(),i("div",Ht,u($(s.renseignement_clinique,100)),1)):x("",!0)]),e("div",It,[s.tubes.length>0?(l(),i(h,{key:0},[s.tubes_receptionnes_count<s.total_tubes_count?(l(),S(m(H),{key:0,href:d.route("secretaire.etiquettes.marquer.reception",s.id),method:"post",as:"button","preserve-scroll":"",class:"p-2 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors",title:"Marquer tous les tubes comme rÃ©ceptionnÃ©s"},{default:B(()=>[...t[40]||(t[40]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])]),_:1},8,["href"])):(l(),i("div",At,[...t[41]||(t[41]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])]))],64)):s.has_analyses?(l(),i("div",Lt,[...t[42]||(t[42]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)])])):(l(),i("div",Rt,[...t[43]||(t[43]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))])])],2))),128)):(l(),i("div",Pt,[t[44]||(t[44]=e("div",{class:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t[45]||(t[45]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," Aucune prescription trouvÃ©e ",-1)),t[46]||(t[46]=e("p",{class:"text-gray-500 dark:text-gray-400 mb-4"}," Aucune prescription ne correspond aux critÃ¨res de recherche actuels. ",-1)),e("button",{onClick:w,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors"}," RÃ©initialiser les filtres ")]))]),n.prescriptions.links&&n.prescriptions.links.length>3?(l(),i("div",Et,[e("div",Ot,[(l(!0),i(h,null,F(n.prescriptions.links,(s,D)=>(l(),i(h,{key:D},[s.url===null?(l(),i("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-400 border rounded",innerHTML:s.label},null,8,Yt)):(l(),S(m(H),{key:1,class:j(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-gray-100 dark:hover:bg-gray-700 dark:text-white dark:border-gray-600 focus:border-indigo-500 focus:text-indigo-500",{"bg-blue-50 dark:bg-blue-900/50":s.active}]),href:s.url,innerHTML:s.label,"preserve-state":"","preserve-scroll":""},null,8,["class","href","innerHTML"]))],64))),128))])])):x("",!0)])])]),_:1}))}};export{Xt as default};
