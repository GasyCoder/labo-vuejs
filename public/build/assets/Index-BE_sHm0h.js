import{r as B,z as _,d as v,e as t,c as i,l as d,t as r,o,f as m,b as f,j as P,v as b,g as p,F as M,p as F,n as V,a as j,s as C,x as N}from"./app-Bg1XaAxF.js";import{_ as A}from"./AppLayout-Ddcz_BTQ.js";import{_ as L}from"./Pagination-DHKkYGMy.js";import{l as E}from"./lodash-DJbfzEvl.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const I={class:"container mx-auto px-4 py-6 sm:px-6 lg:px-8"},U={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},$={class:"text-sm text-slate-500 dark:text-slate-400 mt-0.5"},S={key:0,class:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6"},O={class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4"},T={class:"flex items-center gap-3"},R={class:"text-2xl font-bold text-slate-900 dark:text-white leading-none"},H={class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4"},X={class:"flex items-center gap-3"},q={class:"text-2xl font-bold text-slate-900 dark:text-white leading-none"},G={class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4"},J={class:"flex items-center gap-3"},K={class:"text-2xl font-bold text-slate-900 dark:text-white leading-none"},Q={class:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4"},W={class:"flex items-center gap-3"},Y={class:"text-2xl font-bold text-slate-900 dark:text-white leading-none"},Z={class:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6"},tt={class:"p-4 flex flex-col lg:flex-row items-stretch lg:items-center gap-3"},et={class:"relative flex-1"},st={class:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden"},lt={class:"hidden lg:block overflow-x-auto"},rt={class:"w-full"},ot={class:"border-b border-slate-100 dark:border-slate-700"},at={class:"px-4 py-3 text-left"},it={key:0,class:"w-3.5 h-3.5 text-primary-500",fill:"currentColor",viewBox:"0 0 20 20"},nt={key:0,d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"},dt={key:1,d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"},ut={class:"px-4 py-3 text-left"},ct={key:0,class:"w-3.5 h-3.5 text-primary-500",fill:"currentColor",viewBox:"0 0 20 20"},xt={key:0,d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"},pt={key:1,d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"},mt={class:"divide-y divide-slate-50 dark:divide-slate-700/50"},ft={class:"px-4 py-3.5"},kt={class:"text-xs font-medium text-slate-400"},vt={class:"px-4 py-3.5"},bt={class:"flex items-center gap-2.5"},gt={class:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center"},ht={class:"text-xs font-semibold text-white"},yt={class:"min-w-0"},wt={class:"text-sm font-medium text-slate-900 dark:text-white truncate"},_t={class:"px-4 py-3.5"},Mt={class:"space-y-0.5"},Ft={key:0,class:"text-sm text-slate-600 dark:text-slate-300"},jt={key:1,class:"text-xs text-slate-400 truncate max-w-[180px]"},Ct={key:2,class:"text-xs text-slate-400 italic"},zt={class:"px-4 py-3.5 text-center"},Dt={class:"inline-flex items-center justify-center w-7 h-7 rounded-full text-xs font-semibold bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"},Bt={class:"px-4 py-3.5"},Pt={class:"text-sm text-slate-600 dark:text-slate-300"},Vt={class:"text-[11px] text-slate-400"},Nt={class:"px-4 py-3.5"},At={class:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},Lt={key:1},Et={colspan:"6",class:"py-16 text-center"},It={class:"flex flex-col items-center"},Ut={key:0,class:"text-xs text-slate-400 mt-1"},$t={class:"lg:hidden divide-y divide-slate-100 dark:divide-slate-700/50"},St={class:"flex items-center gap-3"},Ot={class:"flex-shrink-0 w-9 h-9 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center"},Tt={class:"text-[11px] font-semibold text-white"},Rt={class:"min-w-0 flex-1"},Ht={class:"flex items-center justify-between"},Xt={class:"text-sm font-medium text-slate-900 dark:text-white truncate"},qt={class:"inline-flex items-center justify-center w-6 h-6 rounded-full text-[11px] font-semibold bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 ml-2"},Gt={class:"flex items-center gap-2 mt-0.5 text-xs text-slate-400"},Jt={key:1,class:"py-12 text-center"},Kt={key:0,class:"px-4 py-3 border-t border-slate-100 dark:border-slate-700/50 bg-slate-50/50 dark:bg-slate-800/50"},Qt={class:"flex flex-col sm:flex-row items-center justify-between gap-3"},Wt={class:"text-xs text-slate-500 dark:text-slate-400"},Yt={class:"font-medium"},Zt={class:"font-medium"},te={class:"font-medium"},ne={__name:"Index",props:{patients:Object,filters:Object,totalPatients:Number,patientsNouveaux:Number,patientsFideles:Number,patientsVip:Number},setup(a){const c=a,l=B({search:c.filters.search||"",civiliteFilter:c.filters.civiliteFilter||"",statutFilter:c.filters.statutFilter||"",perPage:c.filters.perPage||10,sortField:c.filters.sortField||"created_at",sortDirection:c.filters.sortDirection||"desc"}),g=n=>{const e=String(n.nom||"").charAt(0).toUpperCase(),s=String(n.prenom||"X").charAt(0).toUpperCase();return`${e}${s}`},h=n=>n?new Date(n).toLocaleDateString("fr-FR"):"",z=n=>{if(!n)return"";const e=new Date(n),k=new Date-e,u=Math.floor(k/(1e3*60*60*24));return u===0?"Aujourd'hui":u===1?"Hier":u<30?`Il y a ${u} jours`:u<365?`Il y a ${Math.floor(u/30)} mois`:`Il y a ${Math.floor(u/365)} ans`},x=()=>{N.get(route("secretaire.patients.index"),l.value,{preserveState:!0,preserveScroll:!0,replace:!0})},y=E.debounce(x,300),D=()=>{l.value.search="",l.value.civiliteFilter="",l.value.statutFilter="",l.value.perPage=10,l.value.sortField="created_at",l.value.sortDirection="desc",x()},w=n=>{l.value.sortField===n?l.value.sortDirection=l.value.sortDirection==="asc"?"desc":"asc":(l.value.sortField=n,l.value.sortDirection="asc"),x()};return(n,e)=>(o(),_(A,null,{default:v(()=>[t("div",I,[t("div",U,[t("div",null,[e[7]||(e[7]=t("h1",{class:"text-xl font-bold text-slate-900 dark:text-white"},"Patients",-1)),t("p",$,r(a.totalPatients)+" patients enregistrés",1)])]),a.totalPatients>0?(o(),i("div",S,[t("div",O,[t("div",T,[e[9]||(e[9]=t("div",{class:"w-10 h-10 rounded-lg bg-primary-50 dark:bg-primary-900/30 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})])],-1)),t("div",null,[t("p",R,r(a.totalPatients),1),e[8]||(e[8]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400 mt-0.5"},"Total",-1))])])]),t("div",H,[t("div",X,[e[11]||(e[11]=t("div",{class:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-slate-600 dark:text-slate-300",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})])],-1)),t("div",null,[t("p",q,r(a.patientsNouveaux),1),e[10]||(e[10]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400 mt-0.5"},"Nouveaux",-1))])])]),t("div",G,[t("div",J,[e[13]||(e[13]=t("div",{class:"w-10 h-10 rounded-lg bg-green-50 dark:bg-green-900/30 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[t("p",K,r(a.patientsFideles),1),e[12]||(e[12]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400 mt-0.5"},"Fidèles",-1))])])]),t("div",Q,[t("div",W,[e[15]||(e[15]=t("div",{class:"w-10 h-10 rounded-lg bg-amber-50 dark:bg-amber-900/30 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-amber-600 dark:text-amber-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})])],-1)),t("div",null,[t("p",Y,r(a.patientsVip),1),e[14]||(e[14]=t("p",{class:"text-xs text-slate-500 dark:text-slate-400 mt-0.5"},"VIP",-1))])])])])):d("",!0),t("div",Z,[t("div",tt,[t("div",et,[e[16]||(e[16]=t("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.search=s),onInput:e[1]||(e[1]=(...s)=>f(y)&&f(y)(...s)),type:"text",placeholder:"Rechercher par nom, telephone, email, dossier...",class:"w-full pl-10 pr-4 py-2.5 text-sm border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50 text-slate-900 dark:text-slate-100 placeholder-slate-400 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-colors"},null,544),[[P,l.value.search]])]),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.civiliteFilter=s),onChange:x,class:"py-2.5 px-3 text-sm border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500"},[...e[17]||(e[17]=[t("option",{value:""},"Civilité",-1),t("option",{value:"Monsieur"},"Monsieur",-1),t("option",{value:"Madame"},"Madame",-1),t("option",{value:"Mademoiselle"},"Mademoiselle",-1),t("option",{value:"Enfant-garçon"},"Enfant-garçon",-1),t("option",{value:"Enfant-fille"},"Enfant-fille",-1)])],544),[[b,l.value.civiliteFilter]]),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.statutFilter=s),onChange:x,class:"py-2.5 px-3 text-sm border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500"},[...e[18]||(e[18]=[t("option",{value:""},"Statut",-1),t("option",{value:"NOUVEAU"},"Nouveau",-1),t("option",{value:"FIDELE"},"Fidèle",-1),t("option",{value:"VIP"},"VIP",-1)])],544),[[b,l.value.statutFilter]]),m(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.perPage=s),onChange:x,class:"py-2.5 px-3 text-sm border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500"},[...e[19]||(e[19]=[t("option",{value:"10"},"10",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1)])],544),[[b,l.value.perPage]]),l.value.search||l.value.civiliteFilter||l.value.statutFilter?(o(),i("button",{key:0,onClick:D,class:"inline-flex items-center gap-1.5 px-3 py-2.5 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg transition-colors"},[...e[20]||(e[20]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),p(" Effacer ",-1)])])):d("",!0)])]),t("div",st,[t("div",lt,[t("table",rt,[t("thead",null,[t("tr",ot,[e[23]||(e[23]=t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider w-12"},"#",-1)),t("th",at,[t("button",{onClick:e[5]||(e[5]=s=>w("nom")),class:"flex items-center gap-1 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider hover:text-slate-700 dark:hover:text-slate-300"},[e[21]||(e[21]=p(" Patient ",-1)),l.value.sortField==="nom"?(o(),i("svg",it,[l.value.sortDirection==="asc"?(o(),i("path",nt)):(o(),i("path",dt))])):d("",!0)])]),e[24]||(e[24]=t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Contact",-1)),e[25]||(e[25]=t("th",{class:"px-4 py-3 text-center text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Prescriptions",-1)),t("th",ut,[t("button",{onClick:e[6]||(e[6]=s=>w("created_at")),class:"flex items-center gap-1 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider hover:text-slate-700 dark:hover:text-slate-300"},[e[22]||(e[22]=p(" Date ",-1)),l.value.sortField==="created_at"?(o(),i("svg",ct,[l.value.sortDirection==="asc"?(o(),i("path",xt)):(o(),i("path",pt))])):d("",!0)])]),e[26]||(e[26]=t("th",{class:"px-4 py-3 text-right text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider"},"Actions",-1))])]),t("tbody",mt,[a.patients.data.length>0?(o(!0),i(M,{key:0},F(a.patients.data,(s,k)=>(o(),i("tr",{key:s.id,class:"group hover:bg-slate-50/50 dark:hover:bg-slate-700/20 transition-colors"},[t("td",ft,[t("span",kt,r(a.patients.from+k),1)]),t("td",vt,[t("div",bt,[t("div",gt,[t("span",ht,r(g(s)),1)]),t("div",yt,[t("p",wt,r(s.nom)+r(s.prenom?" "+s.prenom:""),1),t("span",{class:V(["inline-flex items-center px-1.5 py-0.5 rounded text-[11px] font-medium",s.civilite==="Monsieur"?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":s.civilite==="Madame"?"bg-pink-50 text-pink-600 dark:bg-pink-900/30 dark:text-pink-400":s.civilite==="Mademoiselle"?"bg-purple-50 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400":"bg-orange-50 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400"])},r(s.civilite),3)])])]),t("td",_t,[t("div",Mt,[s.telephone?(o(),i("p",Ft,r(s.telephone),1)):d("",!0),s.email?(o(),i("p",jt,r(s.email),1)):d("",!0),!s.telephone&&!s.email?(o(),i("span",Ct,"Non renseigné")):d("",!0)])]),t("td",zt,[t("span",Dt,r(s.prescriptions_count),1)]),t("td",Bt,[t("p",Pt,r(h(s.created_at)),1),t("p",Vt,r(z(s.created_at)),1)]),t("td",Nt,[t("div",At,[j(f(C),{href:n.route("secretaire.patient.detail",s.id),class:"inline-flex items-center justify-center w-8 h-8 rounded-lg text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",title:"Voir le profil"},{default:v(()=>[...e[27]||(e[27]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),_:1},8,["href"])])])]))),128)):(o(),i("tr",Lt,[t("td",Et,[t("div",It,[e[28]||(e[28]=t("div",{class:"w-11 h-11 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-3"},[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})])],-1)),e[29]||(e[29]=t("p",{class:"text-sm font-medium text-slate-600 dark:text-slate-400"},"Aucun patient trouvé",-1)),l.value.search||l.value.civiliteFilter||l.value.statutFilter?(o(),i("p",Ut,"Modifiez vos critères de recherche")):d("",!0)])])]))])])]),t("div",$t,[a.patients.data.length>0?(o(!0),i(M,{key:0},F(a.patients.data,s=>(o(),_(f(C),{key:s.id,href:n.route("secretaire.patient.detail",s.id),class:"block p-4 hover:bg-slate-50 dark:hover:bg-slate-700/20 transition-colors"},{default:v(()=>[t("div",St,[t("div",Ot,[t("span",Tt,r(g(s)),1)]),t("div",Rt,[t("div",Ht,[t("p",Xt,r(s.nom)+r(s.prenom?" "+s.prenom:""),1),t("span",qt,r(s.prescriptions_count),1)]),t("div",Gt,[t("span",null,r(s.telephone??"Pas de tel"),1),e[30]||(e[30]=t("span",null,"·",-1)),t("span",null,r(h(s.created_at)),1)])]),e[31]||(e[31]=t("svg",{class:"w-4 h-4 text-slate-300 flex-shrink-0",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1))])]),_:2},1032,["href"]))),128)):(o(),i("div",Jt,[...e[32]||(e[32]=[t("p",{class:"text-sm text-slate-500"},"Aucun patient trouvé",-1)])]))]),a.patients.links&&a.patients.links.length>3?(o(),i("div",Kt,[t("div",Qt,[t("p",Wt,[t("span",Yt,r(a.patients.from),1),e[33]||(e[33]=p(" à ",-1)),t("span",Zt,r(a.patients.to),1),e[34]||(e[34]=p(" sur ",-1)),t("span",te,r(a.patients.total),1)]),j(L,{links:a.patients.links},null,8,["links"])])])):d("",!0)])])]),_:1}))}};export{ne as default};
