import{r as b,z as je,d as se,e,c as a,l as x,a as Ce,b as Ne,s as Re,g as n,t as i,q as U,E as Ae,o as r,F as A,p as S,n as y,f as c,j as g,J as Se,v as O,y as qe,x as Ue}from"./app-CXR-Rnhe.js";import{_ as $e}from"./AppLayout-DzbTcMOq.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const Ee={class:"px-3 py-3 space-y-4"},Pe={class:"mb-3"},Me={class:"rounded-xl border border-slate-200/70 bg-white p-4 shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},Te={class:"mb-4 flex items-center justify-between"},Ie={class:"mt-1 text-xs text-slate-500 dark:text-slate-400"},Ve={class:"font-semibold"},Fe={class:"flex items-center space-x-2"},ze={class:"text-right"},Le={class:"text-xs text-slate-500 dark:text-slate-400"},De={class:"text-xxs text-slate-400 dark:text-slate-500"},Xe={class:"relative"},Je={class:"absolute left-4 right-4 top-4 z-0 h-0.5 bg-slate-200 dark:bg-slate-600"},Oe={class:"relative z-10 flex items-center justify-between"},Be=["onClick"],He={class:"mt-3 text-center"},Ge={class:"inline-flex items-center rounded-lg border border-primary-200 bg-primary-50 px-3 py-1.5 dark:border-primary-800 dark:bg-primary-900/20"},We={class:"text-xs font-medium text-primary-800 dark:text-primary-200"},Qe={key:0,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},Ye={class:"border-b border-slate-200/60 px-5 py-4 dark:border-slate-700/70"},Ze={class:"flex items-start justify-between gap-4"},Ke={key:0,class:"shrink-0 inline-flex items-center gap-1.5 rounded-lg border border-emerald-200/70 bg-emerald-50 px-2.5 py-1 text-xs font-semibold text-emerald-700 dark:border-emerald-800/40 dark:bg-emerald-900/15 dark:text-emerald-300"},et={class:"mt-4 grid grid-cols-1 gap-3 sm:grid-cols-2"},tt={class:"flex items-center justify-between gap-3"},st={key:0,class:"inline-flex items-center gap-1.5 text-xs font-semibold"},lt={key:1,class:"ni ni-arrow-right text-base text-slate-400 dark:text-slate-500"},rt={class:"flex items-center justify-between gap-3"},at={key:0,class:"inline-flex items-center gap-1.5 text-xs font-semibold"},nt={key:1,class:"ni ni-arrow-right text-base text-slate-400 dark:text-slate-500"},it={class:"mt-3 text-xs text-slate-600 dark:text-slate-400"},ot={key:0,class:"font-semibold text-emerald-700 dark:text-emerald-300"},dt={key:1,class:"font-semibold text-primary-700 dark:text-primary-300"},ut={class:"space-y-4 p-5"},xt={key:0,class:"space-y-3"},ct={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},mt={class:"relative"},pt={key:0,class:"mt-2 flex items-center gap-1.5 text-xs text-amber-700 dark:text-amber-300"},bt={key:0,class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},gt={class:"max-h-72 space-y-2.5 overflow-auto"},ft=["onClick"],vt={class:"flex items-start justify-between gap-3"},kt={class:"flex min-w-0 flex-1 items-start gap-3"},yt={class:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-primary-600 text-sm font-bold text-white shadow-sm"},ht={class:"min-w-0 flex-1"},wt={class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},_t={class:"mt-1 flex flex-wrap items-center gap-x-3 gap-y-1.5 text-xs text-slate-600 dark:text-slate-400"},jt={class:"inline-flex items-center rounded-md bg-slate-100 px-2 py-0.5 font-mono dark:bg-slate-700"},Ct={key:0,class:"inline-flex items-center"},Nt={key:1,class:"inline-flex items-center rounded-md border border-blue-200/60 bg-blue-50 px-2 py-0.5 text-blue-700 dark:border-blue-800/30 dark:bg-blue-900/15 dark:text-blue-300"},Rt={key:1,class:"rounded-xl border border-amber-200/70 bg-amber-50 p-4 dark:border-amber-800/40 dark:bg-amber-900/10"},At={class:"flex items-start gap-3"},St={class:"mt-0.5 text-xs text-amber-800 dark:text-amber-300"},qt={key:1,class:"space-y-4"},Ut={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},$t={class:"mb-4 flex items-center justify-between"},Et={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Pt={class:"rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},Mt={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Tt={class:"mt-4 rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},It={class:"mb-2.5 flex items-center justify-between gap-3"},Vt={class:"rounded-lg border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700 dark:border-slate-600 dark:bg-slate-700/40 dark:text-slate-200"},Ft={class:"font-semibold"},zt={class:"grid grid-cols-2 gap-2.5 sm:grid-cols-3 lg:grid-cols-5"},Lt=["onUpdate:modelValue","value"],Dt={class:"relative rounded-xl border-2 border-slate-200 bg-white px-3 py-2.5 transition hover:border-slate-300 hover:shadow-sm peer-checked:border-primary-600 peer-checked:bg-primary-50 peer-focus-visible:ring-4 peer-focus-visible:ring-slate-900/5 dark:border-slate-600 dark:bg-slate-800 dark:hover:border-slate-500 dark:peer-checked:bg-primary-900/15 dark:peer-focus-visible:ring-white/10"},Xt={class:"flex items-center justify-between gap-2"},Jt={class:"min-w-0"},Ot={class:"flex min-w-0 items-center gap-2"},Bt={class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},Ht={class:"mt-0.5 text-[11px] text-slate-600 dark:text-slate-400"},Gt={class:"mt-4 rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},Wt={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Qt={class:"mt-4 rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},Yt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},Zt={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Kt={key:1,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},es={class:"space-y-4 p-5"},ts={class:"grid grid-cols-1 gap-4 lg:grid-cols-3"},ss={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},ls={class:"relative"},rs=["value"],as={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},ns={class:"relative"},is={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},os={class:"relative"},ds={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},us={class:"grid grid-cols-1 items-start gap-4 md:grid-cols-3"},xs={class:"md:col-span-2"},cs={class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},ms={key:0,class:"text-red-500"},ps={key:0,class:"rounded-xl border border-blue-200/70 bg-blue-50 px-4 py-2.5 dark:border-blue-800/30 dark:bg-blue-900/15"},bs={class:"flex items-center justify-between gap-3"},gs={class:"text-sm font-bold text-blue-800 dark:text-blue-200"},fs={key:1,class:"flex gap-2"},vs={class:"relative flex-1"},ks={key:2,class:"mt-1.5 flex items-center gap-1.5 text-xs text-blue-700 dark:text-blue-300"},ys={key:3,class:"mt-1.5 flex items-center gap-1.5 text-xs text-amber-700 dark:text-amber-300"},hs={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},ws={class:"mb-2.5 flex items-center justify-between gap-3"},_s={class:"text-xs text-slate-500 dark:text-slate-400"},js={class:"relative"},Cs={class:"flex flex-col items-center justify-between gap-3 border-t border-slate-200/60 pt-4 sm:flex-row dark:border-slate-700/70"},Ns={key:2,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},Rs={class:"bg-gradient-to-r from-green-50 to-emerald-50 px-5 py-4 dark:from-slate-800 dark:to-slate-800"},As={class:"flex items-start justify-between gap-4"},Ss={class:"shrink-0 flex items-center gap-2"},qs={key:0,class:"inline-flex items-center gap-1.5 rounded-lg border border-green-200/70 bg-green-50 px-2.5 py-1 text-xs font-semibold text-green-700 dark:border-green-800/40 dark:bg-green-900/15 dark:text-green-300"},Us={class:"grid grid-cols-1 gap-4 p-5 lg:grid-cols-3"},$s={class:"space-y-4 lg:col-span-2"},Es={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},Ps={class:"relative"},Ms={key:0,class:"mt-3 max-h-80 space-y-2 overflow-auto"},Ts={class:"flex items-center gap-2"},Is={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Vs={key:0,class:"rounded-full bg-indigo-100 px-2 py-0.5 text-xxs font-semibold text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300"},Fs={class:"text-xs text-slate-500 dark:text-slate-400"},zs={key:0,class:"ml-1 text-blue-600 dark:text-blue-400"},Ls={key:0,class:"mt-1 text-xxs text-indigo-600 dark:text-indigo-400"},Ds=["disabled","onClick"],Xs={class:"flex flex-col items-center justify-between gap-3 border-t border-slate-200/60 pt-4 sm:flex-row dark:border-slate-700/70"},Js={class:"space-y-4"},Os={class:"rounded-xl bg-slate-50 p-4 dark:bg-slate-700/50"},Bs={key:0,class:"py-4 text-center text-xs text-slate-500 dark:text-slate-400"},Hs={key:1,class:"mb-3 space-y-2"},Gs={class:"flex-1"},Ws={class:"mb-0.5 flex items-center space-x-1.5"},Qs={class:"rounded bg-blue-100 px-1.5 py-0.5 font-mono text-xxs font-bold text-blue-700 dark:bg-blue-900/30 dark:text-blue-200"},Ys={class:"text-xs font-medium text-slate-800 dark:text-slate-100"},Zs={class:"text-xxs text-slate-500 dark:text-slate-400"},Ks={key:0,class:"mt-0.5 inline-block rounded-full bg-purple-100 px-1.5 py-0.5 text-xxs text-purple-700 dark:bg-purple-900/30 dark:text-purple-200"},el={class:"ml-2 text-right"},tl={class:"text-xs font-medium text-slate-700 dark:text-slate-300"},sl=["onClick"],ll={class:"rounded-lg bg-green-50/70 p-3 text-sm dark:bg-green-900/15"},rl={class:"flex items-center justify-between"},al={class:"font-semibold text-green-700 dark:text-green-300"},nl={key:3,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},il={class:"bg-gradient-to-r from-yellow-50 to-orange-50 px-5 py-4 dark:from-slate-800 dark:to-slate-800"},ol={class:"flex items-start justify-between gap-4"},dl={class:"shrink-0 flex items-center gap-2"},ul={key:0,class:"inline-flex items-center gap-1.5 rounded-lg border border-yellow-200/70 bg-yellow-50 px-2.5 py-1 text-xs font-semibold text-yellow-700 dark:border-yellow-800/40 dark:bg-yellow-900/15 dark:text-yellow-300"},xl={class:"grid grid-cols-1 gap-4 p-5 xl:grid-cols-3"},cl={class:"space-y-4 xl:col-span-2"},ml={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},pl={class:"relative"},bl={key:0,class:"grid grid-cols-1 gap-2 lg:grid-cols-2"},gl={class:"flex items-start gap-2.5 flex-1"},fl={class:"flex-1 min-w-0"},vl={class:"text-xs font-medium text-slate-800 dark:text-slate-100"},kl={class:"mt-1 flex items-center gap-2"},yl={class:"inline-flex items-center rounded-full bg-yellow-100 px-1.5 py-0.5 text-xxs font-medium text-yellow-700 dark:bg-yellow-900 dark:text-yellow-200"},hl={key:0,class:"text-xxs font-medium text-green-600 dark:text-green-400"},wl=["disabled","onClick"],_l={class:"flex flex-col items-center justify-between gap-3 border-t border-slate-200/60 pt-4 sm:flex-row dark:border-slate-700/70"},jl={class:"rounded-xl border border-slate-200/70 bg-slate-50 p-4 dark:border-slate-700/70 dark:bg-slate-700/50"},Cl={key:0,class:"py-4 text-center text-xs text-slate-500 dark:text-slate-400"},Nl={key:1,class:"space-y-2"},Rl={class:"mb-2 flex items-start justify-between gap-2"},Al={class:"text-xs font-medium text-slate-800 dark:text-slate-100"},Sl={class:"mt-1 text-xxs text-slate-500 dark:text-slate-400"},ql=["onClick"],Ul={class:"flex items-center justify-between"},$l=["onUpdate:modelValue"],El={class:"mt-3 border-t border-slate-200 pt-2 dark:border-slate-600"},Pl={class:"flex items-center justify-between text-sm"},Ml={class:"font-semibold text-yellow-700 dark:text-yellow-300"},Tl={key:4,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},Il={class:"bg-gradient-to-r from-red-50 to-pink-50 px-5 py-4 dark:from-slate-800 dark:to-slate-800"},Vl={class:"flex items-start justify-between gap-4"},Fl={class:"shrink-0 text-right"},zl={class:"text-lg font-bold text-red-600 dark:text-red-400"},Ll={class:"grid grid-cols-1 gap-4 p-5 xl:grid-cols-3"},Dl={class:"space-y-4 xl:col-span-2"},Xl={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},Jl={class:"space-y-2 text-sm"},Ol={class:"flex justify-between border-b border-slate-200/60 py-1.5 dark:border-slate-700/70"},Bl={class:"font-medium text-slate-800 dark:text-slate-100"},Hl={class:"flex justify-between border-b border-slate-200/60 py-1.5 dark:border-slate-700/70"},Gl={class:"font-medium text-slate-800 dark:text-slate-100"},Wl={class:"flex justify-between border-b border-slate-200/60 py-1.5 dark:border-slate-700/70"},Ql={class:"font-medium text-slate-800 dark:text-slate-100"},Yl={class:"flex justify-between border-b border-slate-200/60 py-1.5 dark:border-slate-700/70"},Zl={class:"font-medium text-red-600 dark:text-red-400"},Kl={class:"rounded-xl border border-red-200/70 bg-red-50 p-3 dark:border-red-800/40 dark:bg-red-900/15"},er={class:"flex items-center justify-between"},tr={class:"text-base font-bold text-red-600 dark:text-red-400"},sr={class:"space-y-4"},lr={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},rr={class:"relative"},ar=["value"],nr={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},ir={class:"relative"},or={class:"flex flex-col items-center justify-between gap-3 border-t border-slate-200/60 px-5 pb-5 pt-4 sm:flex-row dark:border-slate-700/70"},dr=["disabled"],ur={key:0},xr={key:1,class:"flex items-center gap-2"},fr={__name:"Create",props:{prescripteurs:{type:Array,default:()=>[]},paymentMethods:{type:Array,default:()=>[]},defaultReference:{type:String,default:""},urgenceFees:{type:Object,default:()=>({jour:0,nuit:0})},civilites:{type:Array,default:()=>[]}},setup(F){var te;const $=F,C=[{key:"patient",icon:"user",label:"Patient"},{key:"clinique",icon:"list-round",label:"Clinique"},{key:"analyses",icon:"filter",label:"Analyses"},{key:"prelevements",icon:"package",label:"Prelevements"},{key:"paiement",icon:"coin-alt",label:"Paiement"},{key:"tubes",icon:"scan",label:"Etiquettes"},{key:"confirmation",icon:"check-circle",label:"Fini"}],_=b("patient"),h=b(!1),z=b(!1),v=b(""),j=b([]),q=b(null);let B=null;const E=b(""),P=b([]),p=b([]);let H=null;const M=b(""),T=b([]),w=b([]);let G=null;const u=b({nom:"",prenom:"",civilite:$.civilites[0]||"Monsieur",date_naissance:"",telephone:"",email:"",adresse:""}),o=b({prescripteur_id:"",patient_type:"EXTERNE",age:0,unite_age:"Ans",poids:"",renseignement_clinique:""}),f=b({payment_method:((te=$.paymentMethods[0])==null?void 0:te.code)||"",remise:0,paiement_statut:!0}),le=U(()=>new Date().toLocaleString("fr-FR")),I=U(()=>C.findIndex(l=>l.key===_.value)),re=U(()=>C.length<=1?0:I.value/(C.length-1)*100),D=U(()=>p.value.reduce((l,t)=>l+Number(t.prix_effectif||t.prix||0),0)),X=U(()=>w.value.reduce((l,t)=>{const d=Math.max(1,Number(t.quantite||1)),s=Number(t.prix_promotion||0),m=d>1&&s>0?s:Number(t.prix||0);return l+m*d},0)),W=U(()=>o.value.patient_type==="URGENCE-JOUR"?Number($.urgenceFees.jour||0):o.value.patient_type==="URGENCE-NUIT"?Number($.urgenceFees.nuit||0):0),Q=U(()=>{const l=Math.max(0,Number(f.value.remise||0));return(D.value+X.value)*(l/100)}),Y=U(()=>{const l=D.value+X.value;return Math.max(0,l-Q.value+W.value)}),k=l=>`${Number(l||0).toLocaleString("fr-FR")} Ar`,ae=l=>C.findIndex(d=>d.key===l.key)<I.value?"bg-green-500 text-white shadow-sm":l.key===_.value?"bg-primary-500 text-white shadow-md scale-110":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600",ne=l=>C.findIndex(d=>d.key===l.key)<I.value?"text-green-600 dark:text-green-400":l.key===_.value?"text-primary-600 dark:text-primary-400":"text-slate-500 dark:text-slate-400",Z=l=>{h.value=l,l&&(q.value=null,j.value=[])},ie=()=>{h.value=!1,q.value=null,j.value=[],v.value=""},oe=()=>{v.value="",j.value=[]},K=l=>String(l||"").trim()||"-",de=l=>{const t=String(l||"").toLowerCase();return t.includes("monsieur")||t.includes("homme")?"Homme":t.includes("madame")||t.includes("femme")?"Femme":t.includes("enfant")||t.includes("garcon")||t.includes("fille")?"Enfant":"Autre"},ue=l=>{var R,L;const d=String((l==null?void 0:l.nom_complet)||`${(l==null?void 0:l.nom)||""} ${(l==null?void 0:l.prenom)||""}`||"NA").trim().split(/\s+/).filter(Boolean),s=((R=d[0])==null?void 0:R.charAt(0))||"N",m=((L=d[1])==null?void 0:L.charAt(0))||"A";return`${s}${m}`.toUpperCase()},xe=l=>{q.value=l,h.value=!1,u.value={nom:l.nom||"",prenom:l.prenom||"",civilite:l.civilite||$.civilites[0]||"Monsieur",date_naissance:l.date_naissance||"",telephone:l.telephone||"",email:l.email||"",adresse:l.adresse||""},o.value.age=Number(l.age||0),o.value.unite_age=l.unite_age||"Ans"},ce=()=>{const l=u.value.date_naissance;if(!l)return;const t=new Date(l),d=new Date,s=1440*60*1e3,m=Math.floor((d.getTime()-t.getTime())/s),R=Math.floor(m/30.4375),L=Math.floor(R/12);if(m<=60){o.value.age=m,o.value.unite_age="Jours";return}if(R<24){o.value.age=R,o.value.unite_age="Mois";return}o.value.age=L,o.value.unite_age="Ans"},N=async l=>{l==="clinique"&&!u.value.nom.trim()||l==="analyses"&&!o.value.prescripteur_id||l==="prelevements"&&p.value.length===0||l==="paiement"&&p.value.length===0||(_.value=l,l==="prelevements"&&T.value.length===0&&await ee(""))},me=()=>{var l;_.value="patient",h.value=!1,z.value=!1,v.value="",j.value=[],q.value=null,E.value="",P.value=[],p.value=[],M.value="",T.value=[],w.value=[],u.value={nom:"",prenom:"",civilite:$.civilites[0]||"Monsieur",date_naissance:"",telephone:"",email:"",adresse:""},o.value={prescripteur_id:"",patient_type:"EXTERNE",age:0,unite_age:"Ans",poids:"",renseignement_clinique:""},f.value={payment_method:((l=$.paymentMethods[0])==null?void 0:l.code)||"",remise:0,paiement_statut:!0}},pe=async l=>{const d=await(await fetch(`${route("secretaire.prescription.lookup.patients")}?q=${encodeURIComponent(l)}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();j.value=d.data||[]},be=async l=>{const d=await(await fetch(`${route("secretaire.prescription.lookup.analyses")}?q=${encodeURIComponent(l)}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();P.value=d.data||[]},ee=async l=>{const d=await(await fetch(`${route("secretaire.prescription.lookup.prelevements")}?q=${encodeURIComponent(l)}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();T.value=d.data||[]},ge=()=>{B&&window.clearTimeout(B),B=window.setTimeout(async()=>{if(v.value.trim().length<2){j.value=[];return}await pe(v.value.trim())},300)},fe=()=>{H&&window.clearTimeout(H),H=window.setTimeout(async()=>{if(E.value.trim().length<2){P.value=[];return}await be(E.value.trim())},250)},ve=()=>{G&&window.clearTimeout(G),G=window.setTimeout(async()=>{await ee(M.value.trim())},250)},J=l=>p.value.some(t=>t.id===l),ke=l=>{if(!J(l.id))if(l.is_parent){const t=p.value.filter(d=>d.parent_id===l.id);if(t.length>0){alert(`Certaines analyses de ce panel sont dÃ©jÃ  sÃ©lectionnÃ©es: ${t.map(d=>d.designation).join(", ")}`);return}if(Number(l.prix||0)<=0){alert("Ce panel n'a pas de prix dÃ©fini");return}p.value.push({id:l.id,designation:l.designation,code:l.code,level:l.level,prix:Number(l.prix||0),prix_effectif:Number(l.prix||0),parent_id:null,parent_nom:"Panel complet",is_parent:!0,enfants_inclus:l.enfants_inclus||[]})}else{if(l.parent_id){const d=p.value.find(s=>s.id===l.parent_id&&s.is_parent);if(d){alert(`Cette analyse est dÃ©jÃ  incluse dans le panel Â« ${d.designation} Â»`);return}}let t="Analyse individuelle";l.parent_nom?t=l.parent_nom:l.parent&&Number(l.parent.prix||0)>0?t=`${l.parent.designation} (partie)`:l.parent&&(t=l.parent.designation),p.value.push({id:l.id,designation:l.designation,code:l.code,level:l.level,prix:Number(l.prix||0),prix_effectif:Number(l.prix||0),parent_id:l.parent_id,parent_nom:t,is_parent:!1})}},ye=l=>{p.value=p.value.filter(t=>t.id!==l)},V=l=>w.value.some(t=>t.id===l),he=l=>{V(l.id)||w.value.push({...l,quantite:1})},we=l=>{w.value=w.value.filter(t=>t.id!==l)},_e=()=>{var t;if(!u.value.nom.trim()||!o.value.prescripteur_id||p.value.length===0||!f.value.payment_method)return;z.value=!0;const l={patient_id:((t=q.value)==null?void 0:t.id)??null,patient:{nom:u.value.nom,prenom:u.value.prenom,civilite:u.value.civilite,date_naissance:u.value.date_naissance||null,telephone:u.value.telephone||null,email:u.value.email||null,adresse:u.value.adresse||null},prescripteur_id:Number(o.value.prescripteur_id),patient_type:o.value.patient_type,age:Number(o.value.age||0),unite_age:o.value.unite_age,poids:o.value.poids===""?null:Number(o.value.poids),renseignement_clinique:o.value.renseignement_clinique||null,analyse_ids:p.value.map(d=>d.id),prelevements:w.value.map(d=>({id:d.id,quantite:Math.max(1,Number(d.quantite||1))})),payment_method:f.value.payment_method,remise:Math.max(0,Number(f.value.remise||0)),paiement_statut:!!f.value.paiement_statut};Ue.post(route("secretaire.prescription.store"),l,{preserveScroll:!0,onFinish:()=>{z.value=!1}})};return(l,t)=>(r(),je($e,null,{default:se(()=>{var d;return[e("div",Ee,[e("div",Pe,[Ce(Ne(Re),{href:l.route("secretaire.prescription.index"),class:"inline-flex items-center rounded-lg bg-slate-50 px-3 py-1.5 text-sm text-slate-600 transition-colors hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},{default:se(()=>[...t[30]||(t[30]=[e("em",{class:"ni ni-arrow-left mr-1.5 text-xs"},null,-1),n("Retour a la liste ",-1)])]),_:1},8,["href"])]),e("div",Me,[e("div",Te,[e("div",null,[t[32]||(t[32]=e("h1",{class:"flex items-center text-base font-semibold text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-dashlite mr-2 text-sm text-primary-500"}),n("Nouvelle Prescription ")],-1)),e("p",Ie,[t[31]||(t[31]=n(" Reference: ",-1)),e("span",Ve,i(F.defaultReference),1)])]),e("div",Fe,[e("div",ze,[e("div",Le,i(le.value),1),e("div",De,"Cree par: "+i((d=l.$page.props.auth.user)==null?void 0:d.name),1)]),e("button",{type:"button",class:"rounded-md bg-red-50 px-2.5 py-1.5 text-xs text-red-600 transition-colors hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",onClick:me},[...t[33]||(t[33]=[e("em",{class:"ni ni-refresh mr-1 text-xs"},null,-1),n("Reset ",-1)])])])]),e("div",Xe,[e("div",Je,[e("div",{class:"h-full bg-gradient-to-r from-primary-400 to-green-400 transition-all duration-300",style:Ae({width:`${re.value}%`})},null,4)]),e("div",Oe,[(r(),a(A,null,S(C,s=>e("div",{key:s.key,class:"flex flex-col items-center"},[e("button",{type:"button",class:y(["relative mb-1.5 flex h-8 w-8 items-center justify-center rounded-full transition-all duration-200",ae(s)]),onClick:m=>N(s.key)},[e("em",{class:y(`ni ni-${s.icon} text-xs`)},null,2)],10,Be),e("span",{class:y(["block text-xxs font-medium",ne(s)])},i(s.label),3)])),64))])]),e("div",He,[e("div",Ge,[e("em",{class:y(`ni ni-${C[I.value].icon} mr-1.5 text-xs text-primary-600 dark:text-primary-400`)},null,2),e("span",We," Etape "+i(I.value+1)+"/"+i(C.length)+" : "+i(C[I.value].label),1)])])]),_.value==="patient"?(r(),a("section",Qe,[e("div",Ye,[e("div",Ze,[t[35]||(t[35]=e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-primary-600 shadow-sm"},[e("em",{class:"ni ni-user text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},[n(" Patient "),e("span",{class:"font-normal text-slate-600 dark:text-slate-400"},"- Selection / creation")]),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Selectionnez un patient existant ou creez un nouveau dossier.")])],-1)),j.value.length>0?(r(),a("span",Ke,[t[34]||(t[34]=e("em",{class:"ni ni-check-circle"},null,-1)),n(" "+i(j.value.length),1)])):x("",!0)]),e("div",et,[e("button",{type:"button",class:y(["w-full rounded-xl border-2 bg-transparent px-4 py-3 text-left transition focus:outline-none focus:ring-4 focus:ring-primary-600/15",h.value?"border-slate-200 text-slate-800 hover:border-slate-300 dark:border-slate-600 dark:text-slate-100 dark:hover:border-slate-500":"border-primary-600 bg-primary-50 text-primary-700 shadow-sm dark:bg-primary-900/15 dark:text-primary-300"]),onClick:t[0]||(t[0]=s=>Z(!1))},[e("div",tt,[t[37]||(t[37]=e("div",{class:"flex items-center gap-3"},[e("span",{class:"flex h-10 w-10 items-center justify-center rounded-xl border border-primary-200 bg-white/60 dark:border-primary-800/40 dark:bg-primary-900/10"},[e("em",{class:"ni ni-search text-base text-primary-600 dark:text-primary-300"})]),e("div",null,[e("div",{class:"text-sm font-semibold"},"Patient existant"),e("div",{class:"text-xs text-slate-600 dark:text-slate-400"},"Rechercher et selectionner")])],-1)),h.value?(r(),a("em",lt)):(r(),a("span",st,[...t[36]||(t[36]=[e("em",{class:"ni ni-check"},null,-1),n(" Actif ",-1)])]))])],2),e("button",{type:"button",class:y(["w-full rounded-xl border-2 bg-transparent px-4 py-3 text-left transition focus:outline-none focus:ring-4 focus:ring-emerald-600/15",h.value?"border-emerald-600 bg-emerald-50 text-emerald-700 shadow-sm dark:bg-emerald-900/15 dark:text-emerald-300":"border-slate-200 text-slate-800 hover:border-slate-300 dark:border-slate-600 dark:text-slate-100 dark:hover:border-slate-500"]),onClick:t[1]||(t[1]=s=>Z(!0))},[e("div",rt,[t[39]||(t[39]=e("div",{class:"flex items-center gap-3"},[e("span",{class:"flex h-10 w-10 items-center justify-center rounded-xl border border-emerald-200 bg-white/60 dark:border-emerald-800/40 dark:bg-emerald-900/10"},[e("em",{class:"ni ni-user-add text-base text-emerald-600 dark:text-emerald-300"})]),e("div",null,[e("div",{class:"text-sm font-semibold"},"Nouveau patient"),e("div",{class:"text-xs text-slate-600 dark:text-slate-400"},"Creer un dossier")])],-1)),h.value?(r(),a("span",at,[...t[38]||(t[38]=[e("em",{class:"ni ni-check"},null,-1),n(" Actif ",-1)])])):(r(),a("em",nt))])],2)]),e("div",it,[t[40]||(t[40]=n(" Mode actuel : ",-1)),h.value?(r(),a("span",ot,"Nouveau patient")):(r(),a("span",dt,"Patient existant"))])]),e("div",ut,[!h.value&&!q.value?(r(),a("div",xt,[e("div",ct,[t[44]||(t[44]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-search mr-1.5 text-primary-600 dark:text-primary-300"}),n(" Rechercher un patient ")],-1)),e("div",mt,[t[42]||(t[42]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-search text-base text-slate-400 dark:text-slate-500"})],-1)),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),type:"text",placeholder:"Nom, prenom, reference ou telephone...",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500",onInput:ge},null,544),[[g,v.value]]),v.value?(r(),a("button",{key:0,type:"button",class:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 transition hover:text-red-500 dark:hover:text-red-400",onClick:oe},[...t[41]||(t[41]=[e("em",{class:"ni ni-cross-circle text-lg"},null,-1)])])):x("",!0)]),v.value.length>0&&v.value.length<2?(r(),a("p",pt,[...t[43]||(t[43]=[e("em",{class:"ni ni-info-circle"},null,-1),n(" Tapez au moins 2 caracteres. ",-1)])])):x("",!0)]),j.value.length>0?(r(),a("div",bt,[t[49]||(t[49]=e("div",{class:"mb-3 flex items-center justify-between"},[e("h3",{class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},"Resultats"),e("span",{class:"text-xs text-slate-600 dark:text-slate-400"},"Cliquez pour selectionner")],-1)),e("div",gt,[(r(!0),a(A,null,S(j.value,s=>(r(),a("button",{key:s.id,type:"button",class:"group w-full rounded-xl border border-slate-200 bg-white p-4 text-left transition hover:bg-slate-50 hover:shadow-sm focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-800 dark:hover:bg-slate-700/30",onClick:m=>xe(s)},[e("div",vt,[e("div",kt,[e("div",yt,i(ue(s)),1),e("div",ht,[e("div",wt,i(s.nom_complet),1),e("div",_t,[e("span",jt,[t[45]||(t[45]=e("em",{class:"ni ni-id-badge mr-1 text-xs text-primary-500"},null,-1)),n(" "+i(s.numero_dossier||"-"),1)]),s.telephone?(r(),a("span",Ct,[t[46]||(t[46]=e("em",{class:"ni ni-call mr-1 text-xs text-emerald-600 dark:text-emerald-300"},null,-1)),n(" "+i(s.telephone),1)])):x("",!0),s.age?(r(),a("span",Nt,[t[47]||(t[47]=e("em",{class:"ni ni-calendar mr-1 text-xs"},null,-1)),n(" "+i(s.age)+" "+i(s.unite_age||"Ans"),1)])):x("",!0)])])]),t[48]||(t[48]=e("div",{class:"shrink-0 flex items-center gap-1.5 text-primary-600 opacity-0 transition group-hover:opacity-100 dark:text-primary-300"},[e("span",{class:"text-xs font-semibold"},"Selectionner"),e("em",{class:"ni ni-arrow-right text-base transition-transform group-hover:translate-x-0.5"})],-1))])],8,ft))),128))])])):v.value.length>=2?(r(),a("div",Rt,[e("div",At,[t[51]||(t[51]=e("div",{class:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-amber-100 dark:bg-amber-900/20"},[e("em",{class:"ni ni-alert-circle text-lg text-amber-800 dark:text-amber-300"})],-1)),e("div",null,[t[50]||(t[50]=e("h4",{class:"text-sm font-semibold text-amber-900 dark:text-amber-200"},"Aucun patient trouve",-1)),e("p",St,' Aucun resultat pour "'+i(v.value)+'". ',1)])])])):x("",!0)])):x("",!0),h.value||q.value?(r(),a("div",qt,[e("div",Ut,[e("div",$t,[e("h3",Et,i(q.value?"Mettre a jour le dossier patient":"Creer un dossier patient"),1),t[52]||(t[52]=e("span",{class:"text-xs text-slate-600 dark:text-slate-400"},"* obligatoires",-1))]),e("div",Pt,[t[55]||(t[55]=e("h4",{class:"mb-3 text-sm font-semibold text-slate-900 dark:text-slate-100"},"Identite",-1)),e("div",Mt,[e("div",null,[t[53]||(t[53]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},[n("Nom "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>u.value.nom=s),type:"text",placeholder:"Ex: RAJAONA",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[g,u.value.nom]])]),e("div",null,[t[54]||(t[54]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Prenom(s)",-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>u.value.prenom=s),type:"text",placeholder:"Ex: Miangaly",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[g,u.value.prenom]])])])]),e("div",Tt,[e("div",It,[t[57]||(t[57]=e("h4",{class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},[n("Civilite "),e("span",{class:"text-red-500"},"*")],-1)),e("span",Vt,[t[56]||(t[56]=n(" Selectionne : ",-1)),e("span",Ft,i(K(u.value.civilite)),1)])]),e("div",zt,[(r(!0),a(A,null,S(F.civilites,s=>(r(),a("label",{key:s,class:"cursor-pointer"},[c(e("input",{"onUpdate:modelValue":m=>u.value.civilite=m,type:"radio",value:s,class:"peer sr-only"},null,8,Lt),[[Se,u.value.civilite]]),e("div",Dt,[e("div",Xt,[e("div",Jt,[e("div",Ot,[e("div",Bt,i(K(s)),1),t[58]||(t[58]=e("span",{class:"hidden items-center gap-1 rounded-full border border-primary-200 bg-primary-50 px-2 py-0.5 text-[11px] font-semibold text-primary-700 peer-checked:inline-flex dark:border-primary-800/30 dark:bg-primary-900/15 dark:text-primary-200"},[e("em",{class:"ni ni-check text-[11px]"}),n(" Selectionne ")],-1))]),e("div",Ht,i(de(s)),1)]),t[59]||(t[59]=e("span",{class:"flex h-6 w-6 shrink-0 scale-95 items-center justify-center rounded-full border border-slate-200 bg-white opacity-0 transition peer-checked:scale-100 peer-checked:opacity-100 dark:border-slate-600 dark:bg-slate-700"},[e("em",{class:"ni ni-check text-xs text-primary-600"})],-1))])])]))),128))])]),e("div",Gt,[t[62]||(t[62]=e("h4",{class:"mb-3 text-sm font-semibold text-slate-900 dark:text-slate-100"},"Contact",-1)),e("div",Wt,[e("div",null,[t[60]||(t[60]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Telephone",-1)),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>u.value.telephone=s),type:"tel",placeholder:"+261 34 12 345 67",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[g,u.value.telephone]])]),e("div",null,[t[61]||(t[61]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Email",-1)),c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>u.value.email=s),type:"email",placeholder:"email@exemple.com",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[g,u.value.email]])])])]),e("div",Qt,[t[63]||(t[63]=e("h4",{class:"mb-3 text-sm font-semibold text-slate-900 dark:text-slate-100"},"Adresse",-1)),t[64]||(t[64]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Rue / Quartier / Lot",-1)),c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>u.value.adresse=s),type:"text",placeholder:"Ex: Lot II M 45 Bis Analakely",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[g,u.value.adresse]])])]),e("div",Yt,[e("div",Zt,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-100 px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-200 sm:w-auto dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",onClick:ie},[...t[65]||(t[65]=[e("em",{class:"ni ni-arrow-left"},null,-1),n(" Retour ",-1)])]),e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700 sm:w-auto",onClick:t[8]||(t[8]=s=>N("clinique"))},[...t[66]||(t[66]=[e("em",{class:"ni ni-check"},null,-1),n(" Valider et continuer ",-1)])])])])])):x("",!0)])])):x("",!0),_.value==="clinique"?(r(),a("section",Kt,[t[95]||(t[95]=e("div",{class:"bg-gradient-to-r from-cyan-50 to-blue-50 px-5 py-4 dark:from-slate-800 dark:to-slate-800"},[e("div",{class:"flex items-start justify-between gap-4"},[e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-cyan-600 shadow-sm"},[e("em",{class:"ni ni-notes text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},"Informations cliniques"),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Renseignements medicaux et prescription.")])]),e("div",{class:"shrink-0 flex items-center gap-2"},[e("span",{class:"inline-flex items-center gap-1.5 rounded-lg border border-cyan-200 bg-cyan-50 px-2.5 py-1 text-xs font-semibold text-cyan-800 dark:border-cyan-800/30 dark:bg-cyan-900/15 dark:text-cyan-200"},[e("em",{class:"ni ni-check-circle"}),n(" Clinique ")]),e("span",{class:"hidden items-center gap-2 text-xs text-slate-500 sm:inline-flex dark:text-slate-400"},[e("span",{class:"inline-flex items-center gap-1"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-cyan-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-slate-300 dark:bg-slate-600"})]),n(" Etape 2/7 ")])])])],-1)),e("div",es,[e("div",ts,[e("div",ss,[t[70]||(t[70]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-user-md mr-1.5 text-cyan-600 dark:text-cyan-300"}),n(" Prescripteur "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ls,[t[68]||(t[68]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-user-md text-base text-slate-400 dark:text-slate-500"})],-1)),c(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.value.prescripteur_id=s),class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 transition hover:border-slate-300 focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:hover:border-slate-500"},[t[67]||(t[67]=e("option",{value:""},"Selectionner un prescripteur...",-1)),(r(!0),a(A,null,S(F.prescripteurs,s=>(r(),a("option",{key:s.id,value:s.id},i(s.nom_complet),9,rs))),128))],512),[[O,o.value.prescripteur_id]]),t[69]||(t[69]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("em",{class:"ni ni-chevron-down text-xs text-slate-400 dark:text-slate-500"})],-1))])]),e("div",as,[t[74]||(t[74]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-building mr-1.5 text-blue-600 dark:text-blue-300"}),n(" Type de patient ")],-1)),e("div",ns,[t[72]||(t[72]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-building text-base text-slate-400 dark:text-slate-500"})],-1)),c(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.value.patient_type=s),class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 transition hover:border-slate-300 focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:hover:border-slate-500"},[...t[71]||(t[71]=[e("option",{value:"EXTERNE"},"ðŸ  Externe",-1),e("option",{value:"HOSPITALISE"},"ðŸ¥ Hospitalise",-1),e("option",{value:"URGENCE-JOUR"},"ðŸš¨ Urgence Jour",-1),e("option",{value:"URGENCE-NUIT"},"ðŸŒ™ Urgence Nuit",-1)])],512),[[O,o.value.patient_type]]),t[73]||(t[73]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("em",{class:"ni ni-chevron-down text-xs text-slate-400 dark:text-slate-500"})],-1))]),t[75]||(t[75]=e("p",{class:"mt-2 flex items-center gap-1.5 text-xs text-slate-600 dark:text-slate-400"},[e("em",{class:"ni ni-info-circle"}),n(" Utile pour le tri et la prise en charge. ")],-1))]),e("div",is,[t[78]||(t[78]=e("div",{class:"mb-2.5 flex items-center justify-between gap-3"},[e("label",{class:"block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-activity mr-1.5 text-orange-600 dark:text-orange-300"}),n(" Poids ")]),e("span",{class:"text-xs text-slate-500 dark:text-slate-400"},"kg")],-1)),e("div",os,[t[76]||(t[76]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-activity text-base text-slate-400 dark:text-slate-500"})],-1)),c(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.value.poids=s),type:"number",min:"0",step:"0.1",placeholder:"Ex: 65.5",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-12 text-sm text-slate-900 placeholder-slate-400 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[g,o.value.poids,void 0,{number:!0}]]),t[77]||(t[77]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("span",{class:"text-xs font-semibold text-slate-500 dark:text-slate-400"},"kg")],-1))]),t[79]||(t[79]=e("p",{class:"mt-2 flex items-center gap-1.5 text-xs text-slate-600 dark:text-slate-400"},[e("em",{class:"ni ni-info-circle"}),n(" Optionnel - utile pour le calcul des doses. ")],-1))])]),e("div",ds,[t[87]||(t[87]=e("div",{class:"mb-3 flex items-center justify-between gap-3"},[e("h3",{class:"flex items-center gap-2 text-sm font-semibold text-slate-900 dark:text-slate-100"},[e("span",{class:"flex h-8 w-8 items-center justify-center rounded-xl border border-emerald-200/70 bg-emerald-50 dark:border-emerald-800/30 dark:bg-emerald-900/15"},[e("em",{class:"ni ni-calendar text-sm text-emerald-700 dark:text-emerald-300"})]),n(" Naissance et age ")]),e("span",{class:"text-xs text-slate-500 dark:text-slate-400"},"Recommande")],-1)),e("div",us,[e("div",xs,[t[80]||(t[80]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Date de naissance",-1)),c(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>u.value.date_naissance=s),type:"date",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",onChange:ce},null,544),[[g,u.value.date_naissance]])]),e("div",null,[e("label",cs,[t[81]||(t[81]=n("Age ",-1)),u.value.date_naissance?x("",!0):(r(),a("span",ms,"*"))]),u.value.date_naissance?(r(),a("div",ps,[e("div",bs,[e("span",gs,i(o.value.age)+" "+i(o.value.unite_age),1),t[82]||(t[82]=e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"},null,-1))])])):(r(),a("div",fs,[e("div",vs,[t[83]||(t[83]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-hash text-base text-slate-400 dark:text-slate-500"})],-1)),c(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>o.value.age=s),type:"number",min:"0",max:"150",placeholder:"Ex: 32",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-3 text-sm text-slate-900 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"},null,512),[[g,o.value.age,void 0,{number:!0}]])]),c(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>o.value.unite_age=s),class:"w-24 rounded-xl border border-slate-200 bg-white px-3 py-2.5 text-sm text-slate-900 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"},[...t[84]||(t[84]=[e("option",{value:"Ans"},"Ans",-1),e("option",{value:"Mois"},"Mois",-1),e("option",{value:"Jours"},"Jours",-1)])],512),[[O,o.value.unite_age]])])),u.value.date_naissance?(r(),a("p",ks,[...t[85]||(t[85]=[e("em",{class:"ni ni-info-circle"},null,-1),n(" Calcul auto. ",-1)])])):(r(),a("p",ys,[...t[86]||(t[86]=[e("em",{class:"ni ni-info-circle"},null,-1),n(" Ajoutez une date pour calcul auto. ",-1)])]))])])]),e("div",hs,[e("div",ws,[t[88]||(t[88]=e("label",{class:"block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-clipboard mr-1.5 text-purple-600 dark:text-purple-300"}),n(" Renseignements cliniques ")],-1)),e("span",_s,i(String(o.value.renseignement_clinique||"").length)+" caracteres",1)]),e("div",js,[c(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=s=>o.value.renseignement_clinique=s),rows:"4",placeholder:"Decrivez les symptomes, antecedents medicaux, indications speciales, allergies connues...",class:"w-full resize-none rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 placeholder-slate-400 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[g,o.value.renseignement_clinique]]),t[89]||(t[89]=e("div",{class:"pointer-events-none absolute right-3 top-3 text-slate-400 dark:text-slate-500"},[e("em",{class:"ni ni-edit text-sm"})],-1))]),t[90]||(t[90]=e("div",{class:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-slate-600 dark:text-slate-400"},[e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-shield-check text-emerald-600 dark:text-emerald-300"}),n(" Informations confidentielles ")]),e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-lock text-blue-600 dark:text-blue-300"}),n(" Donnees securisees ")])],-1))]),t[94]||(t[94]=e("div",{class:"rounded-xl border border-indigo-200/60 bg-indigo-50/70 p-4 dark:border-indigo-800/40 dark:bg-indigo-900/10"},[e("div",{class:"flex items-start gap-3"},[e("div",{class:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-indigo-600 shadow-sm"},[e("em",{class:"ni ni-bulb text-sm text-white"})]),e("div",null,[e("h4",{class:"text-sm font-semibold text-indigo-900 dark:text-indigo-200"},"Conseils pour une prescription optimale"),e("div",{class:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-2 text-xs text-indigo-800 dark:text-indigo-300"},[e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"}),n("Naissance -> age calcule")]),e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"}),n("Verifier les allergies connues")]),e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"}),n("Noter les traitements en cours")])])])])],-1)),e("div",Cs,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-100 px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-200 sm:w-auto dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",onClick:t[16]||(t[16]=s=>N("patient"))},[...t[91]||(t[91]=[e("em",{class:"ni ni-arrow-left"},null,-1),n(" Retour patient ",-1)])]),t[93]||(t[93]=e("span",{class:"hidden items-center gap-2 text-xs text-slate-500 sm:inline-flex dark:text-slate-400"},[e("span",{class:"inline-flex items-center gap-1"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-cyan-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-slate-300 dark:bg-slate-600"})]),n(" Etape 2/7 ")],-1)),e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700 sm:w-auto",onClick:t[17]||(t[17]=s=>N("analyses"))},[...t[92]||(t[92]=[n(" Continuer vers analyses ",-1),e("em",{class:"ni ni-arrow-right"},null,-1)])])])])])):x("",!0),_.value==="analyses"?(r(),a("section",Ns,[e("div",Rs,[e("div",As,[t[98]||(t[98]=e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-green-600 shadow-sm"},[e("em",{class:"ni ni-filter text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},"Analyses"),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Recherchez et selectionnez les analyses prescrites.")])],-1)),e("div",Ss,[p.value.length>0?(r(),a("span",qs,[t[96]||(t[96]=e("em",{class:"ni ni-check-circle"},null,-1)),n(" "+i(p.value.length)+" selectionnees ",1)])):x("",!0),t[97]||(t[97]=e("span",{class:"hidden items-center gap-2 text-xs text-slate-500 sm:inline-flex dark:text-slate-400"},[e("span",{class:"inline-flex items-center gap-1"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-cyan-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-green-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-slate-300 dark:bg-slate-600"})]),n(" Etape 3/7 ")],-1))])])]),e("div",Us,[e("div",$s,[e("div",Es,[t[101]||(t[101]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-search mr-1.5 text-green-600 dark:text-green-300"}),n(" Rechercher une analyse ")],-1)),e("div",Ps,[t[100]||(t[100]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-search text-base text-slate-400 dark:text-slate-500"})],-1)),c(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>E.value=s),type:"text",placeholder:"Code ou designation...",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 placeholder-slate-400 transition focus:border-green-500 focus:outline-none focus:ring-4 focus:ring-green-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500",onInput:fe},null,544),[[g,E.value]]),E.value?(r(),a("button",{key:0,type:"button",class:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 transition hover:text-red-500 dark:hover:text-red-400",onClick:t[19]||(t[19]=s=>{E.value="",P.value=[]})},[...t[99]||(t[99]=[e("em",{class:"ni ni-cross-circle text-lg"},null,-1)])])):x("",!0)]),P.value.length>0?(r(),a("div",Ms,[(r(!0),a(A,null,S(P.value,s=>{var m,R;return r(),a("div",{key:s.id,class:"flex items-center justify-between rounded-xl border border-slate-200 p-3 transition-colors hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700/40"},[e("div",null,[e("div",Ts,[e("p",Is,i(s.designation),1),s.is_parent?(r(),a("span",Vs," Panel ("+i(((m=s.enfants_inclus)==null?void 0:m.length)||0)+") ",1)):x("",!0)]),e("p",Fs,[n(i(s.code)+" | "+i(k(s.prix))+" ",1),s.parent_nom&&!s.is_parent?(r(),a("span",zs,"Â· "+i(s.parent_nom),1)):x("",!0)]),s.is_parent&&((R=s.enfants_inclus)==null?void 0:R.length)>0?(r(),a("p",Ls," Inclut : "+i(s.enfants_inclus.join(", ")),1)):x("",!0)]),e("button",{type:"button",class:y(["shrink-0 rounded-lg px-2.5 py-1.5 text-xs font-medium transition-colors",J(s.id)?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white"]),disabled:J(s.id),onClick:L=>ke(s)},[e("em",{class:y(["ni text-xs",J(s.id)?"ni-check":"ni-plus"])},null,2)],10,Ds)])}),128))])):x("",!0)]),e("div",Xs,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-100 px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-200 sm:w-auto dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",onClick:t[20]||(t[20]=s=>N("clinique"))},[...t[102]||(t[102]=[e("em",{class:"ni ni-arrow-left"},null,-1),n(" Retour clinique ",-1)])]),e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700 sm:w-auto",onClick:t[21]||(t[21]=s=>N("prelevements"))},[...t[103]||(t[103]=[n(" Continuer vers prelevements ",-1),e("em",{class:"ni ni-arrow-right"},null,-1)])])])]),e("div",Js,[e("div",Os,[t[105]||(t[105]=e("h3",{class:"mb-3 text-sm font-medium text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-bag mr-1.5 text-xs"}),n("Analyses selectionnees ")],-1)),p.value.length===0?(r(),a("div",Bs," Aucune analyse selectionnee ")):(r(),a("div",Hs,[(r(!0),a(A,null,S(p.value,s=>(r(),a("div",{key:s.id,class:"flex items-start justify-between"},[e("div",Gs,[e("div",Ws,[e("span",Qs,i(s.code),1),e("div",Ys,i(s.designation),1)]),e("div",Zs,i(s.parent_nom||(s.parent,"Analyse individuelle")),1),s.is_parent?(r(),a("span",Ks," Panel complet ")):x("",!0)]),e("div",el,[e("div",tl,i((s.prix_effectif||s.prix)>0?k(s.prix_effectif||s.prix):"Inclus"),1),e("button",{type:"button",class:"text-xxs text-red-500 transition-colors hover:text-red-600",onClick:m=>ye(s.id)},[...t[104]||(t[104]=[e("em",{class:"ni ni-cross text-xs"},null,-1)])],8,sl)])]))),128))]))]),e("div",ll,[e("div",rl,[t[106]||(t[106]=e("span",{class:"font-medium text-green-800 dark:text-green-200"},"Sous-total analyses",-1)),e("span",al,i(k(D.value)),1)])])])])])):x("",!0),_.value==="prelevements"?(r(),a("section",nl,[e("div",il,[e("div",ol,[t[109]||(t[109]=e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-yellow-500 shadow-sm"},[e("em",{class:"ni ni-package text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},"Prelevements"),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Selection optionnelle des prelevements requis.")])],-1)),e("div",dl,[w.value.length>0?(r(),a("span",ul,[t[107]||(t[107]=e("em",{class:"ni ni-check-circle"},null,-1)),n(" "+i(w.value.length)+" selectionnes ",1)])):x("",!0),t[108]||(t[108]=e("span",{class:"hidden items-center gap-2 text-xs text-slate-500 sm:inline-flex dark:text-slate-400"}," Etape 4/7 ",-1))])])]),e("div",xl,[e("div",cl,[e("div",ml,[t[112]||(t[112]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-search mr-1.5 text-yellow-600 dark:text-yellow-300"}),n(" Rechercher un prelevement ")],-1)),e("div",pl,[t[111]||(t[111]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-search text-base text-slate-400 dark:text-slate-500"})],-1)),c(e("input",{"onUpdate:modelValue":t[22]||(t[22]=s=>M.value=s),type:"text",placeholder:"Tapez le nom du prelevement...",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 placeholder-slate-400 transition focus:border-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500",onInput:ve},null,544),[[g,M.value]]),M.value?(r(),a("button",{key:0,type:"button",class:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 transition hover:text-red-500 dark:hover:text-red-400",onClick:t[23]||(t[23]=s=>{M.value="",T.value=[]})},[...t[110]||(t[110]=[e("em",{class:"ni ni-cross-circle text-lg"},null,-1)])])):x("",!0)])]),T.value.length>0?(r(),a("div",bl,[(r(!0),a(A,null,S(T.value,s=>(r(),a("div",{key:s.id,class:y(["flex items-start justify-between rounded-xl border border-slate-200 p-2.5 transition-colors hover:border-yellow-300 hover:bg-yellow-50/50 dark:border-slate-700 dark:hover:border-yellow-500 dark:hover:bg-slate-700/40",V(s.id)?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300 dark:border-yellow-600":""])},[e("div",gl,[t[114]||(t[114]=e("div",{class:"flex h-6 w-6 shrink-0 items-center justify-center rounded-lg bg-gradient-to-br from-yellow-500 to-orange-600 text-white"},[e("em",{class:"ni ni-flask text-xs"})],-1)),e("div",fl,[e("p",vl,i(s.denomination),1),e("div",kl,[e("span",yl,[t[113]||(t[113]=e("em",{class:"ni ni-money mr-0.5 text-xs"},null,-1)),n(" "+i(k(s.prix)),1)]),V(s.id)?(r(),a("span",hl,"âœ“ AjoutÃ©")):x("",!0)])])]),e("button",{type:"button",class:y(["ml-2 shrink-0 rounded-lg px-2.5 py-1.5 text-xs font-medium transition-colors",V(s.id)?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 cursor-not-allowed":"bg-yellow-500 hover:bg-yellow-600 text-white"]),disabled:V(s.id),onClick:m=>he(s)},[e("em",{class:y(["ni text-xs",V(s.id)?"ni-check":"ni-plus"])},null,2)],10,wl)],2))),128))])):x("",!0),e("div",_l,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-100 px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-200 sm:w-auto dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",onClick:t[24]||(t[24]=s=>N("analyses"))},[...t[115]||(t[115]=[e("em",{class:"ni ni-arrow-left"},null,-1),n(" Retour analyses ",-1)])]),e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700 sm:w-auto",onClick:t[25]||(t[25]=s=>N("paiement"))},[...t[116]||(t[116]=[n(" Continuer vers paiement ",-1),e("em",{class:"ni ni-arrow-right"},null,-1)])])])]),e("div",jl,[t[120]||(t[120]=e("h3",{class:"mb-3 text-sm font-semibold text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-package mr-1.5 text-xs text-yellow-500"}),n("Prelevements selectionnes ")],-1)),w.value.length===0?(r(),a("div",Cl," Aucun prelevement selectionne ")):(r(),a("div",Nl,[(r(!0),a(A,null,S(w.value,s=>(r(),a("div",{key:s.id,class:"rounded-xl border border-yellow-200 bg-white p-3 dark:border-yellow-700 dark:bg-slate-800"},[e("div",Rl,[e("div",null,[e("p",Al,i(s.denomination),1),e("p",Sl,i(k(s.prix)),1)]),e("button",{type:"button",class:"text-xs text-red-600 hover:text-red-700",onClick:m=>we(s.id)},[...t[117]||(t[117]=[e("em",{class:"ni ni-cross"},null,-1)])],8,ql)]),e("div",Ul,[t[118]||(t[118]=e("label",{class:"text-xxs text-slate-600 dark:text-slate-400"},"Quantite",-1)),c(e("input",{"onUpdate:modelValue":m=>s.quantite=m,type:"number",min:"1",max:"10",class:"w-16 rounded-lg border border-slate-300 bg-white px-2 py-1 text-center text-xs text-slate-900 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"},null,8,$l),[[g,s.quantite,void 0,{number:!0}]])])]))),128))])),e("div",El,[e("div",Pl,[t[119]||(t[119]=e("span",{class:"font-medium text-slate-800 dark:text-slate-100"},"Total prelevements",-1)),e("span",Ml,i(k(X.value)),1)])])])])])):x("",!0),_.value==="paiement"?(r(),a("section",Tl,[e("div",Il,[e("div",Vl,[t[122]||(t[122]=e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-red-500 shadow-sm"},[e("em",{class:"ni ni-coin text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},"Paiement & Facturation"),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Finalisation de la prescription.")])],-1)),e("div",Fl,[e("div",zl,i(k(Y.value)),1),t[121]||(t[121]=e("div",{class:"text-xs text-slate-500 dark:text-slate-400"},"Total a payer",-1))])])]),e("div",Ll,[e("div",Dl,[e("div",Xl,[t[128]||(t[128]=e("h3",{class:"mb-3 text-sm font-semibold text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-calculator mr-1.5 text-xs text-green-500"}),n("Resume financier ")],-1)),e("div",Jl,[e("div",Ol,[t[123]||(t[123]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Sous-total analyses",-1)),e("span",Bl,i(k(D.value)),1)]),e("div",Hl,[t[124]||(t[124]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Sous-total prelevements",-1)),e("span",Gl,i(k(X.value)),1)]),e("div",Wl,[t[125]||(t[125]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Frais urgence",-1)),e("span",Ql,i(k(W.value)),1)]),e("div",Yl,[t[126]||(t[126]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Remise",-1)),e("span",Zl,"- "+i(k(Q.value)),1)]),e("div",Kl,[e("div",er,[t[127]||(t[127]=e("span",{class:"text-sm font-semibold text-red-800 dark:text-red-200"},"Total final",-1)),e("span",tr,i(k(Y.value)),1)])])])])]),e("div",sr,[e("div",lr,[t[132]||(t[132]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-wallet mr-1.5 text-red-600 dark:text-red-300"}),n(" Mode de paiement ")],-1)),e("div",rr,[t[130]||(t[130]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-wallet text-base text-slate-400 dark:text-slate-500"})],-1)),c(e("select",{"onUpdate:modelValue":t[26]||(t[26]=s=>f.value.payment_method=s),class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 transition hover:border-slate-300 focus:border-red-500 focus:outline-none focus:ring-4 focus:ring-red-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:hover:border-slate-500"},[t[129]||(t[129]=e("option",{value:""},"Selectionner...",-1)),(r(!0),a(A,null,S(F.paymentMethods,s=>(r(),a("option",{key:s.code,value:s.code},i(s.label),9,ar))),128))],512),[[O,f.value.payment_method]]),t[131]||(t[131]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("em",{class:"ni ni-chevron-down text-xs text-slate-400 dark:text-slate-500"})],-1))])]),e("div",nr,[t[135]||(t[135]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-percent mr-1.5 text-orange-600 dark:text-orange-300"}),n(" Remise (%) ")],-1)),e("div",ir,[t[133]||(t[133]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-percent text-base text-slate-400 dark:text-slate-500"})],-1)),c(e("input",{"onUpdate:modelValue":t[27]||(t[27]=s=>f.value.remise=s),type:"number",min:"0",max:"100",placeholder:"0",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-12 text-sm text-slate-900 placeholder-slate-400 transition focus:border-red-500 focus:outline-none focus:ring-4 focus:ring-red-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[g,f.value.remise,void 0,{number:!0}]]),t[134]||(t[134]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("span",{class:"text-xs font-semibold text-slate-500 dark:text-slate-400"},"%")],-1))])]),e("label",{class:y(["flex w-full cursor-pointer items-center gap-3 rounded-xl border-2 border-slate-200 bg-white p-4 transition hover:border-slate-300 hover:shadow-sm dark:border-slate-600 dark:bg-slate-800 dark:hover:border-slate-500",f.value.paiement_statut?"border-emerald-500 bg-emerald-50 dark:border-emerald-600 dark:bg-emerald-900/15":""])},[c(e("input",{"onUpdate:modelValue":t[28]||(t[28]=s=>f.value.paiement_statut=s),type:"checkbox",class:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500 dark:border-slate-600"},null,512),[[qe,f.value.paiement_statut]]),t[136]||(t[136]=e("div",null,[e("span",{class:"text-sm font-semibold text-slate-800 dark:text-slate-200"},"Marquer comme paye"),e("p",{class:"mt-0.5 text-xs text-slate-500 dark:text-slate-400"},"La date de paiement sera enregistree automatiquement.")],-1))],2)])]),e("div",or,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-100 px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-200 sm:w-auto dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",onClick:t[29]||(t[29]=s=>N("prelevements"))},[...t[137]||(t[137]=[e("em",{class:"ni ni-arrow-left"},null,-1),n(" Retour prelevements ",-1)])]),e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-emerald-700 disabled:opacity-50 sm:w-auto",disabled:z.value,onClick:_e},[z.value?(r(),a("span",ur,"Enregistrement...")):(r(),a("span",xr,[...t[138]||(t[138]=[e("em",{class:"ni ni-check-circle"},null,-1),n(" Terminer et enregistrer",-1)])]))],8,dr)])])):x("",!0)])]}),_:1}))}};export{fr as default};
