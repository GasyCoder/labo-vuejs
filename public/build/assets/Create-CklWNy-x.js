import{r as x,s as ce,b as Y,d as t,c as n,g as k,a as ge,u as ye,y as ke,p,t as i,i as _,H as fe,o as r,F as f,f as h,n as N,e as u,v as b,x as A,q as he,l as we}from"./app-CiuF_e4D.js";import{_ as _e}from"./AppLayout-BkGK7l-O.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const Ce={class:"px-3 py-3 space-y-4"},Re={class:"mb-3"},Ne={class:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 p-4"},Ue={class:"flex items-center justify-between mb-4"},qe={class:"text-slate-500 dark:text-slate-400 mt-1 text-xs"},Se={class:"font-semibold"},Pe={class:"text-right"},Ae={class:"text-xs text-slate-500 dark:text-slate-400"},$e={class:"text-xxs text-slate-400 dark:text-slate-500"},Te={class:"relative"},je={class:"absolute top-4 left-4 right-4 h-0.5 bg-gray-100 dark:bg-slate-600 z-0"},Me={class:"flex items-center justify-between relative z-10"},Ve=["onClick"],Ee={key:0,class:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200/70 dark:border-slate-700/80 overflow-hidden"},Ie={class:"p-5 space-y-4"},Fe={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Le={key:0,class:"space-y-3"},Xe={class:"rounded-xl border border-slate-200/70 dark:border-slate-700/70 bg-white dark:bg-slate-800 p-4"},De={key:0,class:"rounded-xl border border-slate-200/70 dark:border-slate-700/70 bg-white dark:bg-slate-800 p-4"},ze={class:"space-y-2 max-h-72 overflow-auto"},He=["onClick"],Je={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Be={class:"text-xs text-slate-500 dark:text-slate-400"},Ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Oe=["value"],We={class:"flex justify-end"},Qe={key:1,class:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200/70 dark:border-slate-700/80 overflow-hidden"},Ye={class:"p-5 grid grid-cols-1 md:grid-cols-2 gap-4"},Ze=["value"],Ke={class:"px-5 pb-5 flex justify-between"},et={key:2,class:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 p-4"},tt={key:0,class:"mt-3 space-y-2 max-h-80 overflow-auto"},st={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},lt={class:"text-xs text-slate-500 dark:text-slate-400"},at=["onClick"],rt={class:"mt-4 p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/40"},nt={key:0,class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},ot={key:1,class:"mt-2 space-y-2"},dt={class:"text-slate-700 dark:text-slate-300"},it=["onClick"],ut={class:"mt-4 flex justify-between"},pt={key:3,class:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 p-4"},mt={class:"mt-3"},xt={key:0,class:"mt-3 space-y-2 max-h-72 overflow-auto"},bt={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},vt={class:"text-xs text-slate-500 dark:text-slate-400"},ct=["onClick"],gt={class:"mt-4 p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/40"},yt={key:0,class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},kt={key:1,class:"mt-2 space-y-2"},ft={class:"text-sm text-slate-700 dark:text-slate-300"},ht={class:"flex items-center gap-2"},wt=["onUpdate:modelValue"],_t=["onClick"],Ct={class:"mt-4 flex justify-between"},Rt={key:4,class:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 p-4"},Nt={class:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},Ut=["value"],qt={class:"inline-flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300"},St={class:"mt-4 p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/40 text-sm"},Pt={class:"flex justify-between"},At={class:"flex justify-between"},$t={class:"flex justify-between"},Tt={class:"flex justify-between"},jt={class:"flex justify-between font-semibold border-t border-slate-300 dark:border-slate-600 mt-2 pt-2"},Mt={class:"mt-4 flex justify-between"},Vt=["disabled"],Et={key:0},It={key:1},Ht={__name:"Create",props:{prescripteurs:{type:Array,default:()=>[]},paymentMethods:{type:Array,default:()=>[]},defaultReference:{type:String,default:""},urgenceFees:{type:Object,default:()=>({jour:0,nuit:0})},civilites:{type:Array,default:()=>[]}},setup(U){var Q;const q=U,R=[{key:"patient",icon:"user",label:"Patient"},{key:"clinique",icon:"list-round",label:"Clinique"},{key:"analyses",icon:"filter",label:"Analyses"},{key:"prelevements",icon:"package",label:"Prelevements"},{key:"paiement",icon:"coin-alt",label:"Paiement"}],g=x("patient"),S=x(!1),$=x(!1),T=x(""),P=x([]),j=x(null);let F=null;const M=x(""),V=x([]),v=x([]);let L=null;const X=x(""),E=x([]),w=x([]);let D=null;const d=x({nom:"",prenom:"",civilite:q.civilites[0]||"Monsieur",date_naissance:"",telephone:"",email:"",adresse:""}),o=x({prescripteur_id:"",patient_type:"EXTERNE",age:0,unite_age:"Ans",poids:"",renseignement_clinique:""}),c=x({payment_method:((Q=q.paymentMethods[0])==null?void 0:Q.code)||"",remise:0,paiement_statut:!0}),Z=_(()=>new Date().toLocaleString("fr-FR")),z=_(()=>R.findIndex(l=>l.key===g.value)),K=_(()=>R.length<=1?0:z.value/(R.length-1)*100),H=_(()=>{let l=0;const e=new Set;return v.value.forEach(a=>{if(a.level==="PARENT"){l+=Number(a.prix||0),e.add(a.id);return}if(!(a.parent_id&&e.has(a.parent_id))){if(a.parent_id&&a.parent&&Number(a.parent.prix||0)>0){l+=Number(a.parent.prix||0),e.add(a.parent_id);return}l+=Number(a.prix||0)}}),l}),J=_(()=>w.value.reduce((l,e)=>{const a=Math.max(1,Number(e.quantite||1)),s=Number(e.prix_promotion||0),m=a>1&&s>0?s:Number(e.prix||0);return l+m*a},0)),B=_(()=>o.value.patient_type==="URGENCE-JOUR"?Number(q.urgenceFees.jour||0):o.value.patient_type==="URGENCE-NUIT"?Number(q.urgenceFees.nuit||0):0),G=_(()=>{const l=Math.max(0,Number(c.value.remise||0));return(H.value+J.value)*(l/100)}),ee=_(()=>{const l=H.value+J.value;return Math.max(0,l-G.value+B.value)}),C=l=>`${Number(l||0).toLocaleString("fr-FR")} Ar`,te=l=>R.findIndex(a=>a.key===l.key)<z.value?"bg-green-500 text-white shadow-sm":l.key===g.value?"bg-primary-500 text-white shadow-md scale-110":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 hover:bg-gray-200 dark:hover:bg-slate-600",se=l=>R.findIndex(a=>a.key===l.key)<z.value?"text-green-600 dark:text-green-400":l.key===g.value?"text-primary-600 dark:text-primary-400":"text-slate-500 dark:text-slate-400",O=l=>{S.value=l,l&&(j.value=null,P.value=[])},le=l=>{j.value=l,S.value=!1,d.value={nom:l.nom||"",prenom:l.prenom||"",civilite:l.civilite||q.civilites[0]||"Monsieur",date_naissance:l.date_naissance||"",telephone:l.telephone||"",email:l.email||"",adresse:l.adresse||""},o.value.age=Number(l.age||0),o.value.unite_age=l.unite_age||"Ans"},ae=()=>{const l=d.value.date_naissance;if(!l)return;const e=new Date(l),a=new Date,s=1440*60*1e3,m=Math.floor((a.getTime()-e.getTime())/s),I=Math.floor(m/30.4375),ve=Math.floor(I/12);if(m<=60){o.value.age=m,o.value.unite_age="Jours";return}if(I<24){o.value.age=I,o.value.unite_age="Mois";return}o.value.age=ve,o.value.unite_age="Ans"},y=async l=>{l==="clinique"&&!d.value.nom.trim()||l==="analyses"&&!o.value.prescripteur_id||l==="prelevements"&&v.value.length===0||l==="paiement"&&v.value.length===0||(g.value=l,l==="prelevements"&&E.value.length===0&&await W(""))},re=async l=>{const a=await(await fetch(`${route("secretaire.prescription.lookup.patients")}?q=${encodeURIComponent(l)}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();P.value=a.data||[]},ne=async l=>{const a=await(await fetch(`${route("secretaire.prescription.lookup.analyses")}?q=${encodeURIComponent(l)}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();V.value=a.data||[]},W=async l=>{const a=await(await fetch(`${route("secretaire.prescription.lookup.prelevements")}?q=${encodeURIComponent(l)}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();E.value=a.data||[]},oe=()=>{F&&window.clearTimeout(F),F=window.setTimeout(async()=>{if(T.value.trim().length<2){P.value=[];return}await re(T.value.trim())},300)},de=()=>{L&&window.clearTimeout(L),L=window.setTimeout(async()=>{if(M.value.trim().length<2){V.value=[];return}await ne(M.value.trim())},250)},ie=()=>{D&&window.clearTimeout(D),D=window.setTimeout(async()=>{await W(X.value.trim())},250)},ue=l=>{v.value.some(e=>e.id===l.id)||v.value.push(l)},pe=l=>{v.value=v.value.filter(e=>e.id!==l)},me=l=>{w.value.some(e=>e.id===l.id)||w.value.push({...l,quantite:1})},xe=l=>{w.value=w.value.filter(e=>e.id!==l)},be=()=>{var e;if(!d.value.nom.trim()||!o.value.prescripteur_id||v.value.length===0||!c.value.payment_method)return;$.value=!0;const l={patient_id:((e=j.value)==null?void 0:e.id)??null,patient:{nom:d.value.nom,prenom:d.value.prenom,civilite:d.value.civilite,date_naissance:d.value.date_naissance||null,telephone:d.value.telephone||null,email:d.value.email||null,adresse:d.value.adresse||null},prescripteur_id:Number(o.value.prescripteur_id),patient_type:o.value.patient_type,age:Number(o.value.age||0),unite_age:o.value.unite_age,poids:o.value.poids===""?null:Number(o.value.poids),renseignement_clinique:o.value.renseignement_clinique||null,analyse_ids:v.value.map(a=>a.id),prelevements:w.value.map(a=>({id:a.id,quantite:Math.max(1,Number(a.quantite||1))})),payment_method:c.value.payment_method,remise:Math.max(0,Number(c.value.remise||0)),paiement_statut:!!c.value.paiement_statut};we.post(route("secretaire.prescription.store"),l,{preserveScroll:!0,onFinish:()=>{$.value=!1}})};return(l,e)=>(r(),ce(_e,null,{default:Y(()=>{var a;return[t("div",Ce,[t("div",Re,[ge(ye(ke),{href:l.route("secretaire.prescription.index"),class:"inline-flex items-center px-3 py-1.5 bg-gray-50 dark:bg-slate-700 text-gray-600 dark:text-slate-300 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-600 transition-colors text-sm"},{default:Y(()=>[...e[29]||(e[29]=[t("em",{class:"ni ni-arrow-left mr-1.5 text-xs"},null,-1),p(" Retour a la liste ",-1)])]),_:1},8,["href"])]),t("div",Ne,[t("div",Ue,[t("div",null,[e[31]||(e[31]=t("h1",{class:"text-base font-semibold text-slate-800 dark:text-slate-100 flex items-center"},[t("em",{class:"ni ni-dashlite text-primary-500 mr-2 text-sm"}),p(" Nouvelle Prescription ")],-1)),t("p",qe,[e[30]||(e[30]=p(" Reference: ",-1)),t("span",Se,i(U.defaultReference),1)])]),t("div",Pe,[t("div",Ae,i(Z.value),1),t("div",$e,"Cree par: "+i((a=l.$page.props.auth.user)==null?void 0:a.name),1)])]),t("div",Te,[t("div",je,[t("div",{class:"h-full bg-gradient-to-r from-primary-400 to-green-400 transition-all duration-300",style:fe({width:`${K.value}%`})},null,4)]),t("div",Me,[(r(),n(f,null,h(R,s=>t("div",{key:s.key,class:"flex flex-col items-center"},[t("button",{type:"button",class:N(["relative w-8 h-8 rounded-full flex items-center justify-center mb-1.5 transition-all duration-200",te(s)]),onClick:m=>y(s.key)},[t("em",{class:N(`ni ni-${s.icon} text-xs`)},null,2)],10,Ve),t("span",{class:N(["text-xxs font-medium block",se(s)])},i(s.label),3)])),64))])])]),g.value==="patient"?(r(),n("section",Ee,[e[37]||(e[37]=t("div",{class:"px-5 py-4 border-b border-slate-200/60 dark:border-slate-700/70"},[t("h2",{class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},"Patient - Selection / creation"),t("p",{class:"text-xs text-slate-600 dark:text-slate-400 mt-1"},"Selectionnez un patient existant ou creez un nouveau dossier.")],-1)),t("div",Ie,[t("div",Fe,[t("button",{type:"button",class:N(["w-full rounded-xl border-2 px-4 py-3 text-left transition",S.value?"border-slate-200 dark:border-slate-600 text-slate-800 dark:text-slate-100":"border-primary-600 bg-primary-50 dark:bg-primary-900/15 text-primary-700 dark:text-primary-300"]),onClick:e[0]||(e[0]=s=>O(!1))},[...e[32]||(e[32]=[t("div",{class:"text-sm font-semibold"},"Patient existant",-1),t("div",{class:"text-xs text-slate-600 dark:text-slate-400"},"Rechercher et selectionner",-1)])],2),t("button",{type:"button",class:N(["w-full rounded-xl border-2 px-4 py-3 text-left transition",S.value?"border-emerald-600 bg-emerald-50 dark:bg-emerald-900/15 text-emerald-700 dark:text-emerald-300":"border-slate-200 dark:border-slate-600 text-slate-800 dark:text-slate-100"]),onClick:e[1]||(e[1]=s=>O(!0))},[...e[33]||(e[33]=[t("div",{class:"text-sm font-semibold"},"Nouveau patient",-1),t("div",{class:"text-xs text-slate-600 dark:text-slate-400"},"Creer un dossier",-1)])],2)]),S.value?k("",!0):(r(),n("div",Le,[t("div",Xe,[e[34]||(e[34]=t("label",{class:"block text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2"},"Rechercher un patient",-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>T.value=s),type:"text",placeholder:"Nom, prenom, reference ou telephone...",class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100",onInput:oe},null,544),[[b,T.value]])]),P.value.length>0?(r(),n("div",De,[e[35]||(e[35]=t("h3",{class:"text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2"},"Resultats",-1)),t("div",ze,[(r(!0),n(f,null,h(P.value,s=>{var m;return r(),n("button",{key:s.id,type:"button",class:N(["w-full text-left p-3 rounded-xl border transition",((m=j.value)==null?void 0:m.id)===s.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/40"]),onClick:I=>le(s)},[t("p",Je,i(s.nom_complet),1),t("p",Be,i(s.numero_dossier||"-")+" | "+i(s.telephone||"Sans telephone"),1)],10,He)}),128))])])):k("",!0)])),t("div",Ge,[u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>d.value.nom=s),type:"text",placeholder:"Nom",class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},null,512),[[b,d.value.nom]]),u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>d.value.prenom=s),type:"text",placeholder:"Prenom",class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},null,512),[[b,d.value.prenom]]),u(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>d.value.civilite=s),class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},[(r(!0),n(f,null,h(U.civilites,s=>(r(),n("option",{key:s,value:s},i(s),9,Oe))),128))],512),[[A,d.value.civilite]]),u(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>d.value.date_naissance=s),type:"date",class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100",onChange:ae},null,544),[[b,d.value.date_naissance]]),u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>d.value.telephone=s),type:"text",placeholder:"Telephone",class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},null,512),[[b,d.value.telephone]]),u(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>d.value.email=s),type:"email",placeholder:"Email",class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},null,512),[[b,d.value.email]]),u(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>d.value.adresse=s),type:"text",placeholder:"Adresse",class:"w-full md:col-span-2 px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},null,512),[[b,d.value.adresse]])]),t("div",We,[t("button",{type:"button",class:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors text-sm",onClick:e[10]||(e[10]=s=>y("clinique"))},[...e[36]||(e[36]=[p(" Clinique ",-1),t("em",{class:"ni ni-arrow-right ml-1.5 text-xs"},null,-1)])])])])])):k("",!0),g.value==="clinique"?(r(),n("section",Qe,[e[43]||(e[43]=t("div",{class:"px-5 py-4 border-b border-slate-200/60 dark:border-slate-700/70 bg-gradient-to-r from-cyan-50 to-blue-50 dark:from-slate-800 dark:to-slate-800"},[t("h2",{class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},"Informations cliniques")],-1)),t("div",Ye,[u(t("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.value.prescripteur_id=s),class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},[e[38]||(e[38]=t("option",{value:""},"Selectionner un prescripteur",-1)),(r(!0),n(f,null,h(U.prescripteurs,s=>(r(),n("option",{key:s.id,value:s.id},i(s.nom_complet),9,Ze))),128))],512),[[A,o.value.prescripteur_id]]),u(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.value.patient_type=s),class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},[...e[39]||(e[39]=[t("option",{value:"EXTERNE"},"Externe",-1),t("option",{value:"HOSPITALISE"},"Hospitalise",-1),t("option",{value:"URGENCE-JOUR"},"Urgence Jour",-1),t("option",{value:"URGENCE-NUIT"},"Urgence Nuit",-1)])],512),[[A,o.value.patient_type]]),u(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.value.age=s),type:"number",min:"0",max:"150",placeholder:"Age",class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},null,512),[[b,o.value.age,void 0,{number:!0}]]),u(t("select",{"onUpdate:modelValue":e[14]||(e[14]=s=>o.value.unite_age=s),class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},[...e[40]||(e[40]=[t("option",{value:"Ans"},"Ans",-1),t("option",{value:"Mois"},"Mois",-1),t("option",{value:"Jours"},"Jours",-1)])],512),[[A,o.value.unite_age]]),u(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>o.value.poids=s),type:"number",min:"0",step:"0.1",placeholder:"Poids (kg)",class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},null,512),[[b,o.value.poids,void 0,{number:!0}]]),u(t("textarea",{"onUpdate:modelValue":e[16]||(e[16]=s=>o.value.renseignement_clinique=s),rows:"3",placeholder:"Renseignement clinique",class:"w-full md:col-span-2 px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},null,512),[[b,o.value.renseignement_clinique]])]),t("div",Ke,[t("button",{type:"button",class:"px-3 py-2 bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-slate-300 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors text-sm",onClick:e[17]||(e[17]=s=>y("patient"))},[...e[41]||(e[41]=[t("em",{class:"ni ni-arrow-left mr-1.5 text-xs"},null,-1),p("Patient ",-1)])]),t("button",{type:"button",class:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors text-sm",onClick:e[18]||(e[18]=s=>y("analyses"))},[...e[42]||(e[42]=[p(" Analyses ",-1),t("em",{class:"ni ni-arrow-right ml-1.5 text-xs"},null,-1)])])])])):k("",!0),g.value==="analyses"?(r(),n("section",et,[e[47]||(e[47]=t("h2",{class:"text-base font-semibold text-slate-800 dark:text-slate-100 mb-4"},[t("em",{class:"ni ni-test-tube text-green-500 text-sm mr-2"}),p("Recherche Analyses ")],-1)),u(t("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>M.value=s),type:"text",placeholder:"Code ou designation...",class:"w-full px-4 py-2.5 border border-gray-200 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onInput:de},null,544),[[b,M.value]]),V.value.length>0?(r(),n("div",tt,[(r(!0),n(f,null,h(V.value,s=>(r(),n("div",{key:s.id,class:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 flex items-center justify-between"},[t("div",null,[t("p",st,i(s.designation),1),t("p",lt,i(s.code)+" | "+i(C(s.prix)),1)]),t("button",{type:"button",class:"px-2.5 py-1.5 text-xs rounded bg-primary-500 hover:bg-primary-600 text-white",onClick:m=>ue(s)}," Ajouter ",8,at)]))),128))])):k("",!0),t("div",rt,[e[44]||(e[44]=t("p",{class:"text-sm font-medium text-slate-800 dark:text-slate-100"},"Analyses selectionnees",-1)),v.value.length===0?(r(),n("div",nt,"Aucune analyse selectionnee")):(r(),n("div",ot,[(r(!0),n(f,null,h(v.value,s=>(r(),n("div",{key:s.id,class:"flex items-center justify-between text-sm"},[t("span",dt,i(s.designation),1),t("button",{type:"button",class:"text-red-600 hover:text-red-700 text-xs",onClick:m=>pe(s.id)},"Retirer",8,it)]))),128))]))]),t("div",ut,[t("button",{type:"button",class:"px-3 py-2 bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-slate-300 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors text-sm",onClick:e[20]||(e[20]=s=>y("clinique"))},[...e[45]||(e[45]=[t("em",{class:"ni ni-arrow-left mr-1.5 text-xs"},null,-1),p("Clinique ",-1)])]),t("button",{type:"button",class:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors text-sm",onClick:e[21]||(e[21]=s=>y("prelevements"))},[...e[46]||(e[46]=[p(" Prelevements ",-1),t("em",{class:"ni ni-arrow-right ml-1.5 text-xs"},null,-1)])])])])):k("",!0),g.value==="prelevements"?(r(),n("section",pt,[e[51]||(e[51]=t("h2",{class:"text-base font-semibold text-slate-800 dark:text-slate-100"},[t("em",{class:"ni ni-package text-yellow-500 text-sm mr-2"}),p("Prelevements ")],-1)),t("div",mt,[u(t("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>X.value=s),type:"text",placeholder:"Rechercher un prelevement...",class:"w-full px-4 py-2.5 border border-gray-200 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",onInput:ie},null,544),[[b,X.value]])]),E.value.length>0?(r(),n("div",xt,[(r(!0),n(f,null,h(E.value,s=>(r(),n("div",{key:s.id,class:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 flex items-center justify-between"},[t("div",null,[t("p",bt,i(s.denomination),1),t("p",vt,i(C(s.prix)),1)]),t("button",{type:"button",class:"px-2.5 py-1.5 text-xs rounded bg-primary-500 hover:bg-primary-600 text-white",onClick:m=>me(s)}," Ajouter ",8,ct)]))),128))])):k("",!0),t("div",gt,[e[48]||(e[48]=t("p",{class:"text-sm font-medium text-slate-800 dark:text-slate-100"},"Prelevements selectionnes",-1)),w.value.length===0?(r(),n("div",yt,"Aucun prelevement selectionne")):(r(),n("div",kt,[(r(!0),n(f,null,h(w.value,s=>(r(),n("div",{key:s.id,class:"flex items-center justify-between gap-2"},[t("span",ft,i(s.denomination),1),t("div",ht,[u(t("input",{"onUpdate:modelValue":m=>s.quantite=m,type:"number",min:"1",max:"10",class:"w-16 px-2 py-1 text-xs rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"},null,8,wt),[[b,s.quantite,void 0,{number:!0}]]),t("button",{type:"button",class:"text-red-600 hover:text-red-700 text-xs",onClick:m=>xe(s.id)},"Retirer",8,_t)])]))),128))]))]),t("div",Ct,[t("button",{type:"button",class:"px-3 py-2 bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-slate-300 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors text-sm",onClick:e[23]||(e[23]=s=>y("analyses"))},[...e[49]||(e[49]=[t("em",{class:"ni ni-arrow-left mr-1.5 text-xs"},null,-1),p("Analyses ",-1)])]),t("button",{type:"button",class:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors text-sm",onClick:e[24]||(e[24]=s=>y("paiement"))},[...e[50]||(e[50]=[p(" Paiement ",-1),t("em",{class:"ni ni-arrow-right ml-1.5 text-xs"},null,-1)])])])])):k("",!0),g.value==="paiement"?(r(),n("section",Rt,[e[61]||(e[61]=t("h2",{class:"text-base font-semibold text-slate-800 dark:text-slate-100"},[t("em",{class:"ni ni-coin text-red-500 text-sm mr-2"}),p("Paiement & Facturation ")],-1)),t("div",Nt,[u(t("select",{"onUpdate:modelValue":e[25]||(e[25]=s=>c.value.payment_method=s),class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},[e[52]||(e[52]=t("option",{value:""},"Mode de paiement",-1)),(r(!0),n(f,null,h(U.paymentMethods,s=>(r(),n("option",{key:s.code,value:s.code},i(s.label),9,Ut))),128))],512),[[A,c.value.payment_method]]),u(t("input",{"onUpdate:modelValue":e[26]||(e[26]=s=>c.value.remise=s),type:"number",min:"0",max:"100",placeholder:"Remise (%)",class:"w-full px-4 py-2.5 text-sm rounded-xl bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-slate-100"},null,512),[[b,c.value.remise,void 0,{number:!0}]]),t("label",qt,[u(t("input",{"onUpdate:modelValue":e[27]||(e[27]=s=>c.value.paiement_statut=s),type:"checkbox",class:"rounded border-slate-300 dark:border-slate-600"},null,512),[[he,c.value.paiement_statut]]),e[53]||(e[53]=p(" Marquer comme paye ",-1))])]),t("div",St,[t("div",Pt,[e[54]||(e[54]=t("span",null,"Sous-total analyses",-1)),t("span",null,i(C(H.value)),1)]),t("div",At,[e[55]||(e[55]=t("span",null,"Sous-total prelevements",-1)),t("span",null,i(C(J.value)),1)]),t("div",$t,[e[56]||(e[56]=t("span",null,"Frais urgence",-1)),t("span",null,i(C(B.value)),1)]),t("div",Tt,[e[57]||(e[57]=t("span",null,"Remise",-1)),t("span",null,"- "+i(C(G.value)),1)]),t("div",jt,[e[58]||(e[58]=t("span",null,"Total",-1)),t("span",null,i(C(ee.value)),1)])]),t("div",Mt,[t("button",{type:"button",class:"px-3 py-2 bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-slate-300 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors text-sm",onClick:e[28]||(e[28]=s=>y("prelevements"))},[...e[59]||(e[59]=[t("em",{class:"ni ni-arrow-left mr-1.5 text-xs"},null,-1),p("Prelevements ",-1)])]),t("button",{type:"button",class:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors text-sm",disabled:$.value,onClick:be},[$.value?(r(),n("span",Et,"Enregistrement...")):(r(),n("span",It,[...e[60]||(e[60]=[p("Terminer ",-1),t("em",{class:"ni ni-check-circle ml-1.5 text-xs"},null,-1)])]))],8,Vt)])])):k("",!0)])]}),_:1}))}};export{Ht as default};
