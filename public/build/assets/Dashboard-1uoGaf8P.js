import{E as _,G as $,x as M,d as z,e as t,c as r,t as o,q as C,o as l,F as v,n as D,g as k,l as c,p as E,B as L}from"./app-C9wF-B7e.js";import{_ as S}from"./AppLayout-C43c5kxY.js";import{C as h}from"./auto-yb1cLV1l.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const I={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-9xl mx-auto"},V={class:"sm:flex sm:justify-between sm:items-center mb-8"},H={class:"mb-4 sm:mb-0"},P={class:"text-sm text-slate-500 dark:text-slate-400"},T={class:"grid grid-flow-col sm:auto-cols-max justify-start sm:justify-end gap-2"},N={class:"px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-sm shadow-sm text-sm font-medium text-slate-600 dark:text-slate-300"},q={class:"grid grid-cols-12 gap-6 mb-6"},F={class:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-slate-800 shadow-lg rounded-xl border border-slate-200 dark:border-slate-700"},W={class:"px-5 pt-5 pb-4"},O={class:"flex justify-between items-start mb-2"},Z={key:0,class:"w-4 h-4 fill-current mr-1",viewBox:"0 0 16 16"},G={key:1,class:"w-4 h-4 fill-current mr-1",viewBox:"0 0 16 16"},U={class:"text-sm font-medium"},Y={class:"text-3xl font-bold text-slate-800 dark:text-slate-100 mr-2"},J={class:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-slate-800 shadow-lg rounded-xl border border-slate-200 dark:border-slate-700"},K={class:"px-5 pt-5 pb-4"},Q={class:"text-3xl font-bold text-slate-800 dark:text-slate-100 mr-2"},X={class:"flex flex-col col-span-full sm:col-span-6 xl:col-span-4 bg-white dark:bg-slate-800 shadow-lg rounded-xl border border-slate-200 dark:border-slate-700"},tt={class:"px-5 pt-5 pb-4"},et={class:"text-3xl font-bold text-rose-500 mr-2"},st={class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},at={class:"font-bold text-slate-700 dark:text-slate-300"},lt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},rt={key:0,class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},ot={class:"text-3xl font-bold text-slate-800 dark:text-slate-100"},dt={key:1,class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},it={class:"text-3xl font-bold text-emerald-600 dark:text-emerald-400"},nt={key:2,class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},ct={class:"text-3xl font-bold text-indigo-600 dark:text-indigo-400"},bt={key:3,class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},mt={class:"text-3xl font-bold text-amber-500"},ut={key:4,class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},xt={class:"text-3xl font-bold text-emerald-600 dark:text-emerald-400"},pt={key:5,class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},gt={class:"text-3xl font-bold text-rose-500"},ft={class:"bg-white dark:bg-slate-800 shadow-sm rounded-xl border border-slate-200 dark:border-slate-700"},kt={class:"p-3"},ht={class:"my-1"},vt={key:0,class:"w-4 h-4 fill-current",viewBox:"0 0 16 16"},yt={key:1,class:"w-4 h-4 fill-current",viewBox:"0 0 16 16"},wt={key:2,class:"w-4 h-4 fill-current",viewBox:"0 0 16 16"},Ct={class:"grow flex items-center text-sm"},Dt={class:"text-slate-800 dark:text-slate-200 font-medium"},At={class:"shrink-0 text-sm text-slate-500 flex items-center ml-2"},Rt={key:0,class:"p-6 text-center text-slate-500"},Et={__name:"Dashboard",props:{stats:Object,strategicData:Object},setup(a){const n=a,A=L(),R=C(()=>A.props.auth.user.type),j=C(()=>{const s=new Date,e=String(s.getDate()).padStart(2,"0"),d=String(s.getMonth()+1).padStart(2,"0"),i=s.getFullYear(),g=String(s.getHours()).padStart(2,"0"),f=String(s.getMinutes()).padStart(2,"0");return`${e}/${d}/${i} √† ${g}:${f}`}),p=s=>Number(s||0).toLocaleString("fr-FR");let b=null,m=null,u=null,x=null;const B=()=>{if(!["superadmin","admin"].includes(R.value)||!n.strategicData)return;const s={indigo500:"#6366f1",sky500:"#0ea5e9",emerald500:"#10b981",rose500:"#f43f5e",amber500:"#f59e0b",slate200:"#e2e8f0",slate700:"#334155",slate600:"#475569"},e=document.documentElement.classList.contains("dark"),d=e?s.slate700:s.slate200,i=s.slate600,g=document.getElementById("revenueChart");g&&(b&&b.destroy(),b=new h(g,{type:"line",data:{labels:n.strategicData.revenueLast30Days.labels,datasets:[{label:"Revenu (Ar)",data:n.strategicData.revenueLast30Days.series,borderColor:s.indigo500,backgroundColor:"rgba(99, 102, 241, 0.1)",borderWidth:2,tension:.3,fill:!0,pointRadius:0,pointHoverRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:d},ticks:{color:i}},x:{grid:{display:!1},ticks:{color:i}}}}}));const f=document.getElementById("prescriptionsChart");f&&(m&&m.destroy(),m=new h(f,{type:"bar",data:{labels:n.strategicData.prescriptionsLast30Days.labels,datasets:[{label:"Prescriptions",data:n.strategicData.prescriptionsLast30Days.series,backgroundColor:s.sky500,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:d},ticks:{color:i}},x:{grid:{display:!1},ticks:{color:i}}}}}));const y=document.getElementById("topAnalysesChart");y&&(u&&u.destroy(),u=new h(y,{type:"pie",data:{labels:n.strategicData.topAnalyses.labels,datasets:[{data:n.strategicData.topAnalyses.series,backgroundColor:[s.indigo500,s.sky500,s.emerald500,s.amber500,s.rose500],borderWidth:e?2:1,borderColor:e?"#1e293b":"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:i}}}}}));const w=document.getElementById("paymentRatioChart");w&&(x&&x.destroy(),x=new h(w,{type:"doughnut",data:{labels:n.strategicData.paymentRatio.labels,datasets:[{data:n.strategicData.paymentRatio.series,backgroundColor:[s.emerald500,s.rose500],borderWidth:e?2:1,borderColor:e?"#1e293b":"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{color:i}}}}}))};return _(()=>{B()}),$(()=>{b&&b.destroy(),m&&m.destroy(),u&&u.destroy(),x&&x.destroy()}),(s,e)=>(l(),M(S,null,{default:z(()=>[t("div",I,[t("div",V,[t("div",H,[e[0]||(e[0]=t("h1",{class:"text-2xl md:text-3xl text-slate-800 dark:text-slate-100 font-bold mb-1"},"Tableau de bord strat√©gique üìà",-1)),t("p",P," Bienvenue, "+o(s.$page.props.auth.user.name),1)]),t("div",T,[t("div",N,o(j.value),1)])]),["superadmin","admin"].includes(s.$page.props.auth.user.type)?(l(),r(v,{key:0},[t("div",q,[t("div",F,[t("div",W,[t("header",O,[e[3]||(e[3]=t("h2",{class:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-2"},"CA du mois",-1)),t("div",{class:D(["flex items-center",a.strategicData.monthlyComparison.isPositive?"text-emerald-500":"text-rose-500"])},[a.strategicData.monthlyComparison.isPositive?(l(),r("svg",Z,[...e[1]||(e[1]=[t("path",{d:"M8 0L9.4 1.4 3.8 7H16v2H3.8l5.6 5.6L8 16 0 8z",transform:"scale(1 -1) translate(-16 -16)"},null,-1)])])):(l(),r("svg",G,[...e[2]||(e[2]=[t("path",{d:"M8 16l1.4-1.4-5.6-5.6H16V7H3.8l5.6-5.6L8 0 0 8z"},null,-1)])])),t("span",U,o(Math.abs(a.strategicData.monthlyComparison.growthPercentage))+"%",1)],2)]),t("div",Y,[k(o(p(a.strategicData.kpis.revenueThisMonth))+" ",1),e[4]||(e[4]=t("span",{class:"text-sm font-medium text-slate-500"},"Ar",-1))]),e[5]||(e[5]=t("div",{class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},"Compar√© au mois pr√©c√©dent",-1))])]),t("div",J,[t("div",K,[e[7]||(e[7]=t("header",{class:"flex justify-between items-start mb-2"},[t("h2",{class:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-2"},"Recettes du jour")],-1)),t("div",Q,[k(o(p(a.strategicData.kpis.revenueToday))+" ",1),e[6]||(e[6]=t("span",{class:"text-sm font-medium text-slate-500"},"Ar",-1))]),e[8]||(e[8]=t("div",{class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},"Total encaiss√© aujourd'hui",-1))])]),t("div",X,[t("div",tt,[e[11]||(e[11]=t("header",{class:"flex justify-between items-start mb-2"},[t("h2",{class:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-2"},"Impay√©s & Restes √† payer")],-1)),t("div",et,[k(o(p(a.strategicData.kpis.unpaidAmount))+" ",1),e[9]||(e[9]=t("span",{class:"text-sm font-medium text-slate-500"},"Ar",-1))]),t("div",st,[e[10]||(e[10]=k("Taux d'encaissement: ",-1)),t("span",at,o(a.strategicData.kpis.paymentRate)+"%",1)])])])]),e[12]||(e[12]=t("div",{class:"grid grid-cols-12 gap-6 mb-6"},[t("div",{class:"flex flex-col col-span-full xl:col-span-8 bg-white dark:bg-slate-800 shadow-lg rounded-xl border border-slate-200 dark:border-slate-700"},[t("header",{class:"px-5 py-4 border-b border-slate-100 dark:border-slate-700"},[t("h2",{class:"font-semibold text-slate-800 dark:text-slate-100"},"Evolution du Revenu (30 derniers jours)")]),t("div",{class:"p-5 flex-grow"},[t("div",{class:"h-72"},[t("canvas",{id:"revenueChart"})])])]),t("div",{class:"flex flex-col col-span-full xl:col-span-4 bg-white dark:bg-slate-800 shadow-lg rounded-xl border border-slate-200 dark:border-slate-700"},[t("header",{class:"px-5 py-4 border-b border-slate-100 dark:border-slate-700"},[t("h2",{class:"font-semibold text-slate-800 dark:text-slate-100"},"Encaissement du mois")]),t("div",{class:"p-5 flex-grow flex items-center justify-center"},[t("div",{class:"h-64 w-full"},[t("canvas",{id:"paymentRatioChart"})])])])],-1)),e[13]||(e[13]=t("div",{class:"grid grid-cols-12 gap-6"},[t("div",{class:"flex flex-col col-span-full xl:col-span-6 bg-white dark:bg-slate-800 shadow-lg rounded-xl border border-slate-200 dark:border-slate-700"},[t("header",{class:"px-5 py-4 border-b border-slate-100 dark:border-slate-700"},[t("h2",{class:"font-semibold text-slate-800 dark:text-slate-100"},"Volume Prescriptions (30 jours)")]),t("div",{class:"p-5 flex-grow"},[t("div",{class:"h-64"},[t("canvas",{id:"prescriptionsChart"})])])]),t("div",{class:"flex flex-col col-span-full xl:col-span-6 bg-white dark:bg-slate-800 shadow-lg rounded-xl border border-slate-200 dark:border-slate-700"},[t("header",{class:"px-5 py-4 border-b border-slate-100 dark:border-slate-700"},[t("h2",{class:"font-semibold text-slate-800 dark:text-slate-100"},"Analyses les plus demand√©es (Mois)")]),t("div",{class:"p-5 flex-grow flex items-center justify-center"},[t("div",{class:"h-64 w-full"},[t("canvas",{id:"topAnalysesChart"})])])])],-1))],64)):(l(),r(v,{key:1},[t("div",lt,[["secretaire"].includes(s.$page.props.auth.user.type)?(l(),r("div",rt,[e[14]||(e[14]=t("div",{class:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-1"},"Prescriptions du jour",-1)),t("div",ot,o(a.stats.finances.nb_paiements||0),1)])):c("",!0),["secretaire"].includes(s.$page.props.auth.user.type)?(l(),r("div",dt,[e[15]||(e[15]=t("div",{class:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-1"},"Recettes du jour",-1)),t("div",it,o(p(a.stats.finances.recettes_jour))+" Ar",1)])):c("",!0),["technicien","biologiste"].includes(s.$page.props.auth.user.type)?(l(),r("div",nt,[e[16]||(e[16]=t("div",{class:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-1"},"Analyses Termin√©es",-1)),t("div",ct,o(a.stats.analyses.terminees||0),1)])):c("",!0),["technicien","biologiste"].includes(s.$page.props.auth.user.type)?(l(),r("div",bt,[e[17]||(e[17]=t("div",{class:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-1"},"En attente / En Cours",-1)),t("div",mt,o((a.stats.analyses.en_attente||0)+(a.stats.analyses.en_cours||0)),1)])):c("",!0),["biologiste"].includes(s.$page.props.auth.user.type)?(l(),r("div",ut,[e[18]||(e[18]=t("div",{class:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-1"},"Valid√©es",-1)),t("div",xt,o(a.stats.analyses.valides||0),1)])):c("",!0),["technicien","biologiste"].includes(s.$page.props.auth.user.type)?(l(),r("div",pt,[e[19]||(e[19]=t("div",{class:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-1"},"Pathologiques",-1)),t("div",gt,o(a.stats.analyses.pathologiques||0),1)])):c("",!0)]),t("div",ft,[e[23]||(e[23]=t("header",{class:"px-5 py-4 border-b border-slate-100 dark:border-slate-700"},[t("h2",{class:"font-semibold text-slate-800 dark:text-slate-100"},"Activit√©s r√©centes")],-1)),t("div",kt,[t("ul",ht,[(l(!0),r(v,null,E(a.stats.activites,(d,i)=>(l(),r("li",{key:i,class:"flex px-2 py-3 border-b border-slate-100 dark:border-slate-700 last:border-0 last:pb-1"},[t("div",{class:D(["w-9 h-9 rounded-full shrink-0 flex items-center justify-center mr-3",{"bg-indigo-100 text-indigo-500 dark:bg-indigo-500/20":d.color==="indigo","bg-emerald-100 text-emerald-500 dark:bg-emerald-500/20":d.color==="green","bg-amber-100 text-amber-500 dark:bg-amber-500/20":d.color==="yellow","bg-blue-100 text-blue-500 dark:bg-blue-500/20":d.color==="blue"}])},[d.type==="patient"?(l(),r("svg",vt,[...e[20]||(e[20]=[t("path",{d:"M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-11c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5z"},null,-1)])])):d.type==="paiement"?(l(),r("svg",yt,[...e[21]||(e[21]=[t("path",{d:"M15 4c-.6 0-1 .4-1 1v6c0 .6.4 1 1 1s1-.4 1-1V5c0-.6-.4-1-1-1zm-3 0H4c-.6 0-1 .4-1 1v6c0 .6.4 1 1 1h8c.6 0 1-.4 1-1V5c0-.6-.4-1-1-1zM2 5H1c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1h1c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1z"},null,-1)])])):(l(),r("svg",wt,[...e[22]||(e[22]=[t("path",{d:"M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6z"},null,-1)])]))],2),t("div",Ct,[t("span",Dt,o(d.message),1)]),t("div",At,o(d.time),1)]))),128)),!a.stats.activites||a.stats.activites.length===0?(l(),r("li",Rt," Aucune activit√© r√©cente. ")):c("",!0)])])])],64))])]),_:1}))}};export{Et as default};
