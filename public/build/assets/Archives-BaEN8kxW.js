import{u as z,x as K,d as de,e,t as l,c as g,j as A,f as L,b as x,l as le,o as m,F as j,p as N,v as Z,g as D,s as ue,n as ce,r as W,i as ee,C as me}from"./app-DB0nFYEe.js";import{_ as fe}from"./AppLayout-Dr0HkjGz.js";import{d as ge}from"./debounce-BjP9TRjn.js";import{t as M,c as he,n as O,g as te,a as xe,e as pe,m as re,b as T,d as J,f as P,h as F,i as be,j as ve}from"./format-D4v_baXN.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";function S(r,n){const s=+M(r)-+M(n);return s<0?-1:s>0?1:s}function ye(r){return he(r,Date.now())}function ke(r,n,s){const[a,i]=O(s==null?void 0:s.in,r,n),f=a.getFullYear()-i.getFullYear(),h=a.getMonth()-i.getMonth();return f*12+h}function we(r){return n=>{const a=(r?Math[r]:Math.trunc)(n);return a===0?0:a}}function Me(r,n){return+M(r)-+M(n)}function _e(r,n){const s=M(r,n==null?void 0:n.in);return s.setHours(23,59,59,999),s}function je(r,n){const s=M(r,n==null?void 0:n.in),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(23,59,59,999),s}function Ce(r,n){const s=M(r,n==null?void 0:n.in);return+_e(s,n)==+je(s,n)}function De(r,n,s){const[a,i,f]=O(s==null?void 0:s.in,r,r,n),h=S(i,f),d=Math.abs(ke(i,f));if(d<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-h*d);let p=S(i,f)===-h;Ce(a)&&d===1&&S(a,f)===1&&(p=!1);const b=h*(d-+p);return b===0?0:b}function Pe(r,n,s){const a=Me(r,n)/1e3;return we(s==null?void 0:s.roundingMethod)(a)}function Fe(r,n,s){const a=xe(),i=(s==null?void 0:s.locale)??a.locale??pe,f=2520,h=S(r,n);if(isNaN(h))throw new RangeError("Invalid time value");const d=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:h}),[p,b]=O(s==null?void 0:s.in,...h>0?[n,r]:[r,n]),y=Pe(b,p),H=(te(b)-te(p))/1e3,u=Math.round((y-H)/60);let w;if(u<2)return s!=null&&s.includeSeconds?y<5?i.formatDistance("lessThanXSeconds",5,d):y<10?i.formatDistance("lessThanXSeconds",10,d):y<20?i.formatDistance("lessThanXSeconds",20,d):y<40?i.formatDistance("halfAMinute",0,d):y<60?i.formatDistance("lessThanXMinutes",1,d):i.formatDistance("xMinutes",1,d):u===0?i.formatDistance("lessThanXMinutes",1,d):i.formatDistance("xMinutes",u,d);if(u<45)return i.formatDistance("xMinutes",u,d);if(u<90)return i.formatDistance("aboutXHours",1,d);if(u<re){const v=Math.round(u/60);return i.formatDistance("aboutXHours",v,d)}else{if(u<f)return i.formatDistance("xDays",1,d);if(u<T){const v=Math.round(u/re);return i.formatDistance("xDays",v,d)}else if(u<T*2)return w=Math.round(u/T),i.formatDistance("aboutXMonths",w,d)}if(w=De(b,p),w<12){const v=Math.round(u/T);return i.formatDistance("xMonths",v,d)}else{const v=w%12,C=Math.trunc(w/12);return v<3?i.formatDistance("aboutXYears",C,d):v<9?i.formatDistance("overXYears",C,d):i.formatDistance("almostXYears",C+1,d)}}function Ae(r,n){return Fe(r,ye(r),n)}const Te={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Se=(r,n,s)=>{let a;const i=Te[r];return typeof i=="string"?a=i:n===1?a=i.one:a=i.other.replace("{{count}}",String(n)),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"dans "+a:"il y a "+a:a},He={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},ze={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Le={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ne={date:J({formats:He,defaultWidth:"full"}),time:J({formats:ze,defaultWidth:"full"}),dateTime:J({formats:Le,defaultWidth:"full"})},We={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Je=(r,n,s,a)=>We[r],Oe={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Xe={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},Ve={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},Be={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Ie={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Ye=(r,n)=>{const s=Number(r),a=n==null?void 0:n.unit;if(s===0)return"0";const i=["year","week","hour","minute","second"];let f;return s===1?f=a&&i.includes(a)?"ère":"er":f="ème",s+f},Ee=["MMM","MMMM"],Ue={preprocessor:(r,n)=>r.getDate()===1||!n.some(a=>a.isToken&&Ee.includes(a.value))?n:n.map(a=>a.isToken&&a.value==="do"?{isToken:!0,value:"d"}:a),ordinalNumber:Ye,era:P({values:Oe,defaultWidth:"wide"}),quarter:P({values:Xe,defaultWidth:"wide",argumentCallback:r=>r-1}),month:P({values:Ve,defaultWidth:"wide"}),day:P({values:Be,defaultWidth:"wide"}),dayPeriod:P({values:Ie,defaultWidth:"wide"})},Re=/^(\d+)(ième|ère|ème|er|e)?/i,qe=/\d+/i,$e={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},Qe={any:[/^av/i,/^ap/i]},Ge={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},Ke={any:[/1/i,/2/i,/3/i,/4/i]},Ze={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},et={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},tt={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},rt={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},st={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},at={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},nt={ordinalNumber:be({matchPattern:Re,parsePattern:qe,valueCallback:r=>parseInt(r)}),era:F({matchPatterns:$e,defaultMatchWidth:"wide",parsePatterns:Qe,defaultParseWidth:"any"}),quarter:F({matchPatterns:Ge,defaultMatchWidth:"wide",parsePatterns:Ke,defaultParseWidth:"any",valueCallback:r=>r+1}),month:F({matchPatterns:Ze,defaultMatchWidth:"wide",parsePatterns:et,defaultParseWidth:"any"}),day:F({matchPatterns:tt,defaultMatchWidth:"wide",parsePatterns:rt,defaultParseWidth:"any"}),dayPeriod:F({matchPatterns:st,defaultMatchWidth:"any",parsePatterns:at,defaultParseWidth:"any"})},ot={code:"fr",formatDistance:Se,formatLong:Ne,formatRelative:Je,localize:Ue,match:nt,options:{weekStartsOn:1,firstWeekContainsDate:4}},it={class:"container mx-auto px-4 py-6 sm:px-6 lg:px-8"},dt={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6"},lt={class:"grid grid-cols-2 lg:grid-cols-4 gap-3 max-w-md lg:max-w-none"},ut={class:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 px-3 py-2 rounded-xl border border-purple-200 dark:border-purple-700"},ct={class:"text-xl font-bold text-purple-800 dark:text-purple-300"},mt={class:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 px-3 py-2 rounded-xl border border-blue-200 dark:border-blue-700"},ft={class:"text-xl font-bold text-blue-800 dark:text-blue-300"},gt={class:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 px-3 py-2 rounded-xl border border-green-200 dark:border-green-700"},ht={class:"text-xl font-bold text-green-800 dark:text-green-300"},xt={class:"bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 px-3 py-2 rounded-xl border border-orange-200 dark:border-orange-700"},pt={class:"text-xl font-bold text-orange-800 dark:text-orange-300"},bt={class:"container mx-auto px-4 py-8 sm:px-6 lg:px-8"},vt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6"},yt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},kt={class:"lg:col-span-2"},wt={class:"relative"},Mt=["value"],_t={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-4 border-t border-gray-200 dark:border-gray-700"},jt={class:"flex items-center space-x-4"},Ct={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},Dt={class:"bg-white dark:bg-slate-900 rounded-lg shadow overflow-hidden"},Pt={class:"overflow-x-auto"},Ft={class:"w-full text-sm text-left text-slate-600 dark:text-slate-200"},At={class:"px-6 py-4 font-medium text-slate-900 dark:text-slate-100"},Tt={class:"px-6 py-4"},St={class:"flex items-center gap-3"},Ht={class:"flex-shrink-0 w-10 h-10"},zt={class:"w-10 h-10 rounded-full bg-gradient-to-br from-green-400 to-green-600 dark:from-green-500 dark:to-green-700 flex items-center justify-center shadow-lg"},Lt={class:"text-white font-bold text-sm"},Nt={class:"flex flex-col"},Wt={class:"font-medium text-slate-900 dark:text-slate-100"},Jt={class:"text-xs text-slate-500 dark:text-slate-400"},Ot={class:"px-6 py-4"},Xt={class:"flex items-center gap-3"},Vt={class:"flex-shrink-0 w-10 h-10"},Bt={class:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 dark:from-blue-500 dark:to-blue-700 flex items-center justify-center shadow-lg"},It={class:"text-white font-bold text-sm"},Yt={class:"flex flex-col"},Et={class:"font-medium text-slate-900 dark:text-slate-100"},Ut={class:"text-xs text-slate-500 dark:text-slate-400"},Rt={class:"px-6 py-4"},qt={class:"inline-flex items-center px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-sm font-semibold rounded-lg"},$t={class:"px-6 py-4"},Qt={class:"flex flex-col"},Gt={class:"text-sm text-slate-900 dark:text-slate-100"},Kt={class:"text-xs text-slate-500 dark:text-slate-400"},Zt={class:"px-6 py-4 text-center"},er={class:"flex justify-center gap-2"},tr=["onClick"],rr=["onClick"],sr=["onClick"],ar={key:1},nr={colspan:"6",class:"px-6 py-16 text-center"},or={class:"flex flex-col items-center"},ir={class:"text-sm text-gray-500 dark:text-gray-400 max-w-sm"},dr={key:0,class:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700"},lr={class:"flex items-center justify-between"},ur={class:"text-sm text-gray-500 dark:text-gray-400"},cr={class:"flex space-x-1"},mr=["innerHTML"],fr={class:"fixed inset-0 z-[9999] w-screen"},gr={class:"flex min-h-full items-center justify-center p-4",style:{"margin-top":"4rem","padding-top":"2rem","padding-bottom":"4rem"}},hr={class:"fixed inset-0 z-[9999] w-screen"},xr={class:"flex min-h-full items-center justify-center p-4",style:{"margin-top":"4rem","padding-top":"2rem","padding-bottom":"4rem"}},pr={class:"bg-gray-50 dark:bg-gray-700/50 px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"},br=["disabled"],Cr={__name:"Archives",props:{prescriptions:Object,prescripteurs:Array,countArchive:Number,filters:Object,stats:Object},setup(r){const n=me(),s=r,a=z({search:s.filters.search||"",dateFilter:s.filters.dateFilter||"",prescripteurFilter:s.filters.prescripteurFilter||"",statusFilter:s.filters.statusFilter||""}),i=z({}),f=z({}),h=W(!1),d=W(!1),p=W(null),b=()=>{a.get(route("archives"),{preserveState:!0,preserveScroll:!0,replace:!0})},y=ge(b,300),H=()=>{a.search="",a.dateFilter="",a.prescripteurFilter="",a.statusFilter="",b()},u=c=>{var t,o,k;return(k=(o=(t=n.props.auth)==null?void 0:t.user)==null?void 0:o.permissions)==null?void 0:k.includes(c)},w=()=>{alert("Fonctionnalité d'export en cours de développement.")},v=c=>{window.open(route("laboratoire.prescription.pdf",c),"_blank")},C=c=>{p.value=c,h.value=!0},se=()=>{f.post(route("archives.unarchive",p.value),{onSuccess:()=>_()})},ae=c=>{if(!u("archives.acceder")){alert("Seuls les administrateurs peuvent supprimer définitivement.");return}p.value=c,d.value=!0},ne=()=>{i.delete(route("archives.destroy",p.value),{onSuccess:()=>_()})},_=()=>{h.value=!1,d.value=!1,p.value=null},X=(c,t)=>{const o=(c||"N").charAt(0).toUpperCase(),k=(t||"A").charAt(0).toUpperCase();return`${o}${k}`},oe=c=>c?ve(new Date(c),"dd/MM/yyyy"):"N/A",ie=c=>c?Ae(new Date(c),{addSuffix:!0,locale:ot}):"";return(c,t)=>(m(),K(fe,null,{default:de(()=>[e("div",it,[e("div",dt,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-3xl font-heading font-bold text-gray-900 dark:text-white"},"Archives des Prescriptions "),e("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"Consultez et gérez les prescriptions archivées du laboratoire")],-1)),e("div",lt,[e("div",ut,[t[6]||(t[6]=e("div",{class:"text-xs font-medium text-purple-600 dark:text-purple-400 uppercase tracking-wide"},"Total Archivées",-1)),e("div",ct,l(r.stats.total||0),1)]),e("div",mt,[t[7]||(t[7]=e("div",{class:"text-xs font-medium text-blue-600 dark:text-blue-400 uppercase tracking-wide"},"Ce Mois ",-1)),e("div",ft,l(r.stats.mois_actuel||0),1)]),e("div",gt,[t[8]||(t[8]=e("div",{class:"text-xs font-medium text-green-600 dark:text-green-400 uppercase tracking-wide"},"Analyses ",-1)),e("div",ht,l(r.stats.total_analyses||0),1)]),e("div",xt,[t[9]||(t[9]=e("div",{class:"text-xs font-medium text-orange-600 dark:text-orange-400 uppercase tracking-wide"}," Patients",-1)),e("div",pt,l(r.stats.patients_uniques||0),1)])])])]),e("div",bt,[e("div",vt,[e("div",yt,[e("div",kt,[t[12]||(t[12]=e("label",{for:"search",class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Rechercher",-1)),e("div",wt,[L(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>x(a).search=o),type:"text",id:"search",placeholder:"Patient, prescripteur, référence...",onInput:t[1]||(t[1]=(...o)=>x(y)&&x(y)(...o)),class:"w-full pl-12 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 transition-all"},null,544),[[le,x(a).search]]),t[11]||(t[11]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),e("div",null,[t[14]||(t[14]=e("label",{for:"prescripteurFilter",class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Prescripteur",-1)),L(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>x(a).prescripteurFilter=o),id:"prescripteurFilter",onChange:b,class:"w-full py-3 px-4 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 transition-all"},[t[13]||(t[13]=e("option",{value:""},"Tous",-1)),(m(!0),g(j,null,N(r.prescripteurs,o=>(m(),g("option",{key:o.id,value:o.id},l(o.nom)+" "+l(o.prenom||""),9,Mt))),128))],544),[[Z,x(a).prescripteurFilter]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"dateFilter",class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Période",-1)),L(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>x(a).dateFilter=o),id:"dateFilter",onChange:b,class:"w-full py-3 px-4 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 transition-all"},[...t[15]||(t[15]=[e("option",{value:""},"Toutes",-1),e("option",{value:"today"},"Aujourd'hui",-1),e("option",{value:"week"},"Cette semaine",-1),e("option",{value:"month"},"Ce mois",-1),e("option",{value:"year"},"Cette année",-1)])],544),[[Z,x(a).dateFilter]])])]),e("div",_t,[e("div",jt,[e("span",Ct,l(r.prescriptions.total)+" prescription(s) archivée(s) ",1)]),e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:H,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors"},[...t[17]||(t[17]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),D(" Réinitialiser ",-1)])]),e("button",{onClick:w,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 border border-transparent rounded-lg shadow-sm focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors"},[...t[18]||(t[18]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),D(" Exporter ",-1)])])])])]),e("div",Dt,[e("div",Pt,[e("table",Ft,[t[25]||(t[25]=e("thead",{class:"bg-gray-50 dark:bg-slate-800 text-xs font-semibold uppercase text-slate-500 dark:text-slate-400"},[e("tr",null,[e("th",{class:"px-6 py-4"},"Référence"),e("th",{class:"px-6 py-4"},"Patient"),e("th",{class:"px-6 py-4"},"Prescripteur"),e("th",{class:"px-6 py-4"},"Analyses"),e("th",{class:"px-6 py-4"},"Archivé le"),e("th",{class:"px-6 py-4"},"Actions")])],-1)),e("tbody",null,[r.prescriptions.data&&r.prescriptions.data.length>0?(m(!0),g(j,{key:0},N(r.prescriptions.data,o=>{var k,V,B,I,Y,E,U,R,q,$,Q;return m(),g("tr",{key:o.id,class:"border-t border-gray-200 dark:border-slate-800 hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors duration-200"},[e("td",At,l(o.reference||"N/A"),1),e("td",Tt,[e("div",St,[e("div",Ht,[e("div",zt,[e("span",Lt,l(X((k=o.patient)==null?void 0:k.nom,(V=o.patient)==null?void 0:V.prenom)),1)])]),e("div",Nt,[e("span",Wt,l(((B=o.patient)==null?void 0:B.nom)||"N/A")+" "+l(((I=o.patient)==null?void 0:I.prenom)||""),1),e("span",Jt,l(((Y=o.patient)==null?void 0:Y.telephone)||"Téléphone non renseigné"),1)])])]),e("td",Ot,[e("div",Xt,[e("div",Vt,[e("div",Bt,[e("span",It,l(X((E=o.prescripteur)==null?void 0:E.nom,(U=o.prescripteur)==null?void 0:U.prenom)),1)])]),e("div",Yt,[e("span",Et,l(((R=o.prescripteur)==null?void 0:R.nom_complet)||((q=o.prescripteur)==null?void 0:q.nom)||"N/A"),1),e("span",Ut,l((($=o.prescripteur)==null?void 0:$.specialite)||"Spécialité non renseignée"),1)])])]),e("td",Rt,[e("span",qt,[t[19]||(t[19]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1)),D(" "+l(((Q=o.analyses)==null?void 0:Q.length)||0)+" analyse(s) ",1)])]),e("td",$t,[e("div",Qt,[e("span",Gt,l(oe(o.updated_at)),1),e("span",Kt,l(ie(o.updated_at)),1)])]),e("td",Zt,[e("div",er,[e("button",{onClick:G=>C(o.id),class:"p-2 text-amber-600 dark:text-amber-400 hover:text-amber-800 dark:hover:text-amber-300 hover:bg-amber-100 dark:hover:bg-amber-900/30 rounded-lg transition-colors",title:"Désarchiver"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})],-1)])],8,tr),e("button",{onClick:G=>v(o.id),class:"p-2 text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors",title:"Visualiser"},[...t[21]||(t[21]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,rr),u("archives.acceder")?(m(),g("button",{key:0,onClick:G=>ae(o.id),class:"p-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Supprimer définitivement"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,sr)):A("",!0)])])])}),128)):(m(),g("tr",ar,[e("td",nr,[e("div",or,[t[23]||(t[23]=e("div",{class:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})])],-1)),t[24]||(t[24]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-2"},"Aucune prescription archivée trouvée",-1)),e("p",ir,[x(a).search||x(a).prescripteurFilter||x(a).dateFilter?(m(),g(j,{key:0},[D(" Essayez de modifier vos critères de recherche pour voir plus de résultats. ")],64)):(m(),g(j,{key:1},[D(" Les prescriptions archivées apparaîtront ici une fois que des prescriptions auront été archivées. ")],64))])])])]))])])]),r.prescriptions.links&&r.prescriptions.links.length>3?(m(),g("div",dr,[e("div",lr,[e("div",ur," Affichage de "+l(r.prescriptions.from)+" à "+l(r.prescriptions.to)+" sur "+l(r.prescriptions.total)+" résultats ",1),e("div",cr,[(m(!0),g(j,null,N(r.prescriptions.links,(o,k)=>(m(),g(j,{key:k},[o.url===null?(m(),g("div",{key:0,class:"px-3 py-1 font-medium text-xs rounded-md bg-white border border-gray-300 text-gray-400",innerHTML:o.label},null,8,mr)):(m(),K(x(ue),{key:1,href:o.url,class:ce(["px-3 py-1 font-medium text-xs rounded-md border",{"bg-primary-500 text-white border-primary-500":o.active,"bg-white border-gray-300 text-gray-600 hover:bg-gray-50":!o.active}]),innerHTML:o.label},null,8,["href","class","innerHTML"]))],64))),128))])])])):A("",!0)]),h.value?(m(),g("div",{key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity z-[9999]",onClick:_},[e("div",fr,[e("div",gr,[e("div",{class:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 text-left shadow-xl transition-all w-full max-w-md",onClick:t[4]||(t[4]=ee(()=>{},["stop"]))},[t[26]||(t[26]=e("div",{class:"bg-white dark:bg-gray-800 px-6 py-6"},[e("div",{class:"flex items-center justify-center w-12 h-12 mx-auto bg-amber-100 dark:bg-amber-900/30 rounded-full mb-4"},[e("svg",{class:"w-6 h-6 text-amber-600 dark:text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})])]),e("div",{class:"text-center"},[e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-2"}," Désarchiver cette prescription ? "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-6"}," Cette action remettra la prescription dans les prescriptions actives. ")])],-1)),e("div",{class:"bg-gray-50 dark:bg-gray-700/50 px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"},[e("button",{onClick:_,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800 transition-colors"}," Annuler "),e("button",{onClick:se,class:"px-4 py-2 bg-amber-600 hover:bg-amber-700 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 dark:focus:ring-offset-gray-800 transition-colors"}," Désarchiver ")])])])])])):A("",!0),d.value?(m(),g("div",{key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity z-[9999]",onClick:_},[e("div",hr,[e("div",xr,[e("div",{class:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 text-left shadow-xl transition-all w-full max-w-md",onClick:t[5]||(t[5]=ee(()=>{},["stop"]))},[t[27]||(t[27]=e("div",{class:"bg-white dark:bg-gray-800 px-6 py-6"},[e("div",{class:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/30 rounded-full mb-4"},[e("svg",{class:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})])]),e("div",{class:"text-center"},[e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-2"}," Supprimer définitivement ? "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-6"}," Cette action est irréversible. La prescription sera définitivement supprimée de la base de données. ")])],-1)),e("div",pr,[e("button",{onClick:_,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800 transition-colors"}," Annuler "),e("button",{onClick:ne,disabled:x(i).processing,class:"px-4 py-2 bg-red-600 hover:bg-red-700 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-gray-800 transition-colors disabled:opacity-50"}," Supprimer définitivement ",8,br)])])])])])):A("",!0)])]),_:1}))}};export{Cr as default};
