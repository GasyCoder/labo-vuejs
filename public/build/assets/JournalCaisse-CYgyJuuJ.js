import{m as A,s as N,b as T,d as t,t as r,e as F,u as x,v as B,p as b,c as o,o as a,F as u,g as p,f as S,i as z}from"./app-CepxlqUZ.js";import{_ as P}from"./AppLayout-BuOsbdxc.js";import{j as H}from"./format-D4v_baXN.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const E={class:"container mx-auto px-4 py-6 sm:px-6 lg:px-8"},L={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6"},G={class:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 px-4 py-3 rounded-xl border border-blue-200 dark:border-blue-700"},O={class:"text-lg font-bold text-blue-800 dark:text-blue-300"},I={class:"container mx-auto px-4 py-8 sm:px-6 lg:px-8"},R={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6"},$={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},q={class:"flex items-end"},U=["href"],J={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-4 border-t border-gray-200 dark:border-gray-700"},K={class:"flex items-center space-x-4"},Q={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},W={class:"text-lg font-bold text-gray-900 dark:text-white"},X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},Y={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Z={class:"flex items-center"},tt={class:"ml-4"},et={class:"text-2xl font-bold text-gray-900 dark:text-white"},rt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},st={class:"flex items-center"},at={class:"ml-4"},ot={class:"text-2xl font-bold text-gray-900 dark:text-white"},dt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},lt={class:"flex items-center"},it={class:"ml-4"},nt={class:"text-2xl font-bold text-gray-900 dark:text-white"},gt={class:"flex items-center mt-1"},xt={class:"text-sm font-medium text-green-500"},ut={class:"text-sm font-medium text-red-500"},mt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},ct={class:"flex items-center"},bt={class:"ml-4"},pt={class:"text-2xl font-bold text-gray-900 dark:text-white"},yt={class:"bg-white dark:bg-slate-900 rounded-lg shadow overflow-hidden"},ft={class:"px-6 py-4 bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700"},kt={class:"text-lg font-semibold text-gray-800 dark:text-slate-200 text-center"},vt={key:0,class:"overflow-x-auto"},ht={class:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 border-b border-blue-200 dark:border-blue-700"},wt={class:"font-bold text-blue-800 dark:text-blue-300 uppercase text-center"},_t={class:"grid grid-cols-4 gap-4 px-6 py-3 text-sm"},Mt={class:"text-gray-600 dark:text-gray-400 flex flex-col"},Ct={class:"font-medium"},Dt={key:0,class:"text-xs text-gray-500"},Ft={class:"font-medium text-blue-600 dark:text-blue-400 flex items-center flex-wrap"},Bt={key:0,class:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400"},St={class:"font-medium text-gray-900 dark:text-gray-100"},Vt={class:"text-right font-bold text-gray-900 dark:text-gray-100"},jt={class:"bg-yellow-50 dark:bg-yellow-900/20 border-b border-yellow-200 dark:border-yellow-700"},At={class:"grid grid-cols-4 gap-4 px-6 py-3"},Nt={class:"text-right font-bold text-lg text-red-600 dark:text-red-400"},Tt={class:"bg-red-100 dark:bg-red-900/30 border-t-2 border-red-300 dark:border-red-600"},zt={class:"grid grid-cols-4 gap-4 px-6 py-4"},Pt={class:"text-right font-bold text-xl text-red-700 dark:text-red-400"},Ht={key:1,class:"px-6 py-16 text-center"},Et={key:2,class:"px-6 py-3 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700"},Lt={class:"text-right text-sm text-gray-500 dark:text-gray-400"},Ut={__name:"JournalCaisse",props:{dateDebut:String,dateFin:String,totalGeneral:Number,paiementsGroupes:Object,totauxParMethode:Array,totalSemaine:Number,evolutionSemaine:Number,totalCount:Number,totalMontant:Number},setup(s){const y=s,n=A({dateDebut:y.dateDebut,dateFin:y.dateFin}),V=z(()=>H(new Date,"dd/MM/yyyy HH:mm:ss")),f=()=>{n.get(route("secretaire.journal-caisse"),{preserveState:!0,preserveScroll:!0})},m=d=>{if(!d)return"N/A";const[e,l,c]=d.split("-");return`${c}/${l}/${e}`},g=d=>d==null?"0.00":Number(d).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}),j=d=>d.reduce((e,l)=>e+parseFloat(l.montant),0);return(d,e)=>(a(),N(P,null,{default:T(()=>[t("div",E,[t("div",L,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-3xl font-heading font-bold text-gray-900 dark:text-white"},"Journal de Caisse"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"LNB SITE MAITRE - Analyses Médicales - Suivi des recettes par date de paiement")],-1)),t("div",G,[e[2]||(e[2]=t("div",{class:"text-xs font-medium text-blue-600 dark:text-blue-400 uppercase tracking-wide"},"Période de Paiement",-1)),t("div",O,r(m(s.dateDebut))+" - "+r(m(s.dateFin)),1),e[3]||(e[3]=t("div",{class:"text-xs text-blue-600 dark:text-blue-400"}," Basé sur les dates de paiement réelles ",-1))])])]),t("div",I,[t("div",R,[t("div",$,[t("div",null,[e[5]||(e[5]=t("label",{for:"dateDebut",class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"}," Date début de paiement ",-1)),F(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>x(n).dateDebut=l),onChange:f,type:"date",id:"dateDebut",class:"w-full py-3 px-4 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 transition-all"},null,544),[[B,x(n).dateDebut]])]),t("div",null,[e[6]||(e[6]=t("label",{for:"dateFin",class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"}," Date fin de paiement ",-1)),F(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>x(n).dateFin=l),onChange:f,type:"date",id:"dateFin",class:"w-full py-3 px-4 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-primary-500 dark:focus:border-primary-400 transition-all"},null,544),[[B,x(n).dateFin]])]),t("div",q,[t("a",{href:d.route("secretaire.journal-caisse.export",{dateDebut:x(n).dateDebut,dateFin:x(n).dateFin}),class:"w-full inline-flex items-center justify-center px-4 py-3 text-sm font-medium text-white bg-red-600 hover:bg-red-700 border border-transparent rounded-xl shadow-sm focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors"},[...e[7]||(e[7]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),b(" Export PDF ",-1)])],8,U)])]),e[8]||(e[8]=t("div",{class:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 mb-4"},[t("div",{class:"flex"},[t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])]),t("div",{class:"ml-3"},[t("p",{class:"text-sm text-blue-700 dark:text-blue-300"},[t("strong",null,"Note importante :"),b(" Ce rapport est désormais basé sur les "),t("strong",null,"dates de paiement réelles"),b(" (quand le paiement a été effectivement marqué comme payé) et non plus sur les dates de création des paiements. ")])])])],-1)),t("div",J,[t("div",K,[t("span",Q,r(s.totalCount)+" paiement(s) effectué(s) dans cette période ",1)]),t("div",W," Total période: "+r(g(s.totalMontant))+" Ar. ",1)])]),t("div",X,[t("div",Y,[t("div",Z,[e[11]||(e[11]=t("div",{class:"p-3 rounded-lg bg-blue-100 dark:bg-blue-900/30"},[t("svg",{class:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",tt,[e[9]||(e[9]=t("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Général (tous paiements payés)",-1)),t("p",et,r(g(s.totalGeneral))+" Ar. ",1),e[10]||(e[10]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Basé sur dates de paiement",-1))])])]),t("div",rt,[t("div",st,[e[13]||(e[13]=t("div",{class:"p-3 rounded-lg bg-green-100 dark:bg-green-900/30"},[t("svg",{class:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t("div",at,[e[12]||(e[12]=t("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Paiements effectués",-1)),t("p",ot,r(s.totalCount),1)])])]),t("div",dt,[t("div",lt,[e[18]||(e[18]=t("div",{class:"p-3 rounded-lg bg-purple-100 dark:bg-purple-900/30"},[t("svg",{class:"w-6 h-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),t("div",it,[e[17]||(e[17]=t("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Période",-1)),t("p",nt,r(g(s.totalSemaine))+" Ar. ",1),t("div",gt,[s.evolutionSemaine>=0?(a(),o(u,{key:0},[e[14]||(e[14]=t("svg",{class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})],-1)),t("span",xt," +"+r(s.evolutionSemaine.toFixed(1))+"% ",1)],64)):(a(),o(u,{key:1},[e[15]||(e[15]=t("svg",{class:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})],-1)),t("span",ut,r(s.evolutionSemaine.toFixed(1))+"% ",1)],64)),e[16]||(e[16]=t("span",{class:"text-xs text-gray-500 dark:text-gray-400 ml-1"},"vs période précédente",-1))])])])]),t("div",mt,[t("div",ct,[e[20]||(e[20]=t("div",{class:"p-3 rounded-lg bg-orange-100 dark:bg-orange-900/30"},[t("svg",{class:"w-6 h-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])],-1)),t("div",bt,[e[19]||(e[19]=t("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Méthodes de Paiement",-1)),t("p",pt,r(Object.keys(s.totauxParMethode||{}).length),1)])])])]),t("div",yt,[t("div",ft,[t("h3",kt," CAISSE - PAIEMENTS du "+r(m(s.dateDebut))+" au "+r(m(s.dateFin)),1),e[21]||(e[21]=t("p",{class:"text-sm text-gray-600 dark:text-slate-400 text-center mt-1"}," Basé sur les dates de paiement effectives ",-1))]),s.totalCount>0?(a(),o("div",vt,[(a(!0),o(u,null,S(s.paiementsGroupes,(l,c)=>(a(),o(u,{key:c},[t("div",ht,[t("h4",wt,r(c),1)]),e[24]||(e[24]=t("div",{class:"bg-gray-100 dark:bg-slate-800"},[t("div",{class:"grid grid-cols-4 gap-4 px-6 py-3"},[t("div",{class:"font-semibold text-gray-700 dark:text-gray-300 text-sm uppercase tracking-wide"},"Date Paiement"),t("div",{class:"font-semibold text-gray-700 dark:text-gray-300 text-sm uppercase tracking-wide"},"Dossier"),t("div",{class:"font-semibold text-gray-700 dark:text-gray-300 text-sm uppercase tracking-wide"},"Client"),t("div",{class:"font-semibold text-gray-700 dark:text-gray-300 text-sm uppercase tracking-wide text-right"},"Montant")])],-1)),(a(!0),o(u,null,S(l,i=>{var k,v,h,w,_,M,C,D;return a(),o("div",{key:i.id,class:"border-b border-gray-100 dark:border-slate-800 hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors duration-200"},[t("div",_t,[t("div",Mt,[t("span",Ct,r(i.date_paiement_format),1),i.heure_paiement_format?(a(),o("span",Dt,r(i.heure_paiement_format),1)):p("",!0)]),t("div",Ft,[t("span",null,r(((v=(k=i.prescription)==null?void 0:k.patient)==null?void 0:v.numero_dossier)||"N/A"),1),(h=i.prescription)!=null&&h.is_modified?(a(),o("span",Bt,[e[22]||(e[22]=t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)),b(" Modifié-"+r((w=i.prescription)==null?void 0:w.updated_at_format),1)])):p("",!0)]),t("div",St,r(((M=(_=i.prescription)==null?void 0:_.patient)==null?void 0:M.nom)||"Client non défini")+" "+r(((D=(C=i.prescription)==null?void 0:C.patient)==null?void 0:D.prenom)||""),1),t("div",Vt,r(g(i.montant)),1)])])}),128)),t("div",jt,[t("div",At,[e[23]||(e[23]=t("div",{class:"col-span-3 text-right font-bold text-gray-700 dark:text-gray-300"}," SOUS TOTAL ",-1)),t("div",Nt,r(g(j(l)))+" Ar. ",1)])])],64))),128)),t("div",Tt,[t("div",zt,[e[25]||(e[25]=t("div",{class:"col-span-3 text-right font-bold text-gray-800 dark:text-gray-200 text-lg"}," TOTAL GÉNÉRAL (période de paiement filtrée) ",-1)),t("div",Pt,r(g(s.totalMontant))+" Ar. ",1)])])])):(a(),o("div",Ht,[...e[26]||(e[26]=[t("div",{class:"flex flex-col items-center"},[t("div",{class:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4"},[t("svg",{class:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])]),t("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-2"},"Aucun paiement effectué"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 max-w-sm"}," Aucun paiement n'a été effectué (marqué comme payé) durant cette période. Vérifiez les dates sélectionnées. ")],-1)])])),s.totalCount>0?(a(),o("div",Et,[t("div",Lt," Rapport généré le "+r(V.value)+" - Basé sur les dates de paiement effectives ",1)])):p("",!0)])])]),_:1}))}};export{Ut as default};
