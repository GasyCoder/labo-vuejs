import y from"./GroupTagList-CqS9uPf2.js";import{c as s,e,n as b,t as a,b as g,g as n,a as h,j as w,o as d}from"./app-CfKzR4Wd.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const C={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow overflow-hidden"},j={class:"p-4 pb-3"},M={class:"flex items-start gap-3"},P={class:"flex-1 min-w-0"},z={class:"text-[15px] font-bold text-gray-900 dark:text-white truncate leading-tight"},B={class:"flex items-center gap-2 mt-0.5"},$={class:"text-xs font-mono font-semibold text-gray-500 dark:text-gray-400"},V={class:"text-xs text-gray-500 dark:text-gray-400"},D={class:"px-4 pb-3 space-y-2"},A={class:"flex items-center gap-1.5 text-xs text-gray-600 dark:text-gray-400"},N={class:"truncate"},F={key:0,class:"text-xs text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-lg p-2.5 border border-red-100 dark:border-red-800/30"},S={class:"px-4 pb-4 pt-1 border-t border-gray-100 dark:border-gray-700/50"},H={key:0,class:"space-y-2"},q=["disabled"],L={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},R={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},T={class:"grid grid-cols-2 gap-2"},E=["disabled"],I=["disabled"],O={key:1,class:"flex gap-2"},G={key:2,class:"grid grid-cols-2 gap-2"},X={__name:"PrescriptionCard",props:{prescription:{type:Object,required:!0},tab:{type:String,required:!0},actionProcessing:{type:String,default:null}},emits:["validate","reject","view","preview"],setup(r,{emit:x}){const k=r,l=x,p=i=>{var t,o;return i?(((t=i.prenom)==null?void 0:t[0])||"")+(((o=i.nom)==null?void 0:o[0])||""):"??"},m=i=>i?new Date(i).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"",v=i=>i!=null&&i.patient?`${i.patient.nom||""} ${i.patient.prenom||""}`.trim():"Patient inconnu",f=i=>i!=null&&i.prescripteur?`Dr ${i.prescripteur.nom||""} ${i.prescripteur.prenom||""}`.trim():"-",u={a_valider:{label:"Terminé",bg:"bg-amber-100 dark:bg-amber-900/40",text:"text-amber-800 dark:text-amber-300",dot:"bg-amber-500"},valide:{label:"Validé",bg:"bg-emerald-100 dark:bg-emerald-900/40",text:"text-emerald-800 dark:text-emerald-300",dot:"bg-emerald-500"},a_refaire:{label:"À refaire",bg:"bg-red-100 dark:bg-red-900/40",text:"text-red-800 dark:text-red-300",dot:"bg-red-500"}},c=u[k.tab]||u.a_valider;return(i,t)=>(d(),s("div",C,[e("div",j,[e("div",M,[e("div",{class:b(["flex-shrink-0 w-11 h-11 rounded-full flex items-center justify-center text-sm font-bold shadow-sm",r.tab==="a_valider"?"bg-amber-500 text-white":r.tab==="valide"?"bg-emerald-500 text-white":"bg-red-500 text-white"])},a(p(r.prescription.patient)),3),e("div",P,[e("h4",z,a(v(r.prescription)),1),e("div",B,[e("span",$,a(r.prescription.reference),1),t[6]||(t[6]=e("span",{class:"text-gray-300 dark:text-gray-600"},"|",-1)),e("span",V,a(m(r.prescription.updated_at)),1)])]),e("span",{class:b(["flex-shrink-0 inline-flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider",[g(c).bg,g(c).text]])},[e("span",{class:b(["w-1.5 h-1.5 rounded-full",g(c).dot])},null,2),n(" "+a(g(c).label),1)],2)])]),e("div",D,[e("div",A,[t[7]||(t[7]=e("svg",{class:"w-3.5 h-3.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),e("span",N,a(f(r.prescription)),1)]),h(y,{analyses:r.prescription.analyses||[],max:4},null,8,["analyses"]),r.tab==="a_refaire"&&r.prescription.commentaire_biologiste?(d(),s("div",F,[t[8]||(t[8]=e("span",{class:"font-semibold"},"Motif :",-1)),n(" "+a(r.prescription.commentaire_biologiste),1)])):w("",!0)]),e("div",S,[r.tab==="a_valider"?(d(),s("div",H,[e("button",{onClick:t[0]||(t[0]=o=>l("validate",r.prescription)),disabled:r.actionProcessing!==null,class:"w-full flex items-center justify-center gap-2 h-11 px-4 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white rounded-lg text-sm font-bold transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Valider cette prescription"},[r.actionProcessing==="validate-"+r.prescription.id?(d(),s("svg",L,[...t[9]||(t[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"},null,-1)])])):(d(),s("svg",R,[...t[10]||(t[10]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])),e("span",null,a(r.actionProcessing==="validate-"+r.prescription.id?"Validation...":"Valider"),1)],8,q),e("div",T,[e("button",{onClick:t[1]||(t[1]=o=>l("preview",r.prescription)),disabled:r.actionProcessing!==null,class:"flex items-center justify-center gap-1.5 h-10 px-3 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50","aria-label":"Aperçu PDF"},[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),n(" Aperçu ",-1)])],8,E),e("button",{onClick:t[2]||(t[2]=o=>l("reject",r.prescription)),disabled:r.actionProcessing!==null,class:"flex items-center justify-center gap-1.5 h-10 px-3 bg-red-50 hover:bg-red-100 active:bg-red-200 dark:bg-red-900/20 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50 border border-red-200 dark:border-red-800/40","aria-label":"Renvoyer au technicien"},[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),n(" À refaire ",-1)])],8,I)])])):r.tab==="valide"?(d(),s("div",O,[e("button",{onClick:t[3]||(t[3]=o=>l("preview",r.prescription)),class:"flex-1 flex items-center justify-center gap-1.5 h-10 px-3 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-xs font-semibold transition-colors","aria-label":"Aperçu PDF"},[...t[13]||(t[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),n(" Aperçu PDF ",-1)])])])):(d(),s("div",G,[e("button",{onClick:t[4]||(t[4]=o=>l("preview",r.prescription)),class:"flex items-center justify-center gap-1.5 h-10 px-3 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-xs font-semibold transition-colors","aria-label":"Aperçu PDF"},[...t[14]||(t[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),n(" Aperçu ",-1)])]),e("button",{onClick:t[5]||(t[5]=o=>l("view",r.prescription)),class:"flex items-center justify-center gap-1.5 h-10 px-3 bg-blue-50 hover:bg-blue-100 active:bg-blue-200 dark:bg-blue-900/20 dark:hover:bg-blue-900/40 text-blue-600 dark:text-blue-400 rounded-lg text-xs font-semibold transition-colors border border-blue-200 dark:border-blue-800/40","aria-label":"Voir la prescription"},[...t[15]||(t[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1),n(" Voir ",-1)])])]))])]))}};export{X as default};
