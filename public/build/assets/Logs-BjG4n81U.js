import{c as o,a as w,b as C,h as A,d as _,e,o as a,F as v,p as L,z as p,n as g,t as l,i as N,f as F,r as f,l as S,v as V,j as b,q as $,g as x}from"./app-CfKzR4Wd.js";import{_ as I,S as y}from"./AppLayout-DYFev4JA.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const M={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},O={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},j={class:"text-indigo-600 dark:text-indigo-400"},D={class:"flex items-center gap-2"},G=["href"],U={class:"py-6 px-4 sm:px-6 lg:px-8"},z={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},P={class:"lg:col-span-1"},q={class:"bg-white dark:bg-gray-800 shadow rounded-lg border dark:border-gray-700"},H={class:"divide-y dark:divide-gray-700 max-h-[60vh] overflow-y-auto"},Q=["onClick"],W={class:"flex flex-col min-w-0"},Y={class:"text-[10px] text-gray-400"},J=["onClick"],K={class:"lg:col-span-3"},X={class:"bg-white dark:bg-gray-800 shadow rounded-lg border dark:border-gray-700 flex flex-col h-full min-h-[60vh]"},Z={class:"p-4 border-b dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/20 flex gap-4"},ee={class:"flex-1 overflow-y-auto divide-y dark:divide-gray-700"},te={key:0,class:"p-12 text-center text-gray-400 italic"},re={class:"flex items-start justify-between"},se={class:"flex-1 min-w-0"},oe={class:"flex items-center gap-2 mb-1"},ae={class:"text-[10px] font-mono text-gray-400"},ne={class:"text-xs font-medium text-gray-800 dark:text-gray-200 break-words"},le={class:"flex gap-2"},ie=["onClick"],de=["onClick"],ce={key:0,class:"mt-3 p-3 bg-gray-900 rounded-md text-[10px] text-gray-400 font-mono overflow-x-auto border border-gray-800"},pe={__name:"Logs",props:{logs:Array,files:Array,currentFile:String},setup(n){const i=n,d=f(""),c=f("all"),h=$(()=>i.logs.filter(s=>{const r=s.message.toLowerCase().includes(d.value.toLowerCase())||s.stack.toLowerCase().includes(d.value.toLowerCase()),t=c.value==="all"||s.level.toLowerCase()===c.value.toLowerCase();return r&&t})),R=s=>{navigator.clipboard.writeText(s).then(()=>{y.fire({toast:!0,position:"top-end",icon:"success",title:"Copié !",showConfirmButton:!1,timer:1500})})},T=()=>{y.fire({title:"Vider ce log ?",text:`Tout le contenu de ${i.currentFile} sera effacé.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#f59e0b",confirmButtonText:"Oui, vider",cancelButtonText:"Annuler"}).then(s=>{s.isConfirmed&&p.post(route("admin.logs.clear",i.currentFile))})},k=(s=null)=>{const r=s||i.currentFile;y.fire({title:"Supprimer le fichier ?",text:`Le fichier ${r} sera définitivement supprimé.`,icon:"error",showCancelButton:!0,confirmButtonColor:"#ef4444",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&p.delete(route("admin.logs.delete",r))})},B=s=>{switch(s.toUpperCase()){case"ERROR":case"CRITICAL":case"ALERT":case"EMERGENCY":return"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300";case"WARNING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300";case"INFO":return"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},u=f(null),E=s=>{u.value=u.value===s?null:s};return(s,r)=>(a(),o(v,null,[w(C(A),{title:"Logs - "+n.currentFile},null,8,["title"]),w(I,null,{header:_(()=>[e("div",M,[e("div",null,[e("h2",O,[r[3]||(r[3]=x(" Fichier : ",-1)),e("span",j,l(n.currentFile),1)])]),e("div",D,[e("button",{onClick:T,class:"inline-flex items-center px-4 py-2 bg-amber-500 text-white text-xs font-bold rounded-md hover:bg-amber-600 shadow-md"},[...r[4]||(r[4]=[e("em",{class:"ni ni-reload mr-1"},null,-1),x(" VIDER LE LOG ",-1)])]),e("a",{href:s.route("admin.logs.download",n.currentFile),class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-xs font-bold rounded-md hover:bg-blue-700 shadow-md"},[...r[5]||(r[5]=[e("em",{class:"ni ni-download mr-1"},null,-1),x(" TÉLÉCHARGER ",-1)])],8,G),e("button",{onClick:r[0]||(r[0]=t=>k()),class:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-xs font-bold rounded-md hover:bg-red-700 shadow-md"},[...r[6]||(r[6]=[e("em",{class:"ni ni-trash mr-1"},null,-1),x(" SUPPRIMER ",-1)])])])])]),default:_(()=>[e("div",U,[e("div",z,[e("div",P,[e("div",q,[r[8]||(r[8]=e("div",{class:"px-4 py-3 border-b dark:border-gray-700 font-bold text-xs uppercase text-gray-500"},"Liste des fichiers",-1)),e("div",H,[(a(!0),o(v,null,L(n.files,t=>(a(),o("div",{key:t.name,class:g(["group p-3 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",{"bg-indigo-50 dark:bg-indigo-900/20":n.currentFile===t.name}]),onClick:m=>C(p).get(s.route("admin.logs.viewer"),{file:t.name})},[e("div",W,[e("span",{class:g(["text-sm font-medium truncate",n.currentFile===t.name?"text-indigo-600 font-bold":"text-gray-700 dark:text-gray-300"])},l(t.name),3),e("span",Y,l(t.size),1)]),e("button",{onClick:N(m=>k(t.name),["stop"]),class:"opacity-0 group-hover:opacity-100 p-1 text-red-500 hover:text-red-700 transition-opacity"},[...r[7]||(r[7]=[e("em",{class:"ni ni-trash"},null,-1)])],8,J)],10,Q))),128))])])]),e("div",K,[e("div",X,[e("div",Z,[F(e("input",{"onUpdate:modelValue":r[1]||(r[1]=t=>d.value=t),type:"text",placeholder:"Rechercher...",class:"flex-1 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-sm"},null,512),[[S,d.value]]),F(e("select",{"onUpdate:modelValue":r[2]||(r[2]=t=>c.value=t),class:"rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 text-sm"},[...r[9]||(r[9]=[e("option",{value:"all"},"Tous niveaux",-1),e("option",{value:"error"},"Erreurs",-1),e("option",{value:"warning"},"Avertissements",-1),e("option",{value:"info"},"Infos",-1)])],512),[[V,c.value]])]),e("div",ee,[h.value.length===0?(a(),o("div",te,"Le fichier est vide.")):b("",!0),(a(!0),o(v,null,L(h.value,t=>(a(),o("div",{key:t.id,class:"p-3 hover:bg-gray-50 dark:hover:bg-gray-700/20"},[e("div",re,[e("div",se,[e("div",oe,[e("span",{class:g(["px-1.5 py-0.5 rounded text-[9px] font-bold uppercase",B(t.level)])},l(t.level),3),e("span",ae,l(t.date),1)]),e("p",ne,l(t.message),1)]),e("div",le,[e("button",{onClick:m=>R(t.full),class:"p-1 text-gray-400 hover:text-indigo-500"},[...r[10]||(r[10]=[e("em",{class:"ni ni-copy text-lg"},null,-1)])],8,ie),t.stack?(a(),o("button",{key:0,onClick:m=>E(t.id),class:"p-1 text-gray-400 hover:text-white"},[e("em",{class:g(["ni text-lg",u.value===t.id?"ni-chevron-up":"ni-chevron-down"])},null,2)],8,de)):b("",!0)])]),u.value===t.id&&t.stack?(a(),o("div",ce,[e("pre",null,l(t.stack),1)])):b("",!0)]))),128))])])])])])]),_:1})],64))}};export{pe as default};
