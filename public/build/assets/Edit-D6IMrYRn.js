import{r as _,C as fe,s as ke,b as H,d as e,c as n,g as b,a as ee,u as te,y as se,p as r,t as i,i as P,H as ye,o as a,F as R,f as q,n as A,e as p,v as f,D as he,x as O,q as we}from"./app-F2ydNjPs.js";import{_ as _e}from"./AppLayout-ZkD0rjf3.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const je={class:"px-3 py-3 space-y-4"},Ce={class:"mb-3"},Ne={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800"},Re={class:"mb-4 flex items-center justify-between"},qe={class:"mt-1 text-xs text-slate-500 dark:text-slate-400"},Ae={class:"font-semibold"},Ee={class:"flex items-center space-x-2"},Ue={class:"text-right"},Pe={class:"text-xs text-slate-500 dark:text-slate-400"},Se={class:"text-xxs text-slate-400 dark:text-slate-500"},Me={class:"relative"},Te={class:"absolute left-4 right-4 top-4 z-0 h-0.5 bg-gray-100 dark:bg-slate-600"},Ve={class:"relative z-10 flex items-center justify-between"},Ie=["onClick"],$e={class:"mt-3 text-center"},Fe={class:"inline-flex items-center rounded-lg border border-primary-200 bg-primary-50 px-3 py-1.5 dark:border-primary-800 dark:bg-primary-900/20"},De={class:"text-xs font-medium text-primary-800 dark:text-primary-200"},Le={key:0,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},ze={class:"space-y-4 p-5"},Oe={class:"space-y-4"},Xe={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},Je={class:"rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},Be={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},He={class:"mt-4 rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},Ge={class:"grid grid-cols-2 gap-2.5 sm:grid-cols-3 lg:grid-cols-5"},We=["onUpdate:modelValue","value"],Qe={class:"relative rounded-xl border-2 border-slate-200 bg-white px-3 py-2.5 transition hover:border-slate-300 hover:shadow-sm peer-checked:border-primary-600 peer-checked:bg-primary-50 peer-focus-visible:ring-4 peer-focus-visible:ring-slate-900/5 dark:border-slate-600 dark:bg-slate-800 dark:hover:border-slate-500 dark:peer-checked:bg-primary-900/15 dark:peer-focus-visible:ring-white/10"},Ye={class:"flex items-center justify-between gap-2"},Ze={class:"min-w-0"},Ke={class:"flex min-w-0 items-center gap-2"},et={class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},tt={class:"mt-4 rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},st={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},lt={class:"mt-4 rounded-xl border border-slate-200/70 p-4 dark:border-slate-700/70"},rt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},at={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end"},nt={key:1,class:"overflow-hidden rounded-xl border border-slate-200/70 bg-white shadow-sm dark:border-slate-700/80 dark:bg-slate-800"},it={class:"space-y-4 p-5"},ot={class:"grid grid-cols-1 gap-4 lg:grid-cols-3"},dt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},ut={class:"relative"},xt=["value"],ct={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},pt={class:"relative"},mt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},bt={class:"relative"},gt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},vt={class:"grid grid-cols-1 items-start gap-4 md:grid-cols-3"},ft={class:"md:col-span-2"},kt={class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},yt={key:0,class:"text-red-500"},ht={key:0,class:"rounded-xl border border-blue-200/70 bg-blue-50 px-4 py-2.5 dark:border-blue-800/30 dark:bg-blue-900/15"},wt={class:"flex items-center justify-between gap-3"},_t={class:"text-sm font-bold text-blue-800 dark:text-blue-200"},jt={key:1,class:"flex gap-2"},Ct={class:"relative flex-1"},Nt={key:2,class:"mt-1.5 flex items-center gap-1.5 text-xs text-blue-700 dark:text-blue-300"},Rt={key:3,class:"mt-1.5 flex items-center gap-1.5 text-xs text-amber-700 dark:text-amber-300"},qt={class:"rounded-xl border border-slate-200/70 bg-white p-4 dark:border-slate-700/70 dark:bg-slate-800"},At={class:"mb-2.5 flex items-center justify-between gap-3"},Et={class:"text-xs text-slate-500 dark:text-slate-400"},Ut={class:"relative"},Pt={class:"flex flex-col items-center justify-between gap-3 border-t border-slate-200/60 pt-4 sm:flex-row dark:border-slate-700/70"},St={key:2,class:"overflow-hidden rounded-xl border border-gray-100 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-800"},Mt={class:"grid grid-cols-1 gap-4 p-4 lg:grid-cols-3"},Tt={class:"space-y-4 lg:col-span-2"},Vt={class:"rounded-xl border border-gray-100 bg-white p-4 dark:border-slate-700 dark:bg-slate-800"},It={class:"mb-4 flex items-center justify-between"},$t={key:0,class:"rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-700 dark:bg-green-900/30 dark:text-green-200"},Ft={key:0,class:"mt-3 max-h-80 space-y-2 overflow-auto"},Dt={class:"flex items-center gap-2"},Lt={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},zt={key:0,class:"rounded-full bg-indigo-100 px-2 py-0.5 text-xxs font-semibold text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300"},Ot={class:"text-xs text-slate-500 dark:text-slate-400"},Xt={key:0,class:"ml-1 text-blue-600 dark:text-blue-400"},Jt={key:0,class:"mt-1 text-xxs text-indigo-600 dark:text-indigo-400"},Bt=["disabled","onClick"],Ht={class:"flex justify-between"},Gt={class:"space-y-4"},Wt={class:"rounded-xl bg-slate-50 p-4 dark:bg-slate-700/50"},Qt={key:0,class:"py-4 text-center text-xs text-slate-500 dark:text-slate-400"},Yt={key:1,class:"mb-3 space-y-2"},Zt={class:"flex-1"},Kt={class:"mb-0.5 flex items-center space-x-1.5"},es={class:"rounded bg-blue-100 px-1.5 py-0.5 font-mono text-xxs font-bold text-blue-700 dark:bg-blue-900/30 dark:text-blue-200"},ts={class:"text-xs font-medium text-slate-800 dark:text-slate-100"},ss={class:"text-xxs text-slate-500 dark:text-slate-400"},ls={key:0,class:"mt-0.5 inline-block rounded-full bg-purple-100 px-1.5 py-0.5 text-xxs text-purple-700 dark:bg-purple-900/30 dark:text-purple-200"},rs={class:"ml-2 text-right"},as={class:"text-xs font-medium text-slate-700 dark:text-slate-300"},ns=["onClick"],is={class:"rounded-lg bg-green-50/70 p-3 text-sm dark:bg-green-900/15"},os={class:"flex items-center justify-between"},ds={class:"font-semibold text-green-700 dark:text-green-300"},us={key:3,class:"overflow-hidden rounded-xl border border-gray-100 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-800"},xs={class:"bg-gradient-to-r from-yellow-50 to-orange-50 px-4 py-3 dark:from-slate-700 dark:to-slate-800"},cs={class:"flex items-center justify-between"},ps={key:0,class:"rounded-full bg-yellow-100 px-2 py-1 text-xs font-medium text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-200"},ms={class:"grid grid-cols-1 gap-4 p-4 xl:grid-cols-3"},bs={class:"space-y-4 xl:col-span-2"},gs={class:"rounded-lg bg-slate-50 p-3 dark:bg-slate-700/50"},vs={key:0,class:"grid grid-cols-1 gap-2 lg:grid-cols-2"},fs={class:"flex items-start gap-2.5 flex-1"},ks={class:"flex-1 min-w-0"},ys={class:"text-xs font-medium text-slate-800 dark:text-slate-100"},hs={class:"mt-1 flex items-center gap-2"},ws={class:"inline-flex items-center rounded-full bg-yellow-100 px-1.5 py-0.5 text-xxs font-medium text-yellow-700 dark:bg-yellow-900 dark:text-yellow-200"},_s={key:0,class:"text-xxs font-medium text-green-600 dark:text-green-400"},js=["disabled","onClick"],Cs={class:"flex justify-between border-t border-gray-100 pt-3 dark:border-slate-700"},Ns={class:"rounded-lg bg-slate-50 p-3 dark:bg-slate-700/50"},Rs={key:0,class:"py-4 text-center text-xs text-slate-500 dark:text-slate-400"},qs={key:1,class:"space-y-2"},As={class:"mb-2 flex items-start justify-between gap-2"},Es={class:"text-xs font-medium text-slate-800 dark:text-slate-100"},Us={class:"mt-1 text-xxs text-slate-500 dark:text-slate-400"},Ps=["onClick"],Ss={class:"flex items-center justify-between"},Ms=["onUpdate:modelValue"],Ts={class:"mt-3 border-t border-slate-200 pt-2 dark:border-slate-600"},Vs={class:"flex items-center justify-between text-sm"},Is={class:"font-semibold text-yellow-700 dark:text-yellow-300"},$s={key:4,class:"overflow-hidden rounded-xl border border-gray-100 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-800"},Fs={class:"bg-gradient-to-r from-red-50 to-pink-50 px-4 py-3 dark:from-slate-700 dark:to-slate-800"},Ds={class:"flex items-center justify-between"},Ls={class:"text-right"},zs={class:"text-lg font-bold text-red-600 dark:text-red-400"},Os={class:"grid grid-cols-1 gap-4 p-4 xl:grid-cols-3"},Xs={class:"space-y-4 xl:col-span-2"},Js={class:"rounded-lg bg-slate-50 p-3 dark:bg-slate-700/50"},Bs={class:"space-y-2 text-sm"},Hs={class:"flex justify-between border-b border-slate-200 py-1.5 dark:border-slate-600"},Gs={class:"font-medium text-slate-800 dark:text-slate-100"},Ws={class:"flex justify-between border-b border-slate-200 py-1.5 dark:border-slate-600"},Qs={class:"font-medium text-slate-800 dark:text-slate-100"},Ys={class:"flex justify-between border-b border-slate-200 py-1.5 dark:border-slate-600"},Zs={class:"font-medium text-slate-800 dark:text-slate-100"},Ks={class:"flex justify-between border-b border-slate-200 py-1.5 dark:border-slate-600"},el={class:"font-medium text-red-600 dark:text-red-400"},tl={class:"rounded-lg border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-900/20"},sl={class:"flex items-center justify-between"},ll={class:"text-base font-bold text-red-600 dark:text-red-400"},rl={class:"space-y-4"},al={class:"rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-700 dark:bg-slate-800"},nl=["value"],il={class:"rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-700 dark:bg-slate-800"},ol={class:"inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-white p-3 text-sm text-slate-700 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300"},dl={class:"flex justify-between border-t border-gray-100 px-4 pb-4 pt-3 dark:border-slate-700"},ul=["disabled"],xl={key:0},cl={key:1},pl={key:5,class:"overflow-hidden rounded-xl border border-gray-100 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-800"},ml={class:"p-4 space-y-4"},bl={class:"text-sm text-slate-700 dark:text-slate-300"},gl={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"},vl={class:"text-sm font-mono font-bold text-slate-800 dark:text-slate-100"},fl={class:"flex justify-end pt-4"},kl={key:6,class:"overflow-hidden rounded-xl border border-gray-100 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-800"},yl={class:"p-6 text-center space-y-4"},hl={class:"flex justify-center gap-3"},wl=["href"],Al={__name:"Edit",props:{prescription:{type:Object,required:!0},prescripteurs:{type:Array,default:()=>[]},paymentMethods:{type:Array,default:()=>[]},urgenceFees:{type:Object,default:()=>({jour:0,nuit:0})},civilites:{type:Array,default:()=>[]}},setup(E){var Z;const o=E,j=[{key:"patient",icon:"user",label:"Patient"},{key:"clinique",icon:"list-round",label:"Clinique"},{key:"analyses",icon:"filter",label:"Analyses"},{key:"prelevements",icon:"package",label:"Prelevements"},{key:"paiement",icon:"coin-alt",label:"Paiement"},{key:"tubes",icon:"scan",label:"Etiquettes"},{key:"confirmation",icon:"check-circle",label:"Fini"}],g=_("patient"),X=_(!1),V=_(""),I=_([]),m=_([]);let J=null;const F=_(""),$=_([]),y=_([]);let B=null;const x=_({nom:"",prenom:"",civilite:o.civilites[0]||"Monsieur",date_naissance:"",telephone:"",email:"",adresse:""}),d=_({prescripteur_id:"",patient_type:"EXTERNE",age:0,unite_age:"Ans",poids:"",renseignement_clinique:""}),C=_({payment_method:((Z=o.paymentMethods[0])==null?void 0:Z.code)||"",remise:0,paiement_statut:!0});fe(()=>{var l,t,u,v,w;if(o.prescription){if(o.prescription.patient&&(x.value={nom:o.prescription.patient.nom||"",prenom:o.prescription.patient.prenom||"",civilite:o.prescription.patient.civilite||o.civilites[0],date_naissance:o.prescription.patient.date_naissance||"",telephone:o.prescription.patient.telephone||"",email:o.prescription.patient.email||"",adresse:o.prescription.patient.adresse||""}),d.value={prescripteur_id:o.prescription.prescripteur_id||"",patient_type:o.prescription.patient_type||"EXTERNE",age:Number(o.prescription.age||0),unite_age:o.prescription.unite_age||"Ans",poids:o.prescription.poids||"",renseignement_clinique:o.prescription.renseignement_clinique||""},((l=o.prescription.analyses)==null?void 0:l.length)>0&&(m.value=o.prescription.analyses.map(c=>({id:c.id,code:c.code,designation:c.designation,prix:c.prix,parent_id:c.parent_id,parent:c.parent,level:c.level}))),((t=o.prescription.prelevements)==null?void 0:t.length)>0&&(y.value=o.prescription.prelevements.map(c=>{var s;return{id:c.id,denomination:c.denomination,prix:c.prix,prix_promotion:c.prix_promotion,quantite:((s=c.pivot)==null?void 0:s.quantite)||1}})),((u=o.prescription.paiements)==null?void 0:u.length)>0){const c=o.prescription.paiements[0];C.value={payment_method:((v=c.payment_method)==null?void 0:v.code)||((w=o.paymentMethods[0])==null?void 0:w.code)||"",remise:o.prescription.remise>0?(o.prescription.remise/c.montant*100).toFixed(0):0,paiement_statut:!!c.status}}const U=new URLSearchParams(window.location.search).get("step");U&&j.some(c=>c.key===U)&&(g.value=U)}});const le=P(()=>new Date().toLocaleString("fr-FR")),M=P(()=>j.findIndex(l=>l.key===g.value)),re=P(()=>j.length<=1?0:M.value/(j.length-1)*100),D=P(()=>m.value.reduce((l,t)=>l+Number(t.prix_effectif||t.prix||0),0)),L=P(()=>y.value.reduce((l,t)=>{const u=Math.max(1,Number(t.quantite||1)),v=Number(t.prix_promotion||0),w=u>1&&v>0?v:Number(t.prix||0);return l+w*u},0)),G=P(()=>d.value.patient_type==="URGENCE-JOUR"?Number(o.urgenceFees.jour||0):d.value.patient_type==="URGENCE-NUIT"?Number(o.urgenceFees.nuit||0):0),W=P(()=>{const l=Math.max(0,Number(C.value.remise||0));return(D.value+L.value)*(l/100)}),Q=P(()=>{const l=D.value+L.value;return Math.max(0,l-W.value+G.value)}),k=l=>`${Number(l||0).toLocaleString("fr-FR")} Ar`,ae=l=>j.findIndex(u=>u.key===l.key)<M.value?"bg-green-500 text-white shadow-sm":l.key===g.value?"bg-primary-500 text-white shadow-md scale-110":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 hover:bg-gray-200 dark:hover:bg-slate-600",ne=l=>j.findIndex(u=>u.key===l.key)<M.value?"text-green-600 dark:text-green-400":l.key===g.value?"text-primary-600 dark:text-primary-400":"text-slate-500 dark:text-slate-400",ie=l=>String(l||"").trim()||"-",oe=()=>{const l=x.value.date_naissance;if(!l)return;const t=new Date(l),u=new Date,v=1440*60*1e3,w=Math.floor((u.getTime()-t.getTime())/v),S=Math.floor(w/30.4375),U=Math.floor(S/12);if(w<=60){d.value.age=w,d.value.unite_age="Jours";return}if(S<24){d.value.age=S,d.value.unite_age="Mois";return}d.value.age=U,d.value.unite_age="Ans"},h=async l=>{l==="clinique"&&!x.value.nom.trim()||l==="analyses"&&!d.value.prescripteur_id||l==="prelevements"&&m.value.length===0||l==="paiement"&&m.value.length===0||(g.value=l,l==="prelevements"&&$.value.length===0&&await Y(""))},de=()=>{var l;g.value="patient",isNewPatient.value=!1,X.value=!1,patientSearch.value="",patientResults.value=[],selectedPatient.value=null,V.value="",I.value=[],m.value=[],F.value="",$.value=[],y.value=[],x.value={nom:"",prenom:"",civilite:o.civilites[0]||"Monsieur",date_naissance:"",telephone:"",email:"",adresse:""},d.value={prescripteur_id:"",patient_type:"EXTERNE",age:0,unite_age:"Ans",poids:"",renseignement_clinique:""},C.value={payment_method:((l=o.paymentMethods[0])==null?void 0:l.code)||"",remise:0,paiement_statut:!0}},ue=async l=>{const u=await(await fetch(`${route("secretaire.prescription.lookup.analyses")}?q=${encodeURIComponent(l)}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();I.value=u.data||[]},Y=async l=>{const u=await(await fetch(`${route("secretaire.prescription.lookup.prelevements")}?q=${encodeURIComponent(l)}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();$.value=u.data||[]},xe=()=>{J&&window.clearTimeout(J),J=window.setTimeout(async()=>{if(V.value.trim().length<2){I.value=[];return}await ue(V.value.trim())},250)},ce=()=>{B&&window.clearTimeout(B),B=window.setTimeout(async()=>{await Y(F.value.trim())},250)},z=l=>m.value.some(t=>t.id===l),pe=l=>{if(!z(l.id))if(l.is_parent){const t=m.value.filter(u=>u.parent_id===l.id);if(t.length>0){alert(`Certaines analyses de ce panel sont dÃ©jÃ  sÃ©lectionnÃ©es: ${t.map(u=>u.designation).join(", ")}`);return}if(Number(l.prix||0)<=0){alert("Ce panel n'a pas de prix dÃ©fini");return}m.value.push({id:l.id,designation:l.designation,code:l.code,level:l.level,prix:Number(l.prix||0),prix_effectif:Number(l.prix||0),parent_id:null,parent_nom:"Panel complet",is_parent:!0,enfants_inclus:l.enfants_inclus||[]})}else{if(l.parent_id){const u=m.value.find(v=>v.id===l.parent_id&&v.is_parent);if(u){alert(`Cette analyse est dÃ©jÃ  incluse dans le panel Â« ${u.designation} Â»`);return}}let t="Analyse individuelle";l.parent_nom?t=l.parent_nom:l.parent&&Number(l.parent.prix||0)>0?t=`${l.parent.designation} (partie)`:l.parent&&(t=l.parent.designation),m.value.push({id:l.id,designation:l.designation,code:l.code,level:l.level,prix:Number(l.prix||0),prix_effectif:Number(l.prix||0),parent_id:l.parent_id,parent_nom:t,is_parent:!1})}},me=l=>{m.value=m.value.filter(t=>t.id!==l)},T=l=>y.value.some(t=>t.id===l),be=l=>{T(l.id)||y.value.push({...l,quantite:1})},ge=l=>{y.value=y.value.filter(t=>t.id!==l)},ve=()=>{!x.value.nom.trim()||!d.value.prescripteur_id||m.value.length===0||!C.value.payment_method||h("tubes")};return(l,t)=>(a(),ke(_e,null,{default:H(()=>{var u,v,w,S,U,c;return[e("div",je,[e("div",Ce,[ee(te(se),{href:l.route("secretaire.prescription.index"),class:"inline-flex items-center rounded-lg bg-gray-50 px-3 py-1.5 text-sm text-gray-600 transition-colors hover:bg-gray-100 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},{default:H(()=>[...t[26]||(t[26]=[e("em",{class:"ni ni-arrow-left mr-1.5 text-xs"},null,-1),r("Retour a la liste ",-1)])]),_:1},8,["href"])]),e("div",Ne,[e("div",Re,[e("div",null,[t[28]||(t[28]=e("h1",{class:"flex items-center text-base font-semibold text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-dashlite mr-2 text-sm text-primary-500"}),r("Nouvelle Prescription ")],-1)),e("p",qe,[t[27]||(t[27]=r(" Reference: ",-1)),e("span",Ae,i((u=E.prescription)==null?void 0:u.reference),1)])]),e("div",Ee,[e("div",Ue,[e("div",Pe,i(le.value),1),e("div",Se,"Cree par: "+i((v=l.$page.props.auth.user)==null?void 0:v.name),1)]),e("button",{type:"button",class:"rounded-md bg-red-50 px-2.5 py-1.5 text-xs text-red-600 transition-colors hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",onClick:de},[...t[29]||(t[29]=[e("em",{class:"ni ni-refresh mr-1 text-xs"},null,-1),r("Reset ",-1)])])])]),e("div",Me,[e("div",Te,[e("div",{class:"h-full bg-gradient-to-r from-primary-400 to-green-400 transition-all duration-300",style:ye({width:`${re.value}%`})},null,4)]),e("div",Ve,[(a(),n(R,null,q(j,s=>e("div",{key:s.key,class:"flex flex-col items-center"},[e("button",{type:"button",class:A(["relative mb-1.5 flex h-8 w-8 items-center justify-center rounded-full transition-all duration-200",ae(s)]),onClick:N=>h(s.key)},[e("em",{class:A(`ni ni-${s.icon} text-xs`)},null,2)],10,Ie),e("span",{class:A(["block text-xxs font-medium",ne(s)])},i(s.label),3)])),64))])]),e("div",$e,[e("div",Fe,[e("em",{class:A(`ni ni-${j[M.value].icon} mr-1.5 text-xs text-primary-600 dark:text-primary-400`)},null,2),e("span",De," Etape "+i(M.value+1)+"/"+i(j.length)+" : "+i(j[M.value].label),1)])])]),g.value==="patient"?(a(),n("section",Le,[t[43]||(t[43]=e("div",{class:"border-b border-slate-200/60 px-5 py-4 dark:border-slate-700/70"},[e("div",{class:"flex items-start justify-between gap-4"},[e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-primary-600 shadow-sm"},[e("em",{class:"ni ni-user text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},[r(" Patient "),e("span",{class:"font-normal text-slate-600 dark:text-slate-400"},"- Modification")]),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Modifier les informations du patient.")])])])],-1)),e("div",ze,[e("div",Oe,[e("div",Xe,[t[41]||(t[41]=e("div",{class:"mb-4 flex items-center justify-between"},[e("h3",{class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},"Dossier patient"),e("span",{class:"text-xs text-slate-600 dark:text-slate-400"},"* obligatoires")],-1)),e("div",Je,[t[32]||(t[32]=e("h4",{class:"mb-3 text-sm font-semibold text-slate-900 dark:text-slate-100"},"Identite",-1)),e("div",Be,[e("div",null,[t[30]||(t[30]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},[r("Nom "),e("span",{class:"text-red-500"},"*")],-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>x.value.nom=s),type:"text",placeholder:"Ex: RAJAONA",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[f,x.value.nom]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Prenom(s)",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value.prenom=s),type:"text",placeholder:"Ex: Miangaly",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[f,x.value.prenom]])])])]),e("div",He,[t[35]||(t[35]=e("div",{class:"mb-2.5 flex items-center justify-between gap-3"},[e("h4",{class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},[r("Civilite "),e("span",{class:"text-red-500"},"*")])],-1)),e("div",Ge,[(a(!0),n(R,null,q(E.civilites,s=>(a(),n("label",{key:s,class:"cursor-pointer"},[p(e("input",{"onUpdate:modelValue":N=>x.value.civilite=N,type:"radio",value:s,class:"peer sr-only"},null,8,We),[[he,x.value.civilite]]),e("div",Qe,[e("div",Ye,[e("div",Ze,[e("div",Ke,[e("div",et,i(ie(s)),1),t[33]||(t[33]=e("span",{class:"hidden items-center gap-1 rounded-full border border-primary-200 bg-primary-50 px-2 py-0.5 text-[11px] font-semibold text-primary-700 peer-checked:inline-flex dark:border-primary-800/30 dark:bg-primary-900/15 dark:text-primary-200"},[e("em",{class:"ni ni-check text-[11px]"}),r(" Selectionne ")],-1))])]),t[34]||(t[34]=e("span",{class:"flex h-6 w-6 shrink-0 scale-95 items-center justify-center rounded-full border border-slate-200 bg-white opacity-0 transition peer-checked:scale-100 peer-checked:opacity-100 dark:border-slate-600 dark:bg-slate-700"},[e("em",{class:"ni ni-check text-xs text-primary-600"})],-1))])])]))),128))])]),e("div",tt,[t[38]||(t[38]=e("h4",{class:"mb-3 text-sm font-semibold text-slate-900 dark:text-slate-100"},"Contact",-1)),e("div",st,[e("div",null,[t[36]||(t[36]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Telephone",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>x.value.telephone=s),type:"tel",placeholder:"+261 34 12 345 67",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[f,x.value.telephone]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Email",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>x.value.email=s),type:"email",placeholder:"email@exemple.com",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[f,x.value.email]])])])]),e("div",lt,[t[39]||(t[39]=e("h4",{class:"mb-3 text-sm font-semibold text-slate-900 dark:text-slate-100"},"Adresse",-1)),t[40]||(t[40]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Rue / Quartier / Lot",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>x.value.adresse=s),type:"text",placeholder:"Ex: Lot II M 45 Bis Analakely",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 placeholder-slate-400 transition focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[f,x.value.adresse]])])]),e("div",rt,[e("div",at,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700 sm:w-auto",onClick:t[5]||(t[5]=s=>h("clinique"))},[...t[42]||(t[42]=[e("em",{class:"ni ni-check"},null,-1),r(" Valider et continuer ",-1)])])])])])])])):b("",!0),g.value==="clinique"?(a(),n("section",nt,[t[72]||(t[72]=e("div",{class:"bg-gradient-to-r from-cyan-50 to-blue-50 px-5 py-4 dark:from-slate-800 dark:to-slate-800"},[e("div",{class:"flex items-start justify-between gap-4"},[e("div",{class:"flex min-w-0 items-start gap-3"},[e("div",{class:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-cyan-600 shadow-sm"},[e("em",{class:"ni ni-notes text-base text-white"})]),e("div",{class:"min-w-0"},[e("h2",{class:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100"},"Informations cliniques"),e("p",{class:"mt-1 truncate text-xs text-slate-600 dark:text-slate-400"},"Renseignements medicaux et prescription.")])]),e("div",{class:"shrink-0 flex items-center gap-2"},[e("span",{class:"inline-flex items-center gap-1.5 rounded-lg border border-cyan-200 bg-cyan-50 px-2.5 py-1 text-xs font-semibold text-cyan-800 dark:border-cyan-800/30 dark:bg-cyan-900/15 dark:text-cyan-200"},[e("em",{class:"ni ni-check-circle"}),r(" Clinique ")]),e("span",{class:"hidden items-center gap-2 text-xs text-slate-500 sm:inline-flex dark:text-slate-400"},[e("span",{class:"inline-flex items-center gap-1"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-cyan-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-slate-300 dark:bg-slate-600"})]),r(" Etape 2/7 ")])])])],-1)),e("div",it,[e("div",ot,[e("div",dt,[t[47]||(t[47]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-user-md mr-1.5 text-cyan-600 dark:text-cyan-300"}),r(" Prescripteur "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ut,[t[45]||(t[45]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-user-md text-base text-slate-400 dark:text-slate-500"})],-1)),p(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>d.value.prescripteur_id=s),class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 transition hover:border-slate-300 focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:hover:border-slate-500"},[t[44]||(t[44]=e("option",{value:""},"Selectionner un prescripteur...",-1)),(a(!0),n(R,null,q(E.prescripteurs,s=>(a(),n("option",{key:s.id,value:s.id},i(s.nom_complet),9,xt))),128))],512),[[O,d.value.prescripteur_id]]),t[46]||(t[46]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("em",{class:"ni ni-chevron-down text-xs text-slate-400 dark:text-slate-500"})],-1))])]),e("div",ct,[t[51]||(t[51]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-building mr-1.5 text-blue-600 dark:text-blue-300"}),r(" Type de patient ")],-1)),e("div",pt,[t[49]||(t[49]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-building text-base text-slate-400 dark:text-slate-500"})],-1)),p(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>d.value.patient_type=s),class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 transition hover:border-slate-300 focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:hover:border-slate-500"},[...t[48]||(t[48]=[e("option",{value:"EXTERNE"},"ðŸ  Externe",-1),e("option",{value:"HOSPITALISE"},"ðŸ¥ Hospitalise",-1),e("option",{value:"URGENCE-JOUR"},"ðŸš¨ Urgence Jour",-1),e("option",{value:"URGENCE-NUIT"},"ðŸŒ™ Urgence Nuit",-1)])],512),[[O,d.value.patient_type]]),t[50]||(t[50]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("em",{class:"ni ni-chevron-down text-xs text-slate-400 dark:text-slate-500"})],-1))]),t[52]||(t[52]=e("p",{class:"mt-2 flex items-center gap-1.5 text-xs text-slate-600 dark:text-slate-400"},[e("em",{class:"ni ni-info-circle"}),r(" Utile pour le tri et la prise en charge. ")],-1))]),e("div",mt,[t[55]||(t[55]=e("div",{class:"mb-2.5 flex items-center justify-between gap-3"},[e("label",{class:"block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-activity mr-1.5 text-orange-600 dark:text-orange-300"}),r(" Poids ")]),e("span",{class:"text-xs text-slate-500 dark:text-slate-400"},"kg")],-1)),e("div",bt,[t[53]||(t[53]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-activity text-base text-slate-400 dark:text-slate-500"})],-1)),p(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>d.value.poids=s),type:"number",min:"0",step:"0.1",placeholder:"Ex: 65.5",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-12 text-sm text-slate-900 placeholder-slate-400 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[f,d.value.poids,void 0,{number:!0}]]),t[54]||(t[54]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3.5"},[e("span",{class:"text-xs font-semibold text-slate-500 dark:text-slate-400"},"kg")],-1))]),t[56]||(t[56]=e("p",{class:"mt-2 flex items-center gap-1.5 text-xs text-slate-600 dark:text-slate-400"},[e("em",{class:"ni ni-info-circle"}),r(" Optionnel - utile pour le calcul des doses. ")],-1))])]),e("div",gt,[t[64]||(t[64]=e("div",{class:"mb-3 flex items-center justify-between gap-3"},[e("h3",{class:"flex items-center gap-2 text-sm font-semibold text-slate-900 dark:text-slate-100"},[e("span",{class:"flex h-8 w-8 items-center justify-center rounded-xl border border-emerald-200/70 bg-emerald-50 dark:border-emerald-800/30 dark:bg-emerald-900/15"},[e("em",{class:"ni ni-calendar text-sm text-emerald-700 dark:text-emerald-300"})]),r(" Naissance et age ")]),e("span",{class:"text-xs text-slate-500 dark:text-slate-400"},"Recommande")],-1)),e("div",vt,[e("div",ft,[t[57]||(t[57]=e("label",{class:"mb-1.5 block text-xs font-semibold text-slate-700 dark:text-slate-300"},"Date de naissance",-1)),p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>x.value.date_naissance=s),type:"date",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",onChange:oe},null,544),[[f,x.value.date_naissance]])]),e("div",null,[e("label",kt,[t[58]||(t[58]=r("Age ",-1)),x.value.date_naissance?b("",!0):(a(),n("span",yt,"*"))]),x.value.date_naissance?(a(),n("div",ht,[e("div",wt,[e("span",_t,i(d.value.age)+" "+i(d.value.unite_age),1),t[59]||(t[59]=e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"},null,-1))])])):(a(),n("div",jt,[e("div",Ct,[t[60]||(t[60]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5"},[e("em",{class:"ni ni-hash text-base text-slate-400 dark:text-slate-500"})],-1)),p(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>d.value.age=s),type:"number",min:"0",max:"150",placeholder:"Ex: 32",class:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-3 text-sm text-slate-900 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"},null,512),[[f,d.value.age,void 0,{number:!0}]])]),p(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>d.value.unite_age=s),class:"w-24 rounded-xl border border-slate-200 bg-white px-3 py-2.5 text-sm text-slate-900 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"},[...t[61]||(t[61]=[e("option",{value:"Ans"},"Ans",-1),e("option",{value:"Mois"},"Mois",-1),e("option",{value:"Jours"},"Jours",-1)])],512),[[O,d.value.unite_age]])])),x.value.date_naissance?(a(),n("p",Nt,[...t[62]||(t[62]=[e("em",{class:"ni ni-info-circle"},null,-1),r(" Calcul auto. ",-1)])])):(a(),n("p",Rt,[...t[63]||(t[63]=[e("em",{class:"ni ni-info-circle"},null,-1),r(" Ajoutez une date pour calcul auto. ",-1)])]))])])]),e("div",qt,[e("div",At,[t[65]||(t[65]=e("label",{class:"block text-sm font-semibold text-slate-800 dark:text-slate-200"},[e("em",{class:"ni ni-clipboard mr-1.5 text-purple-600 dark:text-purple-300"}),r(" Renseignements cliniques ")],-1)),e("span",Et,i(String(d.value.renseignement_clinique||"").length)+" caracteres",1)]),e("div",Ut,[p(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=s=>d.value.renseignement_clinique=s),rows:"4",placeholder:"Decrivez les symptomes, antecedents medicaux, indications speciales, allergies connues...",class:"w-full resize-none rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 placeholder-slate-400 transition focus:border-cyan-500 focus:outline-none focus:ring-4 focus:ring-cyan-600/15 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder-slate-500"},null,512),[[f,d.value.renseignement_clinique]]),t[66]||(t[66]=e("div",{class:"pointer-events-none absolute right-3 top-3 text-slate-400 dark:text-slate-500"},[e("em",{class:"ni ni-edit text-sm"})],-1))]),t[67]||(t[67]=e("div",{class:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-slate-600 dark:text-slate-400"},[e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-shield-check text-emerald-600 dark:text-emerald-300"}),r(" Informations confidentielles ")]),e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-lock text-blue-600 dark:text-blue-300"}),r(" Donnees securisees ")])],-1))]),t[71]||(t[71]=e("div",{class:"rounded-xl border border-indigo-200/60 bg-indigo-50/70 p-4 dark:border-indigo-800/40 dark:bg-indigo-900/10"},[e("div",{class:"flex items-start gap-3"},[e("div",{class:"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-indigo-600 shadow-sm"},[e("em",{class:"ni ni-bulb text-sm text-white"})]),e("div",null,[e("h4",{class:"text-sm font-semibold text-indigo-900 dark:text-indigo-200"},"Conseils pour une prescription optimale"),e("div",{class:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-2 text-xs text-indigo-800 dark:text-indigo-300"},[e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"}),r("Naissance -> age calcule")]),e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"}),r("Verifier les allergies connues")]),e("span",{class:"inline-flex items-center gap-1.5"},[e("em",{class:"ni ni-check-circle text-emerald-600 dark:text-emerald-300"}),r("Noter les traitements en cours")])])])])],-1)),e("div",Pt,[e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-100 px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-200 sm:w-auto dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",onClick:t[13]||(t[13]=s=>h("patient"))},[...t[68]||(t[68]=[e("em",{class:"ni ni-arrow-left"},null,-1),r(" Retour patient ",-1)])]),t[70]||(t[70]=e("span",{class:"hidden items-center gap-2 text-xs text-slate-500 sm:inline-flex dark:text-slate-400"},[e("span",{class:"inline-flex items-center gap-1"},[e("span",{class:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-cyan-500"}),e("span",{class:"h-1.5 w-1.5 rounded-full bg-slate-300 dark:bg-slate-600"})]),r(" Etape 2/7 ")],-1)),e("button",{type:"button",class:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-primary-700 sm:w-auto",onClick:t[14]||(t[14]=s=>h("analyses"))},[...t[69]||(t[69]=[r(" Continuer vers analyses ",-1),e("em",{class:"ni ni-arrow-right"},null,-1)])])])])])):b("",!0),g.value==="analyses"?(a(),n("section",St,[e("div",Mt,[e("div",Tt,[e("div",Vt,[e("div",It,[t[73]||(t[73]=e("h2",{class:"text-base font-semibold text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-test-tube mr-2 text-sm text-green-500"}),r("Recherche Analyses ")],-1)),m.value.length>0?(a(),n("span",$t,i(m.value.length)+" selectionnees ",1)):b("",!0)]),p(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>V.value=s),type:"text",placeholder:"Code ou designation...",class:"w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-slate-900 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",onInput:xe},null,544),[[f,V.value]]),I.value.length>0?(a(),n("div",Ft,[(a(!0),n(R,null,q(I.value,s=>{var N,K;return a(),n("div",{key:s.id,class:"flex items-center justify-between rounded-lg border border-slate-200 p-3 transition-colors hover:bg-gray-50 dark:border-slate-700 dark:hover:bg-slate-700/40"},[e("div",null,[e("div",Dt,[e("p",Lt,i(s.designation),1),s.is_parent?(a(),n("span",zt," Panel ("+i(((N=s.enfants_inclus)==null?void 0:N.length)||0)+") ",1)):b("",!0)]),e("p",Ot,[r(i(s.code)+" | "+i(k(s.prix))+" ",1),s.parent_nom&&!s.is_parent?(a(),n("span",Xt,"Â· "+i(s.parent_nom),1)):b("",!0)]),s.is_parent&&((K=s.enfants_inclus)==null?void 0:K.length)>0?(a(),n("p",Jt," Inclut : "+i(s.enfants_inclus.join(", ")),1)):b("",!0)]),e("button",{type:"button",class:A(["shrink-0 rounded px-2 py-1 text-xs transition-colors",z(s.id)?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white"]),disabled:z(s.id),onClick:_l=>pe(s)},[e("em",{class:A(["ni text-xs",z(s.id)?"ni-check":"ni-plus"])},null,2)],10,Bt)])}),128))])):b("",!0)]),e("div",Ht,[e("button",{type:"button",class:"rounded-lg bg-gray-100 px-3 py-2 text-sm text-gray-700 transition-colors hover:bg-gray-200 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",onClick:t[16]||(t[16]=s=>h("clinique"))},[...t[74]||(t[74]=[e("em",{class:"ni ni-arrow-left mr-1.5 text-xs"},null,-1),r("Clinique ",-1)])]),e("button",{type:"button",class:"rounded-lg bg-primary-500 px-4 py-2 text-sm text-white transition-colors hover:bg-primary-600",onClick:t[17]||(t[17]=s=>h("prelevements"))},[...t[75]||(t[75]=[r(" Prelevements ",-1),e("em",{class:"ni ni-arrow-right ml-1.5 text-xs"},null,-1)])])])]),e("div",Gt,[e("div",Wt,[t[77]||(t[77]=e("h3",{class:"mb-3 text-sm font-medium text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-bag mr-1.5 text-xs"}),r("Analyses selectionnees ")],-1)),m.value.length===0?(a(),n("div",Qt," Aucune analyse selectionnee ")):(a(),n("div",Yt,[(a(!0),n(R,null,q(m.value,s=>(a(),n("div",{key:s.id,class:"flex items-start justify-between"},[e("div",Zt,[e("div",Kt,[e("span",es,i(s.code),1),e("div",ts,i(s.designation),1)]),e("div",ss,i(s.parent_nom||(s.parent,"Analyse individuelle")),1),s.is_parent?(a(),n("span",ls," Panel complet ")):b("",!0)]),e("div",rs,[e("div",as,i((s.prix_effectif||s.prix)>0?k(s.prix_effectif||s.prix):"Inclus"),1),e("button",{type:"button",class:"text-xxs text-red-500 transition-colors hover:text-red-600",onClick:N=>me(s.id)},[...t[76]||(t[76]=[e("em",{class:"ni ni-cross text-xs"},null,-1)])],8,ns)])]))),128))]))]),e("div",is,[e("div",os,[t[78]||(t[78]=e("span",{class:"font-medium text-green-800 dark:text-green-200"},"Sous-total analyses",-1)),e("span",ds,i(k(D.value)),1)])])])])])):b("",!0),g.value==="prelevements"?(a(),n("section",us,[e("div",xs,[e("div",cs,[t[79]||(t[79]=e("div",{class:"flex items-center"},[e("div",{class:"flex h-8 w-8 items-center justify-center rounded-lg bg-yellow-500"},[e("em",{class:"ni ni-package text-sm text-white"})]),e("div",{class:"ml-3"},[e("h2",{class:"text-base font-semibold text-slate-800 dark:text-slate-100"},"Prelevements"),e("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Selection optionnelle des prelevements requis")])],-1)),y.value.length>0?(a(),n("span",ps,i(y.value.length)+" selectionnes ",1)):b("",!0)])]),e("div",ms,[e("div",bs,[e("div",gs,[t[80]||(t[80]=e("label",{class:"mb-2 block text-sm font-medium text-slate-700 dark:text-slate-300"},[e("em",{class:"ni ni-search mr-1.5 text-xs text-yellow-500"}),r("Rechercher un prelevement ")],-1)),p(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>F.value=s),type:"text",placeholder:"Tapez le nom du prelevement...",class:"w-full rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm text-slate-900 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",onInput:ce},null,544),[[f,F.value]])]),$.value.length>0?(a(),n("div",vs,[(a(!0),n(R,null,q($.value,s=>(a(),n("div",{key:s.id,class:A(["flex items-start justify-between rounded-lg border border-slate-200 p-2.5 transition-colors hover:border-yellow-300 hover:bg-yellow-50/50 dark:border-slate-700 dark:hover:border-yellow-500 dark:hover:bg-slate-700/40",T(s.id)?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300 dark:border-yellow-600":""])},[e("div",fs,[t[82]||(t[82]=e("div",{class:"flex h-6 w-6 shrink-0 items-center justify-center rounded bg-gradient-to-br from-yellow-500 to-orange-600 text-white"},[e("em",{class:"ni ni-flask text-xs"})],-1)),e("div",ks,[e("p",ys,i(s.denomination),1),e("div",hs,[e("span",ws,[t[81]||(t[81]=e("em",{class:"ni ni-money mr-0.5 text-xs"},null,-1)),r(" "+i(k(s.prix)),1)]),T(s.id)?(a(),n("span",_s,"âœ“ AjoutÃ©")):b("",!0)])])]),e("button",{type:"button",class:A(["ml-2 shrink-0 rounded px-2 py-1 text-xs font-medium transition-colors",T(s.id)?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 cursor-not-allowed":"bg-yellow-500 hover:bg-yellow-600 text-white"]),disabled:T(s.id),onClick:N=>be(s)},[e("em",{class:A(["ni text-xs",T(s.id)?"ni-check":"ni-plus"])},null,2)],10,js)],2))),128))])):b("",!0),e("div",Cs,[e("button",{type:"button",class:"rounded-lg bg-gray-100 px-3 py-2 text-sm text-gray-700 transition-colors hover:bg-gray-200 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",onClick:t[19]||(t[19]=s=>h("analyses"))},[...t[83]||(t[83]=[e("em",{class:"ni ni-arrow-left mr-1.5 text-xs"},null,-1),r("Analyses ",-1)])]),e("button",{type:"button",class:"rounded-lg bg-primary-500 px-4 py-2 text-sm text-white transition-colors hover:bg-primary-600",onClick:t[20]||(t[20]=s=>h("paiement"))},[...t[84]||(t[84]=[r(" Paiement ",-1),e("em",{class:"ni ni-arrow-right ml-1.5 text-xs"},null,-1)])])])]),e("div",Ns,[t[88]||(t[88]=e("h3",{class:"mb-3 text-sm font-medium text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-package mr-1.5 text-xs text-yellow-500"}),r("Prelevements selectionnes ")],-1)),y.value.length===0?(a(),n("div",Rs," Aucun prelevement selectionne ")):(a(),n("div",qs,[(a(!0),n(R,null,q(y.value,s=>(a(),n("div",{key:s.id,class:"rounded-lg border border-yellow-200 bg-white p-3 dark:border-yellow-700 dark:bg-slate-800"},[e("div",As,[e("div",null,[e("p",Es,i(s.denomination),1),e("p",Us,i(k(s.prix)),1)]),e("button",{type:"button",class:"text-xs text-red-600 hover:text-red-700",onClick:N=>ge(s.id)},[...t[85]||(t[85]=[e("em",{class:"ni ni-cross"},null,-1)])],8,Ps)]),e("div",Ss,[t[86]||(t[86]=e("label",{class:"text-xxs text-slate-600 dark:text-slate-400"},"Quantite",-1)),p(e("input",{"onUpdate:modelValue":N=>s.quantite=N,type:"number",min:"1",max:"10",class:"w-16 rounded border border-slate-300 bg-white px-2 py-1 text-center text-xs text-slate-900 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"},null,8,Ms),[[f,s.quantite,void 0,{number:!0}]])])]))),128))])),e("div",Ts,[e("div",Vs,[t[87]||(t[87]=e("span",{class:"font-medium text-slate-800 dark:text-slate-100"},"Total prelevements",-1)),e("span",Is,i(k(L.value)),1)])])])])])):b("",!0),g.value==="paiement"?(a(),n("section",$s,[e("div",Fs,[e("div",Ds,[t[90]||(t[90]=e("div",{class:"flex items-center"},[e("div",{class:"flex h-8 w-8 items-center justify-center rounded-lg bg-red-500"},[e("em",{class:"ni ni-coin text-sm text-white"})]),e("div",{class:"ml-3"},[e("h2",{class:"text-base font-semibold text-slate-800 dark:text-slate-100"},"Paiement & Facturation"),e("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Finalisation de la prescription")])],-1)),e("div",Ls,[e("div",zs,i(k(Q.value)),1),t[89]||(t[89]=e("div",{class:"text-xs text-slate-500 dark:text-slate-400"},"Total a payer",-1))])])]),e("div",Os,[e("div",Xs,[e("div",Js,[t[96]||(t[96]=e("h3",{class:"mb-3 text-sm font-medium text-slate-800 dark:text-slate-100"},[e("em",{class:"ni ni-calculator mr-1.5 text-xs text-green-500"}),r("Resume financier ")],-1)),e("div",Bs,[e("div",Hs,[t[91]||(t[91]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Sous-total analyses",-1)),e("span",Gs,i(k(D.value)),1)]),e("div",Ws,[t[92]||(t[92]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Sous-total prelevements",-1)),e("span",Qs,i(k(L.value)),1)]),e("div",Ys,[t[93]||(t[93]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Frais urgence",-1)),e("span",Zs,i(k(G.value)),1)]),e("div",Ks,[t[94]||(t[94]=e("span",{class:"text-slate-600 dark:text-slate-400"},"Remise",-1)),e("span",el,"- "+i(k(W.value)),1)]),e("div",tl,[e("div",sl,[t[95]||(t[95]=e("span",{class:"text-sm font-semibold text-red-800 dark:text-red-200"},"Total final",-1)),e("span",ll,i(k(Q.value)),1)])])])])]),e("div",rl,[e("div",al,[t[98]||(t[98]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},"Mode de paiement",-1)),p(e("select",{"onUpdate:modelValue":t[21]||(t[21]=s=>C.value.payment_method=s),class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"},[t[97]||(t[97]=e("option",{value:""},"Selectionner",-1)),(a(!0),n(R,null,q(E.paymentMethods,s=>(a(),n("option",{key:s.code,value:s.code},i(s.label),9,nl))),128))],512),[[O,C.value.payment_method]])]),e("div",il,[t[99]||(t[99]=e("label",{class:"mb-2 block text-sm font-semibold text-slate-800 dark:text-slate-200"},"Remise (%)",-1)),p(e("input",{"onUpdate:modelValue":t[22]||(t[22]=s=>C.value.remise=s),type:"number",min:"0",max:"100",placeholder:"0",class:"w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100"},null,512),[[f,C.value.remise,void 0,{number:!0}]])]),e("label",ol,[p(e("input",{"onUpdate:modelValue":t[23]||(t[23]=s=>C.value.paiement_statut=s),type:"checkbox",class:"rounded border-slate-300 dark:border-slate-600"},null,512),[[we,C.value.paiement_statut]]),t[100]||(t[100]=r(" Marquer comme paye ",-1))])])]),e("div",dl,[e("button",{type:"button",class:"rounded-lg bg-gray-100 px-3 py-2 text-sm text-gray-700 transition-colors hover:bg-gray-200 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600",onClick:t[24]||(t[24]=s=>h("prelevements"))},[...t[101]||(t[101]=[e("em",{class:"ni ni-arrow-left mr-1.5 text-xs"},null,-1),r("Prelevements ",-1)])]),e("button",{type:"button",class:"rounded-lg bg-green-600 px-4 py-2 text-sm text-white transition-colors hover:bg-green-700 disabled:opacity-50",disabled:X.value,onClick:ve},[X.value?(a(),n("span",xl,"Enregistrement...")):(a(),n("span",cl,[...t[102]||(t[102]=[r("Terminer ",-1),e("em",{class:"ni ni-check-circle ml-1.5 text-xs"},null,-1)])]))],8,ul)])])):b("",!0),g.value==="tubes"?(a(),n("section",pl,[t[105]||(t[105]=e("div",{class:"bg-gradient-to-r from-teal-50 to-emerald-50 px-4 py-3 dark:from-slate-700 dark:to-slate-800"},[e("div",{class:"flex items-center"},[e("div",{class:"flex h-8 w-8 items-center justify-center rounded-lg bg-teal-500"},[e("em",{class:"ni ni-scan text-sm text-white"})]),e("div",{class:"ml-3"},[e("h2",{class:"text-base font-semibold text-slate-800 dark:text-slate-100"},"Etiquettes et Tubes"),e("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Preparation des prelevements")])])],-1)),e("div",ml,[e("p",bl," Imprimez les codes-barres des "+i(((S=(w=E.prescription)==null?void 0:w.tubes)==null?void 0:S.length)||0)+" tubes generes pour cette prescription. ",1),e("div",gl,[(a(!0),n(R,null,q((U=E.prescription)==null?void 0:U.tubes,s=>(a(),n("div",{key:s.id,class:"flex flex-col items-center justify-center space-y-2 rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800/50"},[t[103]||(t[103]=e("em",{class:"ni ni-barcode text-4xl text-slate-400"},null,-1)),e("div",vl,i(s.code_barre),1)]))),128))]),e("div",fl,[e("button",{type:"button",class:"rounded-lg bg-primary-600 px-5 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-primary-700",onClick:t[25]||(t[25]=s=>h("confirmation"))},[...t[104]||(t[104]=[r(" Suivant ",-1),e("em",{class:"ni ni-arrow-right ml-1"},null,-1)])])])])])):b("",!0),g.value==="confirmation"?(a(),n("section",kl,[t[109]||(t[109]=e("div",{class:"bg-gradient-to-r from-emerald-50 to-green-50 px-4 py-3 dark:from-slate-700 dark:to-slate-800"},[e("div",{class:"flex items-center text-emerald-700 dark:text-emerald-400"},[e("em",{class:"ni ni-check-circle text-xl mr-3"}),e("h2",{class:"text-base font-semibold"},"Prescription finalisee")])],-1)),e("div",yl,[t[108]||(t[108]=e("p",{class:"text-slate-600 dark:text-slate-400"}," La prescription a bien ete enregistree et le processus est complet. ",-1)),e("div",hl,[e("a",{href:l.route("prescription.facture",(c=E.prescription)==null?void 0:c.id),target:"_blank",class:"inline-flex rounded-lg bg-red-600 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-red-700"},[...t[106]||(t[106]=[e("em",{class:"ni ni-file-pdf mr-2 text-base"},null,-1),r(" Voir Ticket / Facture ",-1)])],8,wl),ee(te(se),{href:l.route("secretaire.prescription.index"),class:"inline-flex rounded-lg bg-slate-100 px-4 py-2 text-sm font-semibold text-slate-700 transition-colors hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"},{default:H(()=>[...t[107]||(t[107]=[r(" Retour a la liste ",-1)])]),_:1},8,["href"])])])])):b("",!0)])]}),_:1}))}};export{Al as default};
