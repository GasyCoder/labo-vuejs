import{m as z,w as B,c as d,a as A,u as a,h as V,b as L,d as e,t as o,e as R,v as D,g as x,n as i,p as b,o as l,F as m,f as M,s as H,y as O,l as p}from"./app-CepxlqUZ.js";import{_ as F}from"./AppLayout-BuOsbdxc.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const U={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-8"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},I={class:"flex items-center justify-between"},P={class:"text-3xl font-bold mt-1"},q={class:"text-blue-200 text-xs mt-1"},J={class:"flex items-center justify-between"},K={class:"text-3xl font-bold mt-1"},Q={class:"flex items-center justify-between"},W={class:"text-3xl font-bold mt-1"},X={class:"mb-6"},Y={class:"relative"},Z={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},ee={class:"border-b border-gray-200 dark:border-gray-700"},te={class:"-mb-px flex"},re={class:"flex items-center gap-2"},ae={class:"flex items-center gap-2"},se={class:"flex items-center gap-2"},ne={class:"overflow-x-auto"},le={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},de={key:0,class:"px-6 py-3 text-left text-xs font-medium text-blue-700 dark:text-blue-300 uppercase tracking-wider"},oe={key:1,class:"px-6 py-3 text-left text-xs font-medium text-red-700 dark:text-red-300 uppercase tracking-wider"},ie={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ue={class:"px-6 py-4 whitespace-nowrap"},xe={class:"text-sm font-semibold text-gray-900 dark:text-white"},ce={class:"px-6 py-4 whitespace-nowrap"},be={class:"flex items-center"},ge={class:"text-sm font-medium text-gray-900 dark:text-white"},me={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},pe={class:"px-6 py-4 whitespace-nowrap"},fe={class:"text-sm text-gray-900 dark:text-white"},ye={class:"px-6 py-4"},he={class:"text-sm font-medium text-gray-900 dark:text-white"},ke={key:0,class:"px-6 py-4 whitespace-nowrap"},ve={key:0,class:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"},we={key:1,class:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-300"},_e={key:1,class:"px-6 py-4"},Ce={class:"text-sm text-red-600 dark:text-red-400"},Te={class:"px-6 py-4 whitespace-nowrap"},Ae={class:"text-sm text-gray-900 dark:text-white"},Me={key:2,class:"px-6 py-4 whitespace-nowrap"},Se=["onClick"],Ne=["onClick"],je=["onClick"],Ee={key:0},$e=["colspan"],ze={class:"flex flex-col items-center"},Be={class:"text-sm font-medium"},Ve={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700"},Le={class:"flex items-center justify-between"},Re={class:"text-sm text-gray-500 dark:text-gray-400"},De={class:"flex gap-1"},He=["innerHTML"],qe={__name:"Index",props:{prescriptions:Object,stats:Object,filters:Object},setup(u){const f=u,r=z({tab:f.filters.tab||"en_attente",search:f.filters.search||""});let y=null;B(()=>r.search,n=>{clearTimeout(y),y=setTimeout(()=>{p.get(route("technicien.index"),{tab:r.tab,search:n},{preserveState:!0,preserveScroll:!0})},300)});const g=n=>{r.tab=n,p.get(route("technicien.index"),{tab:n,search:r.search},{preserveState:!0,preserveScroll:!1})},c=n=>{const t={en_attente:{active:"border-blue-500 text-blue-600 bg-blue-50 dark:bg-blue-900/20",dot:"bg-blue-500",badge:"bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-300"},termine:{active:"border-teal-500 text-teal-600 bg-teal-50 dark:bg-teal-900/20",dot:"bg-teal-500",badge:"bg-teal-100 text-teal-800 dark:bg-teal-900/40 dark:text-teal-300"},a_refaire:{active:"border-red-500 text-red-600 bg-red-50 dark:bg-red-900/20",dot:"bg-red-500",badge:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300"}};return t[n]||t.en_attente},S=n=>{var t,s;return n?(((t=n.prenom)==null?void 0:t[0])||"")+(((s=n.nom)==null?void 0:s[0])||""):"??"},N=n=>n?new Date(n).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",h=(n,t=18)=>n?n.length>t?n.substring(0,t)+"â€¦":n:"",j=n=>{p.post(route("technicien.prescription.start",n),{},{preserveScroll:!0})},E=n=>{p.post(route("technicien.prescription.continue",n))},$=n=>{confirm("Voulez-vous vraiment recommencer cette analyse ?")&&p.post(route("technicien.prescription.redo",n))};return(n,t)=>(l(),d(m,null,[A(a(V),{title:"Gestion des Analyses"}),A(F,null,{default:L(()=>[e("div",U,[t[22]||(t[22]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Gestion des Analyses "),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Saisie et validation des rÃ©sultats d'analyses ")]),e("div",{class:"flex items-center gap-2 px-3 py-1.5 bg-green-50 dark:bg-green-900/30 rounded-full border border-green-200 dark:border-green-800"},[e("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e("span",{class:"text-sm font-medium text-green-700 dark:text-green-400"},"SystÃ¨me en ligne")])])],-1)),e("div",G,[e("div",{class:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-5 text-white shadow-lg cursor-pointer hover:shadow-xl transition-shadow",onClick:t[0]||(t[0]=s=>g("en_attente"))},[e("div",I,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-blue-100 text-xs font-medium uppercase tracking-wider"},"Toutes",-1)),e("p",P,o(u.stats.toutes||0),1),e("p",q,o(u.stats.en_attente||0)+" en attente Â· "+o(u.stats.en_cours||0)+" en cours",1)]),t[8]||(t[8]=e("div",{class:"p-3 bg-white/20 rounded-lg"},[e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})])],-1))])]),e("div",{class:"bg-gradient-to-r from-teal-500 to-teal-600 rounded-xl p-5 text-white shadow-lg cursor-pointer hover:shadow-xl transition-shadow",onClick:t[1]||(t[1]=s=>g("termine"))},[e("div",J,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-teal-100 text-xs font-medium uppercase tracking-wider"},"TerminÃ©",-1)),e("p",K,o(u.stats.termine||0),1)]),t[10]||(t[10]=e("div",{class:"p-3 bg-white/20 rounded-lg"},[e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1))])]),e("div",{class:"bg-gradient-to-r from-red-500 to-red-600 rounded-xl p-5 text-white shadow-lg cursor-pointer hover:shadow-xl transition-shadow",onClick:t[2]||(t[2]=s=>g("a_refaire"))},[e("div",Q,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-red-100 text-xs font-medium uppercase tracking-wider"},"Ã€ refaire",-1)),e("p",W,o(u.stats.a_refaire||0),1)]),t[12]||(t[12]=e("div",{class:"p-3 bg-white/20 rounded-lg"},[e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1))])])]),e("div",X,[e("div",null,[e("div",Y,[t[13]||(t[13]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),R(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>a(r).search=s),placeholder:"Rechercher par rÃ©fÃ©rence, patient, prescripteur...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-700"},null,512),[[D,a(r).search]])])])]),e("div",Z,[e("div",ee,[e("nav",te,[e("button",{onClick:t[4]||(t[4]=s=>g("en_attente")),class:i(["py-4 px-6 text-sm font-medium border-b-2 transition-colors",a(r).tab==="en_attente"?c("en_attente").active:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[e("div",re,[e("div",{class:i(["w-2 h-2 rounded-full",c("en_attente").dot])},null,2),t[14]||(t[14]=b(" Toutes ",-1)),e("span",{class:i(["text-xs px-2 py-0.5 rounded-full",c("en_attente").badge])},o(u.stats.toutes||0),3)])],2),e("button",{onClick:t[5]||(t[5]=s=>g("termine")),class:i(["py-4 px-6 text-sm font-medium border-b-2 transition-colors",a(r).tab==="termine"?c("termine").active:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[e("div",ae,[e("div",{class:i(["w-2 h-2 rounded-full",c("termine").dot])},null,2),t[15]||(t[15]=b(" TerminÃ© ",-1)),e("span",{class:i(["text-xs px-2 py-0.5 rounded-full",c("termine").badge])},o(u.stats.termine||0),3)])],2),e("button",{onClick:t[6]||(t[6]=s=>g("a_refaire")),class:i(["py-4 px-6 text-sm font-medium border-b-2 transition-colors",a(r).tab==="a_refaire"?c("a_refaire").active:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[e("div",se,[e("div",{class:i(["w-2 h-2 rounded-full",c("a_refaire").dot])},null,2),t[16]||(t[16]=b(" Ã€ refaire ",-1)),e("span",{class:i(["text-xs px-2 py-0.5 rounded-full",c("a_refaire").badge])},o(u.stats.a_refaire||0),3)])],2)])]),e("div",ne,[e("table",le,[e("thead",{class:i({"bg-blue-50 dark:bg-blue-900/20":a(r).tab==="en_attente","bg-teal-50 dark:bg-teal-900/20":a(r).tab==="termine","bg-red-50 dark:bg-red-900/20":a(r).tab==="a_refaire"})},[e("tr",null,[e("th",{class:i(["px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",{"text-blue-700 dark:text-blue-300":a(r).tab==="en_attente","text-teal-700 dark:text-teal-300":a(r).tab==="termine","text-red-700 dark:text-red-300":a(r).tab==="a_refaire"}])},"RÃ©fÃ©rence",2),e("th",{class:i(["px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",{"text-blue-700 dark:text-blue-300":a(r).tab==="en_attente","text-teal-700 dark:text-teal-300":a(r).tab==="termine","text-red-700 dark:text-red-300":a(r).tab==="a_refaire"}])},"Patient",2),e("th",{class:i(["px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",{"text-blue-700 dark:text-blue-300":a(r).tab==="en_attente","text-teal-700 dark:text-teal-300":a(r).tab==="termine","text-red-700 dark:text-red-300":a(r).tab==="a_refaire"}])},"Prescripteur",2),e("th",{class:i(["px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",{"text-blue-700 dark:text-blue-300":a(r).tab==="en_attente","text-teal-700 dark:text-teal-300":a(r).tab==="termine","text-red-700 dark:text-red-300":a(r).tab==="a_refaire"}])},"Analyses",2),a(r).tab==="en_attente"?(l(),d("th",de,"Statut")):x("",!0),a(r).tab==="a_refaire"?(l(),d("th",oe,"Raison")):x("",!0),e("th",{class:i(["px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",{"text-blue-700 dark:text-blue-300":a(r).tab==="en_attente","text-teal-700 dark:text-teal-300":a(r).tab==="termine","text-red-700 dark:text-red-300":a(r).tab==="a_refaire"}])},"Date",2),a(r).tab!=="termine"?(l(),d("th",{key:2,class:i(["px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",{"text-blue-700 dark:text-blue-300":a(r).tab==="en_attente","text-red-700 dark:text-red-300":a(r).tab==="a_refaire"}])},"Actions",2)):x("",!0)])],2),e("tbody",ie,[(l(!0),d(m,null,M(u.prescriptions.data,s=>{var k,v,w,_,C;return l(),d("tr",{key:s.id,class:i(["transition-colors",{"hover:bg-blue-50 dark:hover:bg-blue-900/10":a(r).tab==="en_attente","hover:bg-teal-50 dark:hover:bg-teal-900/10":a(r).tab==="termine","hover:bg-red-50 dark:hover:bg-red-900/10":a(r).tab==="a_refaire"}])},[e("td",ue,[e("div",xe,o(s.reference),1)]),e("td",ce,[e("div",be,[e("div",{class:i(["w-8 h-8 rounded-full flex items-center justify-center font-medium text-sm mr-3",{"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300":a(r).tab==="en_attente","bg-teal-100 dark:bg-teal-900 text-teal-600 dark:text-teal-300":a(r).tab==="termine","bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-300":a(r).tab==="a_refaire"}])},o(S(s.patient)),3),e("div",null,[e("div",ge,o(h((((k=s.patient)==null?void 0:k.nom)||"N/A")+" "+(((v=s.patient)==null?void 0:v.prenom)||""))),1),s.age&&s.unite_age?(l(),d("div",me,o(s.age)+" "+o(s.unite_age),1)):x("",!0)])])]),e("td",pe,[e("div",fe,o(h((((w=s.prescripteur)==null?void 0:w.nom)||"N/A")+" "+(((_=s.prescripteur)==null?void 0:_.prenom)||""))),1)]),e("td",ye,[e("div",he,o(((C=s.analyses)==null?void 0:C.length)||0)+" analyses ",1)]),a(r).tab==="en_attente"?(l(),d("td",ke,[s.status==="EN_ATTENTE"?(l(),d("span",ve,[...t[17]||(t[17]=[e("span",{class:"w-1.5 h-1.5 bg-yellow-500 rounded-full"},null,-1),b(" En attente ",-1)])])):s.status==="EN_COURS"?(l(),d("span",we,[...t[18]||(t[18]=[e("span",{class:"w-1.5 h-1.5 bg-blue-500 rounded-full"},null,-1),b(" En cours ",-1)])])):x("",!0)])):x("",!0),a(r).tab==="a_refaire"?(l(),d("td",_e,[e("div",Ce,o(s.commentaire_biologiste||"RÃ©sultats Ã  vÃ©rifier"),1)])):x("",!0),e("td",Te,[e("div",Ae,o(N(a(r).tab==="termine"?s.updated_at:s.created_at)),1)]),a(r).tab!=="termine"?(l(),d("td",Me,[a(r).tab==="en_attente"?(l(),d(m,{key:0},[s.status==="EN_ATTENTE"?(l(),d("button",{key:0,onClick:T=>j(s.id),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2"},[...t[19]||(t[19]=[b(" ðŸ”¬ ",-1),e("span",null,"Traiter",-1)])],8,Se)):s.status==="EN_COURS"?(l(),d("button",{key:1,onClick:T=>E(s.id),class:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2"},[...t[20]||(t[20]=[b(" â–¶ï¸ ",-1),e("span",null,"Continuer",-1)])],8,Ne)):x("",!0)],64)):x("",!0),a(r).tab==="a_refaire"?(l(),d("button",{key:1,onClick:T=>$(s.id),class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors"}," Recommencer ",8,je)):x("",!0)])):x("",!0)],2)}),128)),!u.prescriptions.data||u.prescriptions.data.length===0?(l(),d("tr",Ee,[e("td",{colspan:a(r).tab==="termine"?6:7,class:"px-6 py-12 text-center text-gray-500 dark:text-gray-400"},[e("div",ze,[t[21]||(t[21]=e("svg",{class:"w-12 h-12 mb-3 text-gray-300 dark:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e("span",Be,o(a(r).tab==="en_attente"?"Aucune analyse en attente":a(r).tab==="termine"?"Aucune analyse terminÃ©e":"Aucune analyse Ã  refaire"),1)])],8,$e)])):x("",!0)])])]),u.prescriptions.links&&u.prescriptions.links.length>3?(l(),d("div",Ve,[e("nav",Le,[e("p",Re," Affichage de "+o(u.prescriptions.from)+" Ã  "+o(u.prescriptions.to)+" sur "+o(u.prescriptions.total)+" rÃ©sultats ",1),e("div",De,[(l(!0),d(m,null,M(u.prescriptions.links,s=>(l(),d(m,{key:s.label},[s.url?(l(),H(a(O),{key:0,href:s.url,class:i(["px-3 py-1.5 text-sm rounded-lg transition-colors",s.active?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"]),innerHTML:s.label,"preserve-state":""},null,8,["href","class","innerHTML"])):(l(),d("span",{key:1,class:"px-3 py-1.5 text-sm text-gray-400 dark:text-gray-500",innerHTML:s.label},null,8,He))],64))),128))])])])):x("",!0)])])]),_:1})],64))}};export{qe as default};
