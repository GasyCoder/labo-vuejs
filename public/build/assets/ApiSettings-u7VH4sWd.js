import{r as M,u as U,w as ce,c as i,a as P,b as s,h as be,d as A,e,f as d,n as f,g,o as n,i as L,t as u,j as x,v as $,k as D,F as z,l as y,m as F,p as I,q as N,s as ye}from"./app-DB0nFYEe.js";import{_ as ve,S as oe}from"./AppLayout-Dr0HkjGz.js";import{_ as ie}from"./Modal-CO4IlAdS.js";/* empty css            */import"./_commonjsHelpers-_d1bhYXs.js";import"./debounce-D0G5qrda.js";const ke={class:"flex items-center justify-between"},fe={class:"flex items-center space-x-3"},we={class:"py-12"},he={class:"px-4 sm:px-6 lg:px-8"},Me={class:"mb-6 border-b border-gray-200 dark:border-gray-700"},Ce={class:"-mb-px flex space-x-8"},Se={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden border dark:border-gray-700"},_e={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-indigo-50 dark:bg-indigo-900/20"},Ve={class:"flex items-center justify-between"},je={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300"},Pe={class:"p-6"},Ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ze={key:0},Be={class:"relative"},qe=["type"],Ee={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ue={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Le={class:"relative"},Te=["type"],He={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$e={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},De={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Fe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ie={class:"px-6 py-3 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700 flex justify-end"},Ne=["disabled"],Oe={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Re={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden border dark:border-gray-700"},Ge={class:"p-0 overflow-x-auto"},We={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400"},Je={key:1,class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Qe={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Xe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Ze={class:"px-6 py-4 whitespace-nowrap text-sm"},Ke={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"},et={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},tt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-3"},rt=["onClick"],st=["onClick"],ot=["onClick"],it={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},nt={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden border dark:border-gray-700"},lt={class:"space-y-4"},at={key:0,class:"text-red-500 text-xs mt-1"},dt={key:0,class:"text-red-500 text-xs mt-1"},ut=["disabled"],mt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},gt={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden border dark:border-gray-700"},xt={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-green-50 dark:bg-green-900/20"},pt={class:"flex items-center"},ct={class:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"},bt={class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},yt={class:"space-y-4"},vt={key:0,class:"text-red-500 text-xs mt-1"},kt={key:0,class:"text-red-500 text-xs mt-1"},ft=["disabled"],wt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ht={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-between items-center"},Mt={class:"text-lg font-medium text-gray-900 dark:text-white"},Ct={class:"p-6 space-y-4 max-h-[70vh] overflow-y-auto"},St={key:0,class:"text-red-500 text-xs mt-1"},_t=["value"],Vt={key:0,class:"text-red-500 text-xs mt-1"},jt={key:0,class:"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4"},Pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},At={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},zt={key:0,class:"text-red-500"},Bt={key:0,class:"relative"},qt=["onUpdate:modelValue","type","required","maxlength"],Et=["onClick"],Ut={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Lt={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Tt=["onUpdate:modelValue","required","placeholder"],Ht=["onUpdate:modelValue","required","maxlength"],$t={key:3,class:"mt-1 text-xs text-gray-400"},Dt={class:"px-6 py-4 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"},Ft=["disabled"],It={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Nt={class:"p-6"},Ot={class:"mt-2 text-sm text-gray-500 dark:text-gray-400 text-center"},Rt={class:"mt-6 flex justify-center space-x-3"},Gt=["disabled"],Kt={__name:"ApiSettings",props:{emailConfig:Object,smsDrivers:Object,availableDrivers:Object,smsProviders:Array},setup(C){var Q,X,Y,Z,K,ee,te,re,se;const p=C,w=o=>{var k;const t=(k=o==null?void 0:o.props)==null?void 0:k.flash;t!=null&&t.success&&oe.fire({toast:!0,position:"top-end",icon:"success",title:t.success,showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),t!=null&&t.error&&oe.fire({toast:!0,position:"top-end",icon:"error",title:t.error,showConfirmButton:!1,timer:4e3,timerProgressBar:!0})},O=()=>{const o=window.location.hash.replace("#","");return["email","sms","test"].includes(o)?o:"email"},v=M(O()),T=o=>{v.value=o,window.location.hash=o};typeof window<"u"&&window.addEventListener("hashchange",()=>{v.value=O()});const a=U({mail_mailer:((Q=p.emailConfig)==null?void 0:Q.mail_mailer)||"",mail_host:((X=p.emailConfig)==null?void 0:X.mail_host)||"",mail_port:((Y=p.emailConfig)==null?void 0:Y.mail_port)||"",mail_username:((Z=p.emailConfig)==null?void 0:Z.mail_username)||"",mail_password:((K=p.emailConfig)==null?void 0:K.mail_password)||"",mail_encryption:((ee=p.emailConfig)==null?void 0:ee.mail_encryption)||"",mail_from_address:((te=p.emailConfig)==null?void 0:te.mail_from_address)||"",mail_from_name:((re=p.emailConfig)==null?void 0:re.mail_from_name)||"",resend_key:((se=p.emailConfig)==null?void 0:se.resend_key)||""}),ne=()=>{a.post(route("admin.api-settings.update-email"),{preserveScroll:!0,onSuccess:o=>w(o)})},_=M(!1),B=M(!1),h=M(null),V=M(null),l=U({name:"",driver:"mapi",credentials:{}}),le=()=>{var o;h.value=null,l.reset(),l.driver="mapi",l.credentials={...(o=p.smsDrivers.mapi)==null?void 0:o.values},B.value=!0},ae=o=>{h.value=o,l.name=o.name,l.driver=o.driver,l.credentials={...o.credentials},B.value=!0},j=()=>{B.value=!1,l.reset(),l.clearErrors()};ce(()=>l.driver,o=>{var t;(!h.value||h.value.driver!==o)&&(l.credentials={...(t=p.smsDrivers[o])==null?void 0:t.values})});const de=()=>{h.value?l.put(route("admin.api-settings.update-sms",h.value.id),{preserveScroll:!0,onSuccess:o=>{j(),w(o)}}):l.post(route("admin.api-settings.store-sms"),{preserveScroll:!0,onSuccess:o=>{j(),w(o)}})},ue=o=>{V.value=o,_.value=!0},me=()=>{V.value&&l.delete(route("admin.api-settings.destroy-sms",V.value.id),{preserveScroll:!0,onSuccess:o=>{_.value=!1,V.value=null,w(o)}})},ge=o=>{l.post(route("admin.api-settings.activate-sms",o.id),{preserveScroll:!0,onSuccess:t=>w(t)})},R=N(()=>{var t;const o=(t=p.smsDrivers)==null?void 0:t[l.driver];return(o==null?void 0:o.fields)||{}}),G=N(()=>p.smsProviders.find(o=>o.is_active)),W=N(()=>G.value?G.value.name:"Aucun fournisseur actif"),c=U({phone:"",message:"Ceci est un test de l'API SMS."}),b=U({email:"",message:"Ceci est un e-mail de test de configuration SMTP."}),xe=()=>{c.post(route("admin.api-settings.test-sms"),{preserveScroll:!0,onSuccess:o=>{c.reset(),w(o)}})},pe=()=>{b.post(route("admin.api-settings.test-email"),{preserveScroll:!0,onSuccess:o=>{b.reset(),w(o)}})},q=M(!1),H=M({}),J=(o,t)=>{const k=`${o}_${t}`;H.value[k]=!H.value[k]},E=(o,t)=>{const k=`${o}_${t}`;return!!H.value[k]};return(o,t)=>(n(),i(z,null,[P(s(be),{title:"Configuration API, Email & SMS"}),P(ve,null,{header:A(()=>[e("div",ke,[e("div",null,[e("div",fe,[P(s(ye),{href:o.route("admin.settings"),class:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors"},{default:A(()=>[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),t[23]||(t[23]=e("div",null,[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Configuration API, Email & SMS "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Gestion des services d'envoi d'emails et de SMS")],-1))])])])]),default:A(()=>{var k;return[e("div",we,[e("div",he,[e("div",Me,[e("nav",Ce,[e("button",{onClick:t[0]||(t[0]=r=>T("email")),class:f(["group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors",v.value==="email"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[(n(),i("svg",{class:f(["w-5 h-5 mr-2",v.value==="email"?"text-indigo-500":"text-gray-400 group-hover:text-gray-500"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[24]||(t[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},null,-1)])],2)),t[25]||(t[25]=g(" E-mail (SMTP) ",-1))],2),e("button",{onClick:t[1]||(t[1]=r=>T("sms")),class:f(["group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors",v.value==="sms"?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[(n(),i("svg",{class:f(["w-5 h-5 mr-2",v.value==="sms"?"text-green-500":"text-gray-400 group-hover:text-gray-500"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[26]||(t[26]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])],2)),t[27]||(t[27]=g(" SMS ",-1))],2),e("button",{onClick:t[2]||(t[2]=r=>T("test")),class:f(["group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors",v.value==="test"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[(n(),i("svg",{class:f(["w-5 h-5 mr-2",v.value==="test"?"text-purple-500":"text-gray-400 group-hover:text-gray-500"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[28]||(t[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"},null,-1)])],2)),t[29]||(t[29]=g(" Tester les APIs ",-1))],2)])]),d(e("div",null,[e("form",{onSubmit:L(ne,["prevent"])},[e("div",Se,[e("div",_e,[e("div",Ve,[t[30]||(t[30]=e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 mr-3 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Serveur E-mail (SMTP)"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Configuration du serveur d'envoi d'e-mails")])],-1)),e("span",je,u(((k=s(a).mail_mailer)==null?void 0:k.toUpperCase())||"SMTP"),1)])]),e("div",Pe,[e("div",Ae,[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Mailer",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>s(a).mail_mailer=r),required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[...t[31]||(t[31]=[e("option",{value:"smtp"},"SMTP",-1),e("option",{value:"resend"},"Resend API",-1),e("option",{value:"mailgun"},"Mailgun",-1),e("option",{value:"ses"},"Amazon SES",-1),e("option",{value:"postmark"},"Postmark",-1),e("option",{value:"sendmail"},"Sendmail",-1),e("option",{value:"log"},"Log (dev)",-1)])],512),[[$,s(a).mail_mailer]]),t[33]||(t[33]=e("p",{class:"mt-1 text-xs text-gray-400"},"Type de service d'envoi",-1))]),s(a).mail_mailer==="resend"?(n(),i("div",ze,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Clé API Resend",-1)),e("div",Be,[d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>s(a).resend_key=r),type:E("resend","key")?"text":"password",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white pr-10",placeholder:"re_..."},null,8,qe),[[D,s(a).resend_key]]),e("button",{type:"button",onClick:t[5]||(t[5]=r=>J("resend","key")),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[E("resend","key")?(n(),i("svg",Ue,[...t[35]||(t[35]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(n(),i("svg",Ee,[...t[34]||(t[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),t[37]||(t[37]=e("p",{class:"mt-1 text-xs text-gray-400"},"Votre clé API disponible sur resend.com",-1))])):x("",!0),s(a).mail_mailer!=="resend"?(n(),i(z,{key:1},[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Hote (Host)",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>s(a).mail_host=r),type:"text",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"smtp.gmail.com"},null,512),[[y,s(a).mail_host]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Port",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>s(a).mail_port=r),type:"number",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"587"},null,512),[[y,s(a).mail_port]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Utilisateur",-1)),d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>s(a).mail_username=r),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"user@gmail.com"},null,512),[[y,s(a).mail_username]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Mot de passe",-1)),e("div",Le,[d(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>s(a).mail_password=r),type:q.value?"text":"password",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white pr-10"},null,8,Te),[[D,s(a).mail_password]]),e("button",{type:"button",onClick:t[10]||(t[10]=r=>q.value=!q.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[q.value?(n(),i("svg",$e,[...t[42]||(t[42]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(n(),i("svg",He,[...t[41]||(t[41]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Chiffrement",-1)),d(e("select",{"onUpdate:modelValue":t[11]||(t[11]=r=>s(a).mail_encryption=r),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[...t[44]||(t[44]=[e("option",{value:""},"Aucun",-1),e("option",{value:"tls"},"TLS",-1),e("option",{value:"ssl"},"SSL",-1)])],512),[[$,s(a).mail_encryption]])])],64)):x("",!0)]),e("div",De,[t[48]||(t[48]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},"Informations d'expedition",-1)),e("div",Fe,[e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Adresse d'expedition",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>s(a).mail_from_address=r),type:"email",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"noreply@lareference.mg"},null,512),[[y,s(a).mail_from_address]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nom d'expedition",-1)),d(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>s(a).mail_from_name=r),type:"text",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"La Reference"},null,512),[[y,s(a).mail_from_name]])])])])]),e("div",Ie,[e("button",{type:"submit",disabled:s(a).processing,class:"inline-flex items-center text-sm bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-md transition-colors disabled:opacity-50"},[s(a).processing?(n(),i("svg",Oe,[...t[49]||(t[49]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):x("",!0),t[50]||(t[50]=g(" Sauvegarder la configuration E-mail ",-1))],8,Ne)])])],32)],512),[[F,v.value==="email"]]),d(e("div",null,[e("div",Re,[e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-green-50 dark:bg-green-900/20"},[e("div",{class:"flex items-center justify-between"},[t[52]||(t[52]=e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 mr-3 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Fournisseurs SMS"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Gérez vos fournisseurs de services SMS")])],-1)),e("button",{type:"button",onClick:le,class:"inline-flex items-center text-sm bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition-colors"},[...t[51]||(t[51]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),g(" Ajouter un fournisseur ",-1)])])])]),e("div",Ge,[!C.smsProviders||C.smsProviders.length===0?(n(),i("div",We," Aucun fournisseur SMS configuré. ")):(n(),i("table",Je,[t[55]||(t[55]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Nom"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Pilote (Driver)"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Statut"),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",Qe,[(n(!0),i(z,null,I(C.smsProviders,r=>(n(),i("tr",{key:r.id,class:f({"bg-green-50/30 dark:bg-green-900/10":r.is_active})},[e("td",Xe,u(r.name),1),e("td",Ye,u(C.availableDrivers[r.driver]||r.driver),1),e("td",Ze,[r.is_active?(n(),i("span",Ke," Actif ")):(n(),i("span",et," Inactif "))]),e("td",tt,[r.is_active?x("",!0):(n(),i("button",{key:0,type:"button",onClick:m=>ge(r),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"},"Activer",8,rt)),e("button",{type:"button",onClick:m=>ae(r),class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs leading-4 font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-indigo-900/50 dark:text-indigo-300 dark:hover:bg-indigo-800/50 transition-colors"},[...t[53]||(t[53]=[e("svg",{class:"mr-1.5 h-3.5 w-3.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1),g(" Éditer ",-1)])],8,st),e("button",{type:"button",onClick:m=>ue(r),class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-800/50 transition-colors"},[...t[54]||(t[54]=[e("svg",{class:"mr-1.5 h-3.5 w-3.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),g(" Supprimer ",-1)])],8,ot)])],2))),128))])]))])])],512),[[F,v.value==="sms"]]),d(e("div",null,[e("div",it,[e("div",nt,[t[60]||(t[60]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-indigo-50 dark:bg-indigo-900/20"},[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 mr-3 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Tester l'E-mail")])],-1)),e("form",{onSubmit:L(pe,["prevent"]),class:"p-6"},[t[59]||(t[59]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},"Envoyez un e-mail de test pour verifier que votre configuration SMTP fonctionne correctement.",-1)),e("div",lt,[e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Adresse E-mail de reception",-1)),d(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>s(b).email=r),type:"email",placeholder:"test@example.com",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[y,s(b).email]]),s(b).errors.email?(n(),i("div",at,u(s(b).errors.email),1)):x("",!0)]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Message optionnel",-1)),d(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=r=>s(b).message=r),rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[y,s(b).message]]),s(b).errors.message?(n(),i("div",dt,u(s(b).errors.message),1)):x("",!0)]),e("button",{type:"submit",disabled:s(b).processing,class:"w-full inline-flex justify-center items-center text-sm bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2.5 rounded-md transition-colors disabled:opacity-50"},[s(b).processing?(n(),i("svg",mt,[...t[58]||(t[58]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):x("",!0),g(" "+u(s(b).processing?"Envoi en cours...":"Envoyer E-mail de Test"),1)],8,ut)])],32)]),e("div",gt,[e("div",xt,[e("div",pt,[t[61]||(t[61]=e("svg",{class:"w-5 h-5 mr-3 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),t[62]||(t[62]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Tester le SMS",-1)),e("span",ct,u(W.value),1)])]),e("form",{onSubmit:L(xe,["prevent"]),class:"p-6"},[e("p",bt,[t[63]||(t[63]=g("Envoyez un SMS de test via ",-1)),e("strong",null,u(W.value),1),t[64]||(t[64]=g(" pour verifier que votre configuration fonctionne.",-1))]),e("div",yt,[e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Numero de telephone",-1)),d(e("input",{"onUpdate:modelValue":t[16]||(t[16]=r=>s(c).phone=r),type:"text",placeholder:"+261340000000",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[y,s(c).phone]]),s(c).errors.phone?(n(),i("div",vt,u(s(c).errors.phone),1)):x("",!0)]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Message Optionnel",-1)),d(e("textarea",{"onUpdate:modelValue":t[17]||(t[17]=r=>s(c).message=r),rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[y,s(c).message]]),s(c).errors.message?(n(),i("div",kt,u(s(c).errors.message),1)):x("",!0)]),e("button",{type:"submit",disabled:s(c).processing,class:"w-full inline-flex justify-center items-center text-sm bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-md transition-colors disabled:opacity-50"},[s(c).processing?(n(),i("svg",wt,[...t[67]||(t[67]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):x("",!0),g(" "+u(s(c).processing?"Envoi en cours...":"Envoyer SMS de Test"),1)],8,ft)])],32)])]),t[68]||(t[68]=e("div",{class:"mt-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"},[e("div",{class:"flex"},[e("svg",{class:"w-5 h-5 text-blue-400 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("p",{class:"text-sm text-blue-700 dark:text-blue-300"},"Assurez-vous d'avoir sauvegarde votre configuration avant de tester. Les messages de test seront envoyes immediatement via le fournisseur actif.")])],-1))],512),[[F,v.value==="test"]])])]),P(ie,{show:B.value,onClose:j,maxWidth:"2xl"},{default:A(()=>[e("form",{onSubmit:L(de,["prevent"])},[e("div",ht,[e("h3",Mt,u(h.value?"Modifier le fournisseur SMS":"Ajouter un fournisseur SMS"),1),e("button",{type:"button",onClick:j,class:"text-gray-400 hover:text-gray-500 focus:outline-none"},[...t[69]||(t[69]=[e("span",{class:"sr-only"},"Fermer",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ct,[e("div",null,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[g("Nom du fournisseur "),e("span",{class:"text-red-500"},"*")],-1)),d(e("input",{"onUpdate:modelValue":t[18]||(t[18]=r=>s(l).name=r),type:"text",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Mon fournisseur"},null,512),[[y,s(l).name]]),s(l).errors.name?(n(),i("div",St,u(s(l).errors.name),1)):x("",!0)]),e("div",null,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[g("Pilote (Driver) "),e("span",{class:"text-red-500"},"*")],-1)),d(e("select",{"onUpdate:modelValue":t[19]||(t[19]=r=>s(l).driver=r),required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[(n(!0),i(z,null,I(C.availableDrivers,(r,m)=>(n(),i("option",{key:m,value:m},u(r),9,_t))),128))],512),[[$,s(l).driver]]),s(l).errors.driver?(n(),i("div",Vt,u(s(l).errors.driver),1)):x("",!0)]),Object.keys(R.value).length>0?(n(),i("div",jt,[t[74]||(t[74]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-4"},"Configuration spécifique",-1)),e("div",Pt,[(n(!0),i(z,null,I(R.value,(r,m)=>(n(),i("div",{key:m,class:f({"md:col-span-2":r.full_width})},[e("label",At,[g(u(r.label)+" ",1),r.required?(n(),i("span",zt,"*")):x("",!0)]),r.type==="password"?(n(),i("div",Bt,[d(e("input",{"onUpdate:modelValue":S=>s(l).credentials[m]=S,type:E("modal",m)?"text":"password",required:r.required,maxlength:r.max,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white pr-10"},null,8,qt),[[D,s(l).credentials[m]]]),e("button",{type:"button",onClick:S=>J("modal",m),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[E("modal",m)?(n(),i("svg",Lt,[...t[73]||(t[73]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(n(),i("svg",Ut,[...t[72]||(t[72]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,Et)])):r.type==="url"?d((n(),i("input",{key:1,"onUpdate:modelValue":S=>s(l).credentials[m]=S,type:"url",required:r.required,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:r.default},null,8,Tt)),[[y,s(l).credentials[m]]]):d((n(),i("input",{key:2,"onUpdate:modelValue":S=>s(l).credentials[m]=S,type:"text",required:r.required,maxlength:r.max,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,8,Ht)),[[y,s(l).credentials[m]]]),r.hint?(n(),i("p",$t,u(r.hint),1)):x("",!0)],2))),128))])])):x("",!0)]),e("div",Dt,[e("button",{type:"button",onClick:j,class:"inline-flex items-center text-sm px-4 py-2 border border-gray-300 shadow-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}," Annuler "),e("button",{type:"submit",disabled:s(l).processing,class:"inline-flex items-center text-sm px-4 py-2 border border-transparent font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none disabled:opacity-50"},[s(l).processing?(n(),i("svg",It,[...t[75]||(t[75]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):x("",!0),t[76]||(t[76]=g(" Enregistrer ",-1))],8,Ft)])],32)]),_:1},8,["show"]),P(ie,{show:_.value,onClose:t[21]||(t[21]=r=>_.value=!1),maxWidth:"sm"},{default:A(()=>{var r;return[e("div",Nt,[t[79]||(t[79]=e("div",{class:"flex items-center justify-center mb-4 text-red-600"},[e("svg",{class:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),t[80]||(t[80]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white text-center"},"Confirmer la suppression",-1)),e("p",Ot,[t[77]||(t[77]=g(" Êtes-vous sûr de vouloir supprimer le fournisseur ",-1)),e("strong",null,u((r=V.value)==null?void 0:r.name),1),t[78]||(t[78]=g(" ? Cette action est irréversible. ",-1))]),e("div",Rt,[e("button",{type:"button",onClick:t[20]||(t[20]=m=>_.value=!1),class:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"},"Annuler"),e("button",{type:"button",onClick:me,disabled:s(l).processing,class:"inline-flex justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none disabled:opacity-50"},"Supprimer",8,Gt)])])]}),_:1},8,["show"])]}),_:1})],64))}};export{Kt as default};
